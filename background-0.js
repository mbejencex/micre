LavaPack.loadBundle([[10,{"../../../shared/modules/string-utils":4363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,networkController:n,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.addressBookController=r,this.networkController=n,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:r,addressBook:n,network:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.loadBackup(s),(r||n||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.state.networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/controllers/backup.js"}],[100,{"../controllers/transactions/lib/tx-state-history-helpers":31,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../controllers/transactions/lib/tx-state-history-helpers");var i={version:18,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=(0,s.snapshotFromTxMeta)(e);return e.history=[t],e}const t=(0,s.migrateFromSnapshotsToDiffs)(e.history).filter((e=>!Array.isArray(e)||e.length>0));return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[101,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:19,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==s.TransactionStatus.submitted)return e;const n=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===s.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===s.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),n),o=Math.max(i,n);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=s.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[102,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[103,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[104,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:22,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[105,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===s.TransactionStatus.failed||e.status===s.TransactionStatus.rejected||e.status===s.TransactionStatus.confirmed||e.status===s.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[106,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1060,{"@metamask/base-controller":1090,"@metamask/controller-utils":1095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.AddressType=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/base-controller");!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(r.AddressType||(r.AddressType={}));class i extends s.BaseController{constructor(e,t){super(e,t),this.name="AddressBookController",this.defaultState={addressBook:{}},this.initialize()}clear(){this.update({addressBook:{}})}delete(e,t){if(t=(0,n.toChecksumHexAddress)(t),!(0,n.isValidHexAddress)(t)||!this.state.addressBook[e]||!this.state.addressBook[e][t])return!1;const r=Object.assign({},this.state.addressBook);return delete r[e][t],0===Object.keys(r[e]).length&&delete r[e],this.update({addressBook:r}),!0}set(e,t,r=(0,n.toHex)(1),s="",i){if(e=(0,n.toChecksumHexAddress)(e),!(0,n.isValidHexAddress)(e))return!1;const o={address:e,chainId:r,isEns:!1,memo:s,name:t,addressType:i},a=(0,n.normalizeEnsName)(t);return a&&(o.name=a,o.isEns=!0),this.update({addressBook:Object.assign(Object.assign({},this.state.addressBook),{[r]:Object.assign(Object.assign({},this.state.addressBook[r]),{[e]:o})})}),!0}}r.AddressBookController=i,r.default=i}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.js"}],[1061,{"./AddressBookController":1060},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AddressBookController"),r)}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.js"}],[1062,{"@metamask/base-controller":1090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const o=e("@metamask/base-controller"),a={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class u extends o.BaseControllerV2{constructor({messenger:e,state:t,allAnnouncements:r}){const o=Object.assign(Object.assign({},a),t);super({messenger:e,metadata:c,name:"AnnouncementController",state:o}),n.add(this),i(this,n,"m",s).call(this,r)}updateViewed(e){this.update((({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]}))}}r.AnnouncementController=u,n=new WeakSet,s=function(e){this.update((t=>{Object.values(e).forEach((e=>{var r;t.announcements[e.id]=null!==(r=t.announcements[e.id])&&void 0!==r?r:Object.assign(Object.assign({},e),{isShown:!1})}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.js"}],[1063,{"./AnnouncementController":1062},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AnnouncementController"),r)}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.js"}],[1064,{"./errors":1065,"@metamask/base-controller":1090,"eth-rpc-errors":2738,nanoid:1067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,h,d,f,p,m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ApprovalController=r.APPROVAL_TYPE_RESULT_SUCCESS=r.APPROVAL_TYPE_RESULT_ERROR=r.ORIGIN_METAMASK=void 0;const w=e("eth-rpc-errors"),b=e("nanoid"),v=e("@metamask/base-controller"),_=e("./errors");r.ORIGIN_METAMASK="metamask",r.APPROVAL_TYPE_RESULT_ERROR="result_error",r.APPROVAL_TYPE_RESULT_SUCCESS="result_success";const k="ApprovalController",E={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1},approvalFlows:{persist:!1,anonymous:!1}};class T extends v.BaseControllerV2{constructor({messenger:e,showApprovalRequest:t,state:r={},typesExcludedFromRateLimiting:c=[]}){super({name:k,metadata:E,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0,approvalFlows:[]}),r)}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),g(this,s,new Map,"f"),g(this,i,new Map,"f"),g(this,o,t,"f"),g(this,a,c,"f"),this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${k}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${k}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${k}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${k}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${k}:rejectRequest`,this.reject.bind(this)),this.messagingSystem.registerActionHandler(`${k}:updateRequestState`,this.updateRequestState.bind(this)),this.messagingSystem.registerActionHandler(`${k}:startFlow`,this.startFlow.bind(this)),this.messagingSystem.registerActionHandler(`${k}:endFlow`,this.endFlow.bind(this)),this.messagingSystem.registerActionHandler(`${k}:setFlowLoadingText`,this.setFlowLoadingText.bind(this)),this.messagingSystem.registerActionHandler(`${k}:showSuccess`,this.success.bind(this)),this.messagingSystem.registerActionHandler(`${k}:showError`,this.error.bind(this))}addAndShowApprovalRequest(e){const t=y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult);return y(this,o,"f").call(this),t}add(e){return y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:n}=e;if(r&&n)return(null===(t=y(this,i,"f").get(r))||void 0===t?void 0:t.get(n))||0;if(r)return Array.from((y(this,i,"f").get(r)||new Map).values()).reduce(((e,t)=>e+t),0);let s=0;for(const e of Object.values(this.state.pendingApprovals))e.type===n&&(s+=1);return s}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:r,origin:n,type:o}=e;if(r){if("string"!=typeof r)throw new Error("May not specify non-string id.");return y(this,s,"f").has(r)}if(o&&"string"!=typeof o)throw new Error("May not specify non-string type.");if(n){if("string"!=typeof n)throw new Error("May not specify non-string origin.");return o?Boolean(null===(t=y(this,i,"f").get(n))||void 0===t?void 0:t.get(o)):y(this,i,"f").has(n)}if(o){for(const e of Object.values(this.state.pendingApprovals))if(e.type===o)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t,r){const s=this.get(e),i=y(this,n,"m",f).call(this,e);return new Promise(((n,o)=>{const a={success:e=>n({value:e}),error:o};if((null==r?void 0:r.waitForResult)&&!s.expectsResult)return void o(new _.ApprovalRequestNoResultSupportError(e));const c=(null==r?void 0:r.waitForResult)?a:undefined,u=s.expectsResult?{value:t,resultCallbacks:c}:t;i.resolve(u),(null==r?void 0:r.waitForResult)||n({value:undefined})}))}reject(e,t){y(this,n,"m",f).call(this,e).reject(t)}clear(e){for(const t of y(this,s,"f").keys())this.reject(t,e);y(this,i,"f").clear(),this.update((e=>{e.pendingApprovals={},e.pendingApprovalCount=0}))}updateRequestState(e){if(!this.state.pendingApprovals[e.id])throw new _.ApprovalRequestNotFoundError(e.id);this.update((t=>{t.pendingApprovals[e.id].requestState=e.requestState}))}startFlow(e={}){var t,r;const n=null!==(t=e.id)&&void 0!==t?t:(0,b.nanoid)(),s=null!==(r=e.loadingText)&&void 0!==r?r:null;return this.update((e=>{e.approvalFlows.push({id:n,loadingText:s})})),y(this,o,"f").call(this),{id:n,loadingText:s}}endFlow({id:e}){if(!this.state.approvalFlows.length)throw new _.NoApprovalFlowsError;if(e!==this.state.approvalFlows.slice(-1)[0].id)throw new _.EndInvalidFlowError(e,this.state.approvalFlows.map((e=>e.id)));this.update((e=>{e.approvalFlows.pop()}))}setFlowLoadingText({id:e,loadingText:t}){const r=this.state.approvalFlows.findIndex((t=>t.id===e));if(-1===r)throw new _.MissingApprovalFlowError(e);this.update((e=>{e.approvalFlows[r].loadingText=t}))}success(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_SUCCESS,e,{message:e.message,header:e.header}),{}}))}error(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_ERROR,e,{error:e.error,header:e.header}),{}}))}}r.ApprovalController=T,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=function(e,t,r=(0,b.nanoid)(),i,o,c){if(y(this,n,"m",u).call(this,r,e,t,i,o),!y(this,a,"f").includes(t)&&this.has({origin:e,type:t}))throw w.ethErrors.rpc.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((a,u)=>{y(this,s,"f").set(r,{resolve:a,reject:u}),y(this,n,"m",l).call(this,e,t),y(this,n,"m",h).call(this,r,e,t,i,o,c)}))},u=function(e,t,r,n,i){let o=null;if(e&&"string"==typeof e?y(this,s,"f").has(e)?o=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?r&&"string"==typeof r?n&&("object"!=typeof n||Array.isArray(n))?o="Request data must be a plain object if specified.":i&&("object"!=typeof i||Array.isArray(i))&&(o="Request state must be a plain object if specified."):o="Must specify non-empty string type.":o="Must specify non-empty string origin.":o="Must specify non-empty string id.",o)throw w.ethErrors.rpc.internal(o)},l=function(e,t){let r=y(this,i,"f").get(e);r||(r=new Map,y(this,i,"f").set(e,r));const n=r.get(t)||0;r.set(t,n+1)},h=function(e,t,r,n,s,i){const o={id:e,origin:t,type:r,time:Date.now(),requestData:n||null,requestState:s||null,expectsResult:i||!1};this.update((t=>{t.pendingApprovals[e]=o,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},d=function(e){y(this,s,"f").delete(e);const{origin:t,type:r}=this.state.pendingApprovals[e],n=y(this,i,"f").get(t),o=this.getApprovalCount({origin:t}),a=n.get(r);1===o?y(this,i,"f").delete(t):n.set(r,a-1),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},f=function(e){const t=y(this,s,"f").get(e);if(!t)throw new _.ApprovalRequestNotFoundError(e);return y(this,n,"m",d).call(this,e),t},p=function(e,t,n){return m(this,void 0,void 0,(function*(){try{yield this.addAndShowApprovalRequest({origin:r.ORIGIN_METAMASK,type:e,requestData:n})}catch(e){console.info("Failed to display result page",e)}finally{if(t.flowToEnd)try{this.endFlow({id:t.flowToEnd})}catch(e){console.info("Failed to end flow",{id:t.flowToEnd,error:e})}}}))},r.default=T}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/ApprovalController.js"}],[1065,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingApprovalFlowError=r.EndInvalidFlowError=r.NoApprovalFlowsError=r.ApprovalRequestNoResultSupportError=r.ApprovalRequestNotFoundError=void 0;class n extends Error{constructor(e){super(`Approval request with id '${e}' not found.`)}}r.ApprovalRequestNotFoundError=n;class s extends Error{constructor(e){super(`Approval acceptance requested result but request with id '${e}' does not support it.`)}}r.ApprovalRequestNoResultSupportError=s;class i extends Error{constructor(){super("No approval flows found.")}}r.NoApprovalFlowsError=i;class o extends Error{constructor(e,t){super(`Attempted to end flow with id '${e}' which does not match current flow with id '${t.slice(-1)[0]}'. All Flows: ${t.join(", ")}`)}}r.EndInvalidFlowError=o;class a extends Error{constructor(e){super(`No approval flows found with id '${e}'.`)}}r.MissingApprovalFlowError=a}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/errors.js"}],[1066,{"./ApprovalController":1064,"./errors":1065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ApprovalController"),r),s(e("./errors"),r)}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/index.js"}],[1067,{"./url-alphabet/index.cjs":1068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let o="";for(;;){let t=r(s),a=s;for(;a--;)if(o+=e[t[a]&n]||"",o.length===i)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/index.browser.cjs"}],[1068,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[107,{"../../../shared/constants/transaction":4336,"../lib/util":82,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../lib/util"),i=e("../../../shared/constants/transaction");var o={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==i.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,s.addHexPrefix)(e).toLowerCase(),to:()=>(0,s.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,s.addHexPrefix)(e),value:e=>(0,s.addHexPrefix)(e),data:e=>(0,s.addHexPrefix)(e),gas:e=>(0,s.addHexPrefix)(e),gasPrice:e=>(0,s.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[108,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[109,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[11,{"@metamask/obs-store":1328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store");r.default=class{constructor(e={}){const{accountTracker:t,getCurrentChainId:r}=e;this.accountTracker=t,this.getCurrentChainId=r;const s={cachedBalances:{},...e.initState};this.store=new n.ObservableStore(s),this._registerUpdates()}async updateCachedBalances({accounts:e}){const t=this.getCurrentChainId(),r=await this._generateBalancesToCache(e,t);this.store.updateState({cachedBalances:r})}_generateBalancesToCache(e,t){const{cachedBalances:r}=this.store.getState(),n={...r[t]};Object.keys(e).forEach((t=>{const r=e[t];r.balance&&(n[t]=r.balance)}));return{...r,[t]:n}}clearCachedBalances(){this.store.updateState({cachedBalances:{}})}_registerUpdates(){const e=this.updateCachedBalances.bind(this);this.accountTracker.store.subscribe(e)}}}}},{package:"$root$",file:"app/scripts/controllers/cached-balances.js"}],[110,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[111,{"../../../shared/constants/transaction":4336,"./fail-tx":182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("../../../shared/constants/transaction"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};var o={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[1118,{"@ethereumjs/util":409,"@metamask/eth-sig-util":1225,"@metamask/scure-bip39":1431,"@metamask/scure-bip39/dist/wordlists/english":1432,buffer:2335,"ethereum-cryptography/hdkey":1130,"ethereum-cryptography/keccak":1131,"ethereum-cryptography/utils":1137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{HDKey:n}=e("ethereum-cryptography/hdkey"),{keccak256:s}=e("ethereum-cryptography/keccak"),{bytesToHex:i}=e("ethereum-cryptography/utils"),{stripHexPrefix:o,privateToPublic:a,publicToAddress:c,ecsign:u,arrToBufArr:l,bufferToHex:h}=e("@ethereumjs/util"),d=e("@metamask/scure-bip39"),{wordlist:f}=e("@metamask/scure-bip39/dist/wordlists/english"),{concatSig:p,decrypt:m,getEncryptionPublicKey:g,normalize:y,personalSign:w,signTypedData:b,SignTypedDataVersion:v}=e("@metamask/eth-sig-util"),_="HD Key Tree";class k{constructor(e={}){this.type=_,this._wallets=[],this.deserialize(e)}generateRandomMnemonic(){this._initFromMnemonic(d.generateMnemonic(f))}_uint8ArrayToString(e){return Array.from(new Uint16Array(new Uint8Array(e).buffer)).map((e=>f[e])).join(" ")}_stringToUint8Array(e){const t=e.split(" ").map((e=>f.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)}_mnemonicToUint8Array(e){let t=e;if(e&&e.type&&"Buffer"===e.type&&(t=e.data),"string"==typeof t||r.isBuffer(t)||Array.isArray(t)){let e=t;return Array.isArray(t)?e=r.from(t).toString():r.isBuffer(t)&&(e=t.toString()),this._stringToUint8Array(e)}return t instanceof Object&&!(t instanceof Uint8Array)?Uint8Array.from(Object.values(t)):t}serialize(){const e=this._uint8ArrayToString(this.mnemonic),t=new TextEncoder("utf-8").encode(e);return Promise.resolve({mnemonic:Array.from(t),numberOfAccounts:this._wallets.length,hdPath:this.hdPath})}deserialize(e={}){if(e.numberOfAccounts&&!e.mnemonic)throw new Error("Eth-Hd-Keyring: Deserialize method cannot be called with an opts value for numberOfAccounts and no menmonic");if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");return this.opts=e,this._wallets=[],this.mnemonic=null,this.root=null,this.hdPath=e.hdPath||"m/44'/60'/0'/0",e.mnemonic&&this._initFromMnemonic(e.mnemonic),e.numberOfAccounts?this.addAccounts(e.numberOfAccounts):Promise.resolve([])}addAccounts(e=1){if(!this.root)throw new Error("Eth-Hd-Keyring: No secret recovery phrase provided");const t=this._wallets.length,r=[];for(let n=t;n<e+t;n++){const e=this.root.deriveChild(n);r.push(e),this._wallets.push(e)}const n=r.map((e=>this._addressfromPublicKey(e.publicKey)));return Promise.resolve(n)}getAccounts(){return this._wallets.map((e=>this._addressfromPublicKey(e.publicKey)))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return y(c(r.publicKey).toString("hex"))}async exportAccount(e,t={}){const r=this._getWalletForAccount(e,t);return i(r.privateKey)}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),s=t.sign(n);return s===undefined?t:s}async signMessage(e,t,n={}){const s=o(t),i=this._getPrivateKeyFor(e,n),a=u(r.from(s,"hex"),i);return p(a.v,a.r,a.s)}async signPersonalMessage(e,t,n={}){const s=this._getPrivateKeyFor(e,n),i=r.from(s,"hex");return w({privateKey:i,data:t})}async decryptMessage(e,t){const n=this._getWalletForAccount(e),{privateKey:s}=n,i=r.from(s).toString("hex");return m({privateKey:i,encryptedData:t})}async signTypedData(e,t,r={version:v.V1}){const n=Object.keys(v).includes(r.version)?r.version:v.V1,s=this._getPrivateKeyFor(e,r);return b({privateKey:s,data:t,version:n})}removeAccount(e){const t=y(e);if(!this._wallets.map((({publicKey:e})=>this._addressfromPublicKey(e))).includes(t))throw new Error(`Address ${t} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:e})=>this._addressfromPublicKey(e)!==t))}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return g(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}_getWalletForAccount(e,t={}){const n=y(e);let i=this._wallets.find((({publicKey:e})=>this._addressfromPublicKey(e)===n));if(!i)throw new Error("HD Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=i,n=r.from(t.withAppKeyOrigin,"utf8"),o=r.concat([e,n]),c=l(s(o,256));i={privateKey:c,publicKey:a(c)}}return i}_initFromMnemonic(e){if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");this.mnemonic=this._mnemonicToUint8Array(e);if(!d.validateMnemonic(this.mnemonic,f))throw new Error("Eth-Hd-Keyring: Invalid secret recovery phrase provided");const t=d.mnemonicToSeedSync(this.mnemonic,f);this.hdWallet=n.fromMasterSeed(t),this.root=this.hdWallet.derive(this.hdPath)}_addressfromPublicKey(e){return h(c(r.from(e),!0)).toLowerCase()}}k.type=_,t.exports=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring",file:"node_modules/@metamask/eth-hd-keyring/index.js"}],[1119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=s,r.bytes=i,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:s,bytes:i,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/_assert.js"}],[112,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[1120,{"./_assert.js":1119,"./utils.js":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SHA2=void 0;const n=e("./_assert.js"),s=e("./utils.js");class i extends s.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.createView)(this.buffer)}update(e){n.default.exists(this);const{view:t,buffer:r,blockLen:i}=this,o=(e=(0,s.toBytes)(e)).length;for(let n=0;n<o;){const a=Math.min(i-this.pos,o-n);if(a!==i)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,s.createView)(e);for(;i<=o-n;n+=i)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){n.default.exists(this),n.default.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}(r,i-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,s.createView)(e);this.get().forEach(((e,t)=>c.setUint32(4*t,e,o)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:s,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=s,e.destroyed=i,n%t&&e.buffer.set(r),e}}r.SHA2=i}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/_sha2.js"}],[1121,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}r.fromBig=i,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);function a(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:0|s}}r.add=a;const c={fromBig:i,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/_u64.js"}],[1122,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/cryptoBrowser.js"}],[1123,{"./_assert.js":1119,"./utils.js":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=void 0;const n=e("./_assert.js"),s=e("./utils.js");class i extends s.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,n.default.hash(e);const r=(0,s.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return n.default.exists(this),this.iHash.update(e),this}digestInto(e){n.default.exists(this),n.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=n,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.hmac=(e,t,r)=>new i(e,t).update(r).digest(),r.hmac.create=(e,t)=>new i(e,t)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/hmac.js"}],[1124,{"./_sha2.js":1120,"./utils.js":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;const n=e("./_sha2.js"),s=e("./utils.js"),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=Uint8Array.from({length:16},((e,t)=>t)),a=o.map((e=>(9*e+5)%16));let c=[o],u=[a];for(let e=0;e<4;e++)for(let t of[c,u])t.push(t[e].map((e=>i[e])));const l=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),h=c.map(((e,t)=>e.map((e=>l[t][e])))),d=u.map(((e,t)=>e.map((e=>l[t][e])))),f=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),p=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),m=(e,t)=>e<<t|e>>>32-t;function g(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const y=new Uint32Array(16);class w extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:s}=this;return[e,t,r,n,s]}set(e,t,r,n,s){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)y[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,s=0|this.h1,i=s,o=0|this.h2,a=o,l=0|this.h3,w=l,b=0|this.h4,v=b;for(let e=0;e<5;e++){const t=4-e,_=f[e],k=p[e],E=c[e],T=u[e],S=h[e],A=d[e];for(let t=0;t<16;t++){const n=m(r+g(e,s,o,l)+y[E[t]]+_,S[t])+b|0;r=b,b=l,l=0|m(o,10),o=s,s=n}for(let e=0;e<16;e++){const r=m(n+g(t,i,a,w)+y[T[e]]+k,A[e])+v|0;n=v,v=w,w=0|m(a,10),a=i,i=r}}this.set(this.h1+o+w|0,this.h2+l+v|0,this.h3+b+n|0,this.h4+r+i|0,this.h0+s+a|0)}roundClean(){y.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}r.RIPEMD160=w,r.ripemd160=(0,s.wrapConstructor)((()=>new w))}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/ripemd160.js"}],[1125,{"./_sha2.js":1120,"./utils.js":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha256=void 0;const n=e("./_sha2.js"),s=e("./utils.js"),i=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:s,F:i,G:o,H:a}=this;return[e,t,r,n,s,i,o,a]}set(e,t,r,n,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],r=c[e-2],n=(0,s.rotr)(t,7)^(0,s.rotr)(t,18)^t>>>3,i=(0,s.rotr)(r,17)^(0,s.rotr)(r,19)^r>>>10;c[e]=i+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:a,D:u,E:l,F:h,G:d,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,s.rotr)(l,6)^(0,s.rotr)(l,11)^(0,s.rotr)(l,25))+((p=l)&h^~p&d)+o[e]+c[e]|0,m=((0,s.rotr)(r,2)^(0,s.rotr)(r,13)^(0,s.rotr)(r,22))+i(r,n,a)|0;f=d,d=h,h=l,l=u+t|0,u=a,a=n,n=r,r=t+m|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,h=h+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(r,n,a,u,l,h,d,f)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}r.sha256=(0,s.wrapConstructor)((()=>new u))}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/sha256.js"}],[1126,{"./_sha2.js":1120,"./_u64.js":1121,"./utils.js":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512=r.SHA512=void 0;const n=e("./_sha2.js"),s=e("./_u64.js"),i=e("./utils.js"),[o,a]=s.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),c=new Uint32Array(80),u=new Uint32Array(80);class l extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:d,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,s,i,o,a,c,u,l,h,d,f,p,m]}set(e,t,r,n,s,i,o,a,c,u,l,h,d,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|u[e-15],n=s.default.rotrSH(t,r,1)^s.default.rotrSH(t,r,8)^s.default.shrSH(t,r,7),i=s.default.rotrSL(t,r,1)^s.default.rotrSL(t,r,8)^s.default.shrSL(t,r,7),o=0|c[e-2],a=0|u[e-2],l=s.default.rotrSH(o,a,19)^s.default.rotrBH(o,a,61)^s.default.shrSH(o,a,6),h=s.default.rotrSL(o,a,19)^s.default.rotrBL(o,a,61)^s.default.shrSL(o,a,6),d=s.default.add4L(i,h,u[e-7],u[e-16]),f=s.default.add4H(d,n,l,c[e-7],c[e-16]);c[e]=0|f,u[e]=0|d}let{Ah:r,Al:n,Bh:i,Bl:l,Ch:h,Cl:d,Dh:f,Dl:p,Eh:m,El:g,Fh:y,Fl:w,Gh:b,Gl:v,Hh:_,Hl:k}=this;for(let e=0;e<80;e++){const t=s.default.rotrSH(m,g,14)^s.default.rotrSH(m,g,18)^s.default.rotrBH(m,g,41),E=s.default.rotrSL(m,g,14)^s.default.rotrSL(m,g,18)^s.default.rotrBL(m,g,41),T=m&y^~m&b,S=g&w^~g&v,A=s.default.add5L(k,E,S,a[e],u[e]),I=s.default.add5H(A,_,t,T,o[e],c[e]),P=0|A,x=s.default.rotrSH(r,n,28)^s.default.rotrBH(r,n,34)^s.default.rotrBH(r,n,39),C=s.default.rotrSL(r,n,28)^s.default.rotrBL(r,n,34)^s.default.rotrBL(r,n,39),j=r&i^r&h^i&h,M=n&l^n&d^l&d;_=0|b,k=0|v,b=0|y,v=0|w,y=0|m,w=0|g,({h:m,l:g}=s.default.add(0|f,0|p,0|I,0|P)),f=0|h,p=0|d,h=0|i,d=0|l,i=0|r,l=0|n;const N=s.default.add3L(P,C,M);r=s.default.add3H(N,I,x,j),n=0|N}({h:r,l:n}=s.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:l}=s.default.add(0|this.Bh,0|this.Bl,0|i,0|l)),({h:h,l:d}=s.default.add(0|this.Ch,0|this.Cl,0|h,0|d)),({h:f,l:p}=s.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:m,l:g}=s.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:y,l:w}=s.default.add(0|this.Fh,0|this.Fl,0|y,0|w)),({h:b,l:v}=s.default.add(0|this.Gh,0|this.Gl,0|b,0|v)),({h:_,l:k}=s.default.add(0|this.Hh,0|this.Hl,0|_,0|k)),this.set(r,n,i,l,h,d,f,p,m,g,y,w,b,v,_,k)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=l;class h extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class d extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}r.sha512=(0,i.wrapConstructor)((()=>new l)),r.sha512_256=(0,i.wrapConstructor)((()=>new h)),r.sha384=(0,i.wrapConstructor)((()=>new d))}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/sha512.js"}],[1127,{"@noble/hashes/crypto":1122},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t};function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let s=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-s;e>=0&&e<t||(await(0,r.nextTick)(),s+=e)}},r.utf8ToBytes=i,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip39>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/hashes/utils.js"}],[1128,{crypto:2299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.schnorr=r.verify=r.signSync=r.sign=r.getSharedSecret=r.recoverPublicKey=r.getPublicKey=r.Signature=r.Point=r.CURVE=void 0;const n=e("crypto"),s=BigInt(0),i=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(8),u=o**BigInt(256),l={a:s,b:BigInt(7),P:u-o**BigInt(32)-BigInt(977),n:u-BigInt("432420386565659656852420866394968145599"),h:i,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function h(e){const{a:t,b:r}=l,n=j(e*e),s=j(n*e);return j(s+t*e+r)}r.CURVE=l;const d=l.a===s;class f{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof m))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new f(e.x,e.y,i)}static toAffineBatch(e){const t=function(e,t=l.P){const r=new Array(e.length),n=N(e.reduce(((e,n,i)=>n===s?e:(r[i]=e,j(e*n,t))),i),t);return e.reduceRight(((e,n,i)=>n===s?e:(r[i]=j(e*r[i],t),j(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return f.toAffineBatch(e).map(f.fromAffine)}equals(e){if(!(e instanceof f))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:s,y:i,z:a}=e,c=j(n**o),u=j(a**o),l=j(t*u),h=j(s*c),d=j(j(r*a)*u),p=j(j(i*n)*c);return l===h&&d===p}negate(){return new f(this.x,j(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=j(e**o),s=j(t**o),i=j(s**o),u=j(o*(j((e+s)**o)-n-i)),l=j(a*n),h=j(l**o),d=j(h-o*u),p=j(l*(u-d)-c*i),m=j(o*t*r);return new f(d,p,m)}add(e){if(!(e instanceof f))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:a,z:c}=e;if(i===s||a===s)return this;if(t===s||r===s)return e;const u=j(n**o),l=j(c**o),h=j(t*l),d=j(i*u),p=j(j(r*c)*l),m=j(j(a*n)*u),g=j(d-h),y=j(m-p);if(g===s)return y===s?this.double():f.ZERO;const w=j(g**o),b=j(g*w),v=j(h*w),_=j(y**o-b-o*v),k=j(y*(v-_)-p*b),E=j(n*c*g);return new f(_,k,E)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=f.ZERO;if("bigint"==typeof e&&e===s)return t;let r=C(e);if(r===i)return this;if(!d){let e=t,n=this;for(;r>s;)r&i&&(e=e.add(n)),n=n.double(),r>>=i;return e}let{k1neg:n,k1:o,k2neg:a,k2:c}=B(r),u=t,h=t,p=this;for(;o>s||c>s;)o&i&&(u=u.add(p)),c&i&&(h=h.add(p)),p=p.double(),o>>=i,c>>=i;return n&&(u=u.negate()),a&&(h=h.negate()),h=new f(j(h.x*l.beta),h.y,h.z),u.add(h)}precomputeWindow(e){const t=d?128/e+1:256/e+1,r=[];let n=this,s=n;for(let i=0;i<t;i++){s=n,r.push(s);for(let t=1;t<2**(e-1);t++)s=s.add(n),r.push(s);n=s.double()}return r}wNAF(e,t){!t&&this.equals(f.BASE)&&(t=m.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&p.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=f.normalizeZ(n),p.set(t,n)));let s=f.ZERO,o=f.ZERO;const a=1+(d?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);if(e>>=h,a>c&&(a-=l,e+=i),0===a){let e=n[r];t%2&&(e=e.negate()),o=o.add(e)}else{let e=n[r+Math.abs(a)-1];a<0&&(e=e.negate()),s=s.add(e)}}return{p:s,f:o}}multiply(e,t){let r,n,s=C(e);if(d){const{k1neg:e,k1:i,k2neg:o,k2:a}=B(s);let{p:c,f:u}=this.wNAF(i,t),{p:h,f:d}=this.wNAF(a,t);e&&(c=c.negate()),o&&(h=h.negate()),h=new f(j(h.x*l.beta),h.y,h.z),r=c.add(h),n=u.add(d)}else{const{p:e,f:i}=this.wNAF(s,t);r=e,n=i}return f.normalizeZ([r,n])[0]}toAffine(e=N(this.z)){const{x:t,y:r,z:n}=this,s=e,o=j(s*s),a=j(o*s),c=j(t*o),u=j(r*a);if(j(n*s)!==i)throw new Error("invZ was invalid");return new m(c,u)}}f.BASE=new f(l.Gx,l.Gy,i),f.ZERO=new f(s,i,s);const p=new WeakMap;class m{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,p.delete(this)}static fromCompressedHex(e){const t=32===e.length,r=P(t?e:e.subarray(1));if(!U(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=l,r=BigInt(6),n=BigInt(11),s=BigInt(22),i=BigInt(23),c=BigInt(44),u=BigInt(88),h=e*e*e%t,d=h*h*e%t,f=M(d,a)*d%t,p=M(f,a)*d%t,m=M(p,o)*h%t,g=M(m,n)*m%t,y=M(g,s)*g%t,w=M(y,c)*y%t,b=M(w,u)*w%t,v=M(b,c)*y%t,_=M(v,a)*d%t,k=M(_,i)*g%t,E=M(k,r)*h%t;return M(E,o)}(h(r));const s=(n&i)===i;if(t)s&&(n=j(-n));else{1==(1&e[0])!==s&&(n=j(-n))}const c=new m(r,n);return c.assertValidity(),c}static fromUncompressedHex(e){const t=P(e.subarray(1,33)),r=P(e.subarray(33,65)),n=new m(t,r);return n.assertValidity(),n}static fromHex(e){const t=x(e),r=t.length,n=t[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return m.BASE.multiply(F(e))}static fromSignature(e,t,r){const n=R(e=x(e)),{r:s,s:i}=$(t);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const o=1&r?"03":"02",a=m.fromHex(o+E(s)),{n:c}=l,u=N(s,c),h=j(-n*u,c),d=j(i*u,c),f=m.BASE.multiplyAndAddUnsafe(a,h,d);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(e=!1){return I(this.toHex(e))}toHex(e=!1){const t=E(this.x);if(e){return`${this.y&i?"03":"02"}${t}`}return`04${t}${E(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!U(t)||!U(r))throw new Error(e);const n=j(r*r);if(j(n-h(t))!==s)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new m(this.x,j(-this.y))}double(){return f.fromAffine(this).double().toAffine()}add(e){return f.fromAffine(this).add(f.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return f.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=f.fromAffine(this),o=t===s||t===i||this!==m.BASE?n.multiplyUnsafe(t):n.multiply(t),a=f.fromAffine(e).multiplyUnsafe(r),c=o.add(a);return c.equals(f.ZERO)?undefined:c.toAffine()}}function g(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function y(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${k(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:P(r),left:e.subarray(t+2)}}r.Point=m,m.BASE=new m(l.Gx,l.Gy),m.ZERO=new m(s,s);class w{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=v(e),r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?k(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new w(A(n.slice(0,64)),A(n.slice(64,128)))}static fromDER(e){const t=v(e);if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${k(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=y(e.subarray(2)),{data:n,left:s}=y(r);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${k(s)}`);return{r:t,s:n}}(t?e:I(e));return new w(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!K(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!K(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=l.n>>i;return this.s>e}normalizeS(){return this.hasHighS()?new w(this.r,l.n-this.s):this}toDERRawBytes(e=!1){return I(this.toDERHex(e))}toDERHex(e=!1){const t=g(S(this.s));if(e)return t;const r=g(S(this.r)),n=S(r.length/2),s=S(t.length/2);return`30${S(r.length/2+t.length/2+4)}02${n}${r}02${s}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return I(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}function b(...e){if(!e.every(v))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function v(e){return e instanceof Uint8Array}r.Signature=w;const _=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function k(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=_[e[r]];return t}function E(e){if(e>u)throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function T(e){return I(E(e))}function S(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function A(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function I(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function P(e){return A(k(e))}function x(e){return e instanceof Uint8Array?Uint8Array.from(e):I(e)}function C(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&K(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function j(e,t=l.P){const r=e%t;return r>=s?r:t+r}function M(e,t){const{P:r}=l;let n=e;for(;t-- >s;)n*=n,n%=r;return n}function N(e,t=l.P){if(e===s||t<=s)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=j(e,t),n=t,o=s,a=i,c=i,u=s;for(;r!==s;){const e=n/r,t=n%r,s=o-c*e,i=a-u*e;n=r,r=t,o=c,a=u,c=s,u=i}if(n!==i)throw new Error("invert: does not exist");return j(o,t)}const O=(e,t)=>(e+t/o)/t,L=o**BigInt(128);function B(e){const{n:t}=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-i*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=O(o*e,t),c=O(-n*e,t);let u=j(e-a*r-c*s,t),h=j(-a*n-c*o,t);const d=u>L,f=h>L;if(d&&(u=t-u),f&&(h=t-h),u>L||h>L)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:h}}function R(e){const{n:t}=l,r=8*e.length-256;let n=P(e);return r>0&&(n>>=BigInt(r)),n>=t&&(n-=t),n}class D{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return r.utils.hmacSha256(this.k,...e)}hmacSync(...e){if("function"!=typeof r.utils.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const t=r.utils.hmacSha256Sync(this.k,...e);if(t instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return t}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function K(e){return s<e&&e<l.n}function U(e){return s<e&&e<l.P}function H(e,t,r){const n=P(e);if(!K(n))return;const{n:o}=l,a=m.BASE.multiply(n),c=j(a.x,o);if(c===s)return;const u=j(N(n,o)*j(t+r*c,o),o);if(u===s)return;const h=new w(c,u);return{sig:h,recovery:(a.x===h.r?0:2)|Number(a.y&i)}}function F(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=A(e)}else{if(!v(e))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=P(e)}if(!K(t))throw new Error("Expected private key: 0 < key < n");return t}function V(e){return e instanceof m?(e.assertValidity(),e):m.fromHex(e)}function $(e){if(e instanceof w)return e.assertValidity(),e;try{return w.fromDER(e)}catch(t){return w.fromCompact(e)}}function G(e){const t=v(e),r="string"==typeof e,n=(t||r)&&e.length;return t?33===n||65===n:r?66===n||130===n:e instanceof m}function Y(e){return P(e.length>32?e.slice(0,32):e)}function J(e){const t=Y(e),r=j(t,l.n);return z(r<s?t:r)}function z(e){if("bigint"!=typeof e)throw new Error("Expected bigint");return I(E(e))}function W(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const s=x(e),i=F(t),o=[z(i),J(s)];if(null!=n){!0===n&&(n=r.utils.randomBytes(32));const e=x(n);if(32!==e.length)throw new Error("sign: Expected 32 bytes of extra data");o.push(e)}return{seed:b(...o),m:Y(s),d:i}}function q(e,t){let{sig:r,recovery:n}=e;const{canonical:s,der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t);s&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[a,n]:a}r.getPublicKey=function(e,t=!1){return m.fromPrivateKey(e).toRawBytes(t)},r.recoverPublicKey=function(e,t,r,n=!1){return m.fromSignature(e,t,r).toRawBytes(n)},r.getSharedSecret=function(e,t,r=!1){if(G(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!G(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=V(t);return n.assertValidity(),n.multiply(F(e)).toRawBytes(r)},r.sign=async function(e,t,r={}){const{seed:n,m:s,d:i}=W(e,t,r.extraEntropy);let o;const a=new D;for(await a.reseed(n);!(o=H(await a.generate(),s,i));)await a.reseed();return q(o,r)},r.signSync=function(e,t,r={}){const{seed:n,m:s,d:i}=W(e,t,r.extraEntropy);let o;const a=new D;for(a.reseedSync(n);!(o=H(a.generateSync(),s,i));)a.reseedSync();return q(o,r)};const Z={strict:!0};function X(e){return j(P(e),l.n)}function Q(e){return(e.y&i)===s}r.verify=function(e,t,r,n=Z){let s;try{s=$(e),t=x(t)}catch(e){return!1}const{r:i,s:o}=s;if(n.strict&&s.hasHighS())return!1;const a=R(t);let c;try{c=V(r)}catch(e){return!1}const{n:u}=l,h=N(o,u),d=j(a*h,u),f=j(i*h,u),p=m.BASE.multiplyAndAddUnsafe(c,d,f);return!!p&&j(p.x,u)===i};class ee{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=x(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=P(t.subarray(0,32)),n=P(t.subarray(32,64));return new ee(r,n)}assertValidity(){const{r:e,s:t}=this;if(!U(e)||!K(t))throw new Error("Invalid signature")}toHex(){return E(this.r)+E(this.s)}toRawBytes(){return I(this.toHex())}}function te(e,t,r){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);const n=x(e),s=F(t),i=x(r);if(32!==i.length)throw new TypeError("sign: Expected 32 bytes of aux randomness");const o=m.fromPrivateKey(s),a=o.toRawX();return{m:n,P:o,px:a,d:Q(o)?s:l.n-s,rand:i}}function re(e,t){return T(e^P(t))}function ne(e){const t=j(P(e),l.n);if(t===s)throw new Error("sign: Creation of signature failed. k is zero");const r=m.fromPrivateKey(t),n=r.toRawX();return{R:r,rx:n,k:Q(r)?t:l.n-t}}function se(e,t,r,n){return new ee(e.x,j(t+r*n,l.n)).toRawBytes()}function ie(e,t,r){const n=e instanceof ee,s=n?e:ee.fromHex(e);return n&&s.assertValidity(),{...s,m:x(t),P:V(r)}}function oe(e,t,r,n){const s=m.BASE.multiplyAndAddUnsafe(t,F(r),j(-n,l.n));return!(!s||!Q(s)||s.x!==e)}async function ae(e,t,n){try{const{r:s,s:i,m:o,P:a}=ie(e,t,n),c=X(await r.utils.taggedHash(le.challenge,T(s),a.toRawX(),o));return oe(s,a,i,c)}catch(e){return!1}}function ce(e,t,n){try{const{r:s,s:i,m:o,P:a}=ie(e,t,n),c=X(r.utils.taggedHashSync(le.challenge,T(s),a.toRawX(),o));return oe(s,a,i,c)}catch(e){return!1}}r.schnorr={Signature:ee,getPublicKey:function(e){return m.fromPrivateKey(e).toRawX()},sign:async function(e,t,n=r.utils.randomBytes()){const{m:s,px:i,d:o,rand:a}=te(e,t,n),c=re(o,await r.utils.taggedHash(le.aux,a)),{R:u,rx:l,k:h}=ne(await r.utils.taggedHash(le.nonce,c,i,s)),d=se(u,h,X(await r.utils.taggedHash(le.challenge,l,i,s)),o);if(!await ae(d,s,i))throw new Error("sign: Invalid signature produced");return d},verify:ae,signSync:function(e,t,n=r.utils.randomBytes()){const{m:s,px:i,d:o,rand:a}=te(e,t,n),c=re(o,r.utils.taggedHashSync(le.aux,a)),{R:u,rx:l,k:h}=ne(r.utils.taggedHashSync(le.nonce,c,i,s)),d=se(u,h,X(r.utils.taggedHashSync(le.challenge,l,i,s)),o);if(!ce(d,s,i))throw new Error("sign: Invalid signature produced");return d},verifySync:ce},m.BASE._setWindowSize(8);const ue={node:n,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined},le={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},he={};r.utils={isValidPrivateKey(e){try{return F(e),!0}catch(e){return!1}},privateAdd:(e,t)=>T(j(F(e)+F(t),l.n)),privateNegate:e=>{const t=F(e);return T(l.n-t)},pointAddScalar:(e,t,r)=>{const n=m.fromHex(e),s=F(t),o=m.BASE.multiplyAndAddUnsafe(n,s,i);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},pointMultiply:(e,t,r)=>{const n=m.fromHex(e),s=P(x(t));return n.multiply(s).toRawBytes(r)},hashToPrivateKey:e=>{if((e=x(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return T(j(P(e),l.n-i)+i)},randomBytes:(e=32)=>{if(ue.web)return ue.web.getRandomValues(new Uint8Array(e));if(ue.node){const{randomBytes:t}=ue.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>r.utils.hashToPrivateKey(r.utils.randomBytes(40)),bytesToHex:k,hexToBytes:I,concatBytes:b,mod:j,invert:N,sha256:async(...e)=>{if(ue.web){const t=await ue.web.subtle.digest("SHA-256",b(...e));return new Uint8Array(t)}if(ue.node){const{createHash:t}=ue.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(ue.web){const r=await ue.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=b(...t),s=await ue.web.subtle.sign("HMAC",r,n);return new Uint8Array(s)}if(ue.node){const{createHmac:r}=ue.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:undefined,hmacSha256Sync:undefined,taggedHash:async(e,...t)=>{let n=he[e];if(n===undefined){const t=await r.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=b(t,t),he[e]=n}return r.utils.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof r.utils.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");let n=he[e];if(n===undefined){const t=r.utils.sha256Sync(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=b(t,t),he[e]=n}return r.utils.sha256Sync(n,...t)},precompute(e=8,t=m.BASE){const r=t===m.BASE?t:new m(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r}}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/secp256k1",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@noble/secp256k1/lib/index.js"}],[1129,{"@noble/hashes/_assert":1119,"@noble/hashes/hmac":1123,"@noble/hashes/ripemd160":1124,"@noble/hashes/sha256":1125,"@noble/hashes/sha512":1126,"@noble/hashes/utils":1127,"@noble/secp256k1":1128,"@scure/base":1718},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HDKey=r.HARDENED_OFFSET=void 0;const n=e("@noble/hashes/hmac"),s=e("@noble/hashes/ripemd160"),i=e("@noble/hashes/sha256"),o=e("@noble/hashes/sha512"),a=e("@noble/hashes/_assert"),c=e("@noble/hashes/utils"),u=e("@noble/secp256k1"),l=e("@scure/base");u.utils.hmacSha256Sync=(e,...t)=>{const r=n.hmac.create(i.sha256,e);return t.forEach((e=>r.update(e))),r.digest()};const h=(0,l.base58check)(i.sha256);function d(e){return BigInt(`0x${(0,c.bytesToHex)(e)}`)}const f=(0,c.utf8ToBytes)("Bitcoin seed"),p={private:76066276,public:76067358};r.HARDENED_OFFSET=2147483648;const m=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class g{constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||p,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!u.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:d(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,c.hexToBytes)(t.toString(16).padStart(64,"0"))),this.pubKey=u.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=u.Point.fromHex(e.publicKey).toRawBytes(!0)}var t,r;this.pubHash=(r=this.pubKey,(0,s.ripemd160)((0,i.sha256)(r)))}get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=p){if(8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=(0,n.hmac)(o.sha512,f,e);return new g({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=p){const r=h.decode(e),n=(0,c.createView)(r),s=n.getUint32(0,!1),i={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},o=r.slice(45),a=0===o[0];if(s!==t[a?"private":"public"])throw new Error("Version mismatch");return new g(a?{...i,privateKey:o.slice(1)}:{...i,publicKey:o})}static fromJSON(e){return g.fromExtendedKey(e.xpriv)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e);if(!t||3!==t.length)throw new Error(`Invalid child index: ${e}`);let s=+t[1];if(!Number.isSafeInteger(s)||s>=r.HARDENED_OFFSET)throw new Error("Invalid index");"'"===t[2]&&(s+=r.HARDENED_OFFSET),n=n.deriveChild(s)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=m(e);if(e>=r.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,c.concatBytes)(new Uint8Array([0]),e,t)}else t=(0,c.concatBytes)(this.pubKey,t);const s=(0,n.hmac)(o.sha512,this.chainCode,t),i=d(s.slice(0,32)),a=s.slice(32);if(!u.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const l={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=u.utils.mod(this.privKey+i,u.CURVE.n);if(!u.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");l.privateKey=e}else l.publicKey=u.Point.fromHex(this.pubKey).add(u.Point.fromPrivateKey(i)).toRawBytes(!0);return new g(l)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.bytes)(e,32),u.signSync(e,this.privKey,{canonical:!0,der:!1})}verify(e,t){if((0,a.bytes)(e,32),(0,a.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=u.Signature.fromCompact(t)}catch(e){return!1}return u.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=undefined,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=undefined),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.bytes)(t,33),(0,c.concatBytes)(m(e),new Uint8Array([this.depth]),m(this.parentFingerprint),m(this.index),this.chainCode,t)}}r.HDKey=g}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@scure/bip32",file:"node_modules/@metamask/eth-hd-keyring/node_modules/@scure/bip32/lib/index.js"}],[113,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[1130,{"@scure/bip32":1129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HDKey=r.HARDENED_OFFSET=void 0;var n=e("@scure/bip32");Object.defineProperty(r,"HARDENED_OFFSET",{enumerable:!0,get:function(){return n.HARDENED_OFFSET}}),Object.defineProperty(r,"HDKey",{enumerable:!0,get:function(){return n.HDKey}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/hdkey.js"}],[1131,{"./utils":1137,"@noble/hashes/sha3":1135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),s=e("./utils");r.keccak224=(0,s.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,s.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,s.wrapHash)(n.keccak_384),r.keccak512=(0,s.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/keccak.js"}],[1132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=s,r.bytes=i,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:s,bytes:i,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_assert.js"}],[1133,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}r.fromBig=i,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);function a(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:0|s}}r.add=a;const c={fromBig:i,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_u64.js"}],[1134,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/cryptoBrowser.js"}],[1135,{"./_assert.js":1132,"./_u64.js":1133,"./utils.js":1136},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),s=e("./_u64.js"),i=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)t=(t<<l^(t>>d)*p)%f,t&h&&(s^=l<<(l<<BigInt(e))-l);c.push(s)}const[m,g]=s.default.split(c,!0),y=(e,t,r)=>r>32?s.default.rotlBH(e,t,r):s.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?s.default.rotlBL(e,t,r):s.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,s=(t+2)%10,i=r[s],o=r[s+1],a=y(i,o,1)^r[n],c=w(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],s=e[3];for(let r=0;r<24;r++){const n=a[r],i=y(t,s,n),c=w(t,s,n),u=o[r];t=e[u],s=e[u+1],e[u]=i,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends i.Hash{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return e||(e=new v(t,r,n,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,i.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const k=(e,t,r)=>(0,i.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=k(31,168,16),r.shake256=k(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/sha3.js"}],[1136,{"@noble/hashes/crypto":1134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t};function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let s=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-s;e>=0&&e<t||(await(0,r.nextTick)(),s+=e)}},r.utf8ToBytes=i,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/utils.js"}],[1137,{"@noble/hashes/_assert":1132,"@noble/hashes/utils":1136},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const s=n(e("@noble/hashes/_assert")),i=e("@noble/hashes/utils"),o=s.default.bool;r.assertBool=o;const a=s.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(s.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-hd-keyring/node_modules/ethereum-cryptography/utils.js"}],[1138,{"./fetch-config-from-req":1140,"./logging-utils":1142,"eth-rpc-errors":2738,"json-rpc-engine":3414,"node-fetch":3709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInfuraMiddleware=void 0;const s=e("json-rpc-engine"),i=e("eth-rpc-errors"),o=n(e("node-fetch")),a=e("./fetch-config-from-req"),c=e("./logging-utils"),u=(0,c.createModuleLogger)(c.projectLogger,"create-infura-middleware"),l=["Gateway timeout","ETIMEDOUT","ECONNRESET","SyntaxError"];async function h(e,t,r,n,s,c){const{fetchUrl:u,fetchParams:l}=(0,a.fetchConfigFromReq)({network:e,projectId:t,extraHeaders:r,req:n,source:c}),h=await(0,o.default)(u,l),f=await h.text();if(!h.ok)switch(h.status){case 405:throw i.ethErrors.rpc.methodNotFound();case 429:throw d("Request is being rate limited.");case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",d(e)}();default:throw d(f)}if("eth_getBlockByNumber"===n.method&&"Not Found"===f)return void(s.result=null);const p=JSON.parse(f);s.result=p.result,s.error=p.error}function d(e){return i.ethErrors.rpc.internal(e)}function f(e){const t=e.toString();return l.some((e=>t.includes(e)))}function p(e){return new Promise((t=>{setTimeout(t,e)}))}r.createInfuraMiddleware=function({network:e="mainnet",maxAttempts:t=5,source:r,projectId:n,headers:i={}}){if(!n||"string"!=typeof n)throw new Error(`Invalid value for 'projectId': "${n}"`);if(!i||"object"!=typeof i)throw new Error(`Invalid value for 'headers': "${i}"`);if(!t)throw new Error(`Invalid value for 'maxAttempts': "${t}" (${typeof t})`);return(0,s.createAsyncMiddleware)((async(s,o)=>{for(let a=1;a<=t;a++)try{u("Attempting request to Infura. network = %o, projectId = %s, headers = %o, req = %o",e,n,i,s),await h(e,n,i,s,o,r);break}catch(e){if(!f(e))throw u("Non-retriable request error encountered. req = %o, res = %o, error = %o",s,o,e),e;if(!(t-a)){u("Retriable request error encountered, but exceeded max attempts. req = %o, res = %o, error = %o",s,o,e);const t=`InfuraProvider - cannot complete request. All retries exhausted.\nOriginal Error:\n${e.toString()}\n\n`;throw new Error(t)}u("Retriable request error encountered. req = %o, res = %o, error = %o",s,o,e),u("Waiting 1 second to try again..."),await p(1e3)}}))}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-infura-middleware.js"}],[1139,{"./create-infura-middleware":1138,"@metamask/eth-json-rpc-provider":1190,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createProvider=void 0;const n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-provider"),i=e("./create-infura-middleware");r.createProvider=function(e){const t=new n.JsonRpcEngine;return t.push((0,i.createInfuraMiddleware)(e)),(0,s.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-provider.js"}],[114,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1140,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return{id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params}}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchConfigFromReq=void 0,r.fetchConfigFromReq=function({network:e,projectId:t,extraHeaders:r={},req:s,source:i}){const o=s.origin||"internal",a=Object.assign({},r,{Accept:"application/json","Content-Type":"application/json"});return i&&(a["Infura-Source"]=`${i}/${o}`),{fetchUrl:`https://${e}.infura.io/v3/${t}`,fetchParams:{method:"POST",headers:a,body:JSON.stringify(n(s))}}}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/fetch-config-from-req.js"}],[1141,{"./create-infura-middleware":1138,"./create-provider":1139,"./fetch-config-from-req":1140},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./create-infura-middleware"),r),s(e("./fetch-config-from-req"),r),s(e("./create-provider"),r)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/index.js"}],[1142,{"@metamask/utils":1151},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-infura")}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/logging-utils.js"}],[1143,{superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function s(e,t){return r=e,Boolean("string"==typeof(null===(s=null===(n=null==r?void 0:r.prototype)||void 0===n?void 0:n.constructor)||void 0===s?void 0:s.name))?new e({message:t}):e({message:t});var r,n,s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=i,r.assert=function(e,t="Assertion failed.",r=i){if(!e){if(t instanceof Error)throw t;throw s(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=i){try{(0,n.assert)(e,t)}catch(e){throw s(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/assert.js"}],[1144,{"./assert":1143,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),s=e("./assert");r.base64=(e,t={})=>{var r,i;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,a=null!==(i=t.characterSet)&&void 0!==i?i:"base64";let c,u;return"base64"===a?c=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===a),c=String.raw`[-_A-Za-z0-9]`),u=o?new RegExp(`^(?:${c}{4})*(?:${c}{3}=|${c}{2}==)?$`,"u"):new RegExp(`^(?:${c}{4})*(?:${c}{2,3}|${c}{3}=|${c}{2}==)?$`,"u"),(0,n.pattern)(e,u)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/base64.js"}],[1145,{"./assert":1143,"./hex":1150,buffer:2335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),s=e("./hex"),i=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,s.add0x)(r.join(""))}function d(e){l(e);const t=h(e);return BigInt(t)}function f(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,s.assertIsHexString)(e);const r=(0,s.remove0x)(e).toLowerCase(),n=r.length%2==0?r:`0${r}`,c=new Uint8Array(n.length/2);for(let e=0;e<c.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),s=t-(t<o?i:a),u=r-(r<o?i:a);c[e]=16*s+u}return c}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=h,r.bytesToBigInt=d,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=y(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/bytes.js"}],[1146,{"./base64":1144,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),s=e("./base64");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/checksum.js"}],[1147,{"./assert":1143,"./bytes":1145,"./hex":1150,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),s=e("./assert"),i=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),h=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,h)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/coercers.js"}],[1148,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){s.set(this,void 0),i(this,s,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return o(this,s,"f")[Symbol.iterator]()}entries(){return o(this,s,"f").entries()}forEach(e,t){return o(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return o(this,s,"f").has(e)}keys(){return o(this,s,"f").keys()}values(){return o(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/collections.js"}],[1149,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/encryption-types.js"}],[115,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[1150,{"./assert":1143,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.StrictHexStruct=r.HexStruct=void 0;const n=e("superstruct"),s=e("./assert");function i(e){return(0,n.is)(e,r.HexStruct)}function o(e){return(0,n.is)(e,r.StrictHexStruct)}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.isHexString=i,r.isStrictHexString=o,r.assertIsHexString=function(e){(0,s.assert)(i(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,s.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/hex.js"}],[1151,{"./assert":1143,"./base64":1144,"./bytes":1145,"./checksum":1146,"./coercers":1147,"./collections":1148,"./encryption-types":1149,"./hex":1150,"./json":1152,"./keyring":1153,"./logging":1154,"./misc":1155,"./number":1156,"./opaque":1157,"./time":1158,"./transaction-types":1159,"./versions":1160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert"),r),s(e("./base64"),r),s(e("./bytes"),r),s(e("./checksum"),r),s(e("./coercers"),r),s(e("./collections"),r),s(e("./encryption-types"),r),s(e("./hex"),r),s(e("./json"),r),s(e("./keyring"),r),s(e("./logging"),r),s(e("./misc"),r),s(e("./number"),r),s(e("./opaque"),r),s(e("./time"),r),s(e("./transaction-types"),r),s(e("./versions"),r)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/index.js"}],[1152,{"./assert":1143,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),s=e("./assert");r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.define)("Json",((e,t)=>{function n(e,r){const n=[...r.validator(e,t)];return!(n.length>0)||n}try{const t=n(e,r.UnsafeJsonStruct);return!0!==t?t:n(JSON.parse(JSON.stringify(e)),r.UnsafeJsonStruct)}catch(e){return e instanceof RangeError&&"Circular reference detected"}})),r.isValidJson=function(e){return(0,n.is)(e,r.JsonStruct)},r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/json.js"}],[1153,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/keyring.js"}],[1154,{debug:2583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/logging.js"}],[1155,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){var t;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(t=e.match(r.ESCAPE_CHARACTERS_REGEXP))&&void 0!==t?t:[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/misc.js"}],[1156,{"./assert":1143,"./hex":1150},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),s=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/number.js"}],[1157,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/opaque.js"}],[1158,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/time.js"}],[1159,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/transaction-types.js"}],[116,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1160,{"./assert":1143,semver:4134,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),s=e("superstruct"),i=e("./assert");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-infura/node_modules/@metamask/utils/dist/versions.js"}],[1161,{"./logging-utils":1168,"./utils/cache":1171,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("json-rpc-engine"),s=e("./logging-utils"),i=e("./utils/cache"),o=s.createModuleLogger(s.projectLogger,"block-cache"),a=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=i.cacheIdentifierForRequest(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=i.cacheIdentifierForRequest(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!i.canCache(e.method))return!1;return"pending"!==i.blockTagForRequest(e)}canCacheResult(e,t){return!a.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[i.CacheStrategy.Permanent]:t,[i.CacheStrategy.Block]:t,[i.CacheStrategy.Fork]:t,[i.CacheStrategy.Never]:undefined};return n.createAsyncMiddleware((async(n,s,a)=>{if(n.skipCache)return a();const c=i.cacheTypeForMethod(n.method),u=r[c];if(!u)return a();if(!u.canCacheRequest(n))return a();const l=i.blockTagForRequest(n),h=l&&"string"==typeof l?l:"latest";let d;if(o("blockTag = %o, req = %o",h,n),"earliest"===h)d="0x00";else if("latest"===h){o("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();o("Clearing values stored under block numbers before %o",r),t.clearBefore(r),d=r}else d=h;const f=await u.get(n,d);return f===undefined?(o("No cache stored under block number %o, carrying request forward",d),await a(),o("Populating cache with",s),await u.set(n,d,s.result)):(o("Cache hit, reusing cache result stored under block number %o",d),s.result=f),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1162,{"./utils/cache":1171,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("json-rpc-engine"),s=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return n.createAsyncMiddleware((async(t,r,n)=>{const i=s.blockTagParamIndex(t.method);if(i===undefined)return n();let o=Array.isArray(t.params)?t.params[i]:undefined;if(o===undefined&&(o="latest"),"latest"!==o)return n();const a=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[i]=a),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1163,{"./logging-utils":1168,"./utils/cache":1171,clone:2377,"json-rpc-engine":3414,pify:1189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const s=e("json-rpc-engine"),i=n(e("clone")),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=a.createModuleLogger(a.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return s.createAsyncMiddleware((async(r,n,s)=>{var a;const l=c.blockTagParamIndex(r.method);if(l===undefined)return s();if("latest"!==(Array.isArray(r.params)&&null!==(a=r.params[l])&&void 0!==a?a:"latest"))return u('blockRef is not "latest", carrying request forward'),s();const h=await t.getLatestBlock();u(`blockRef is "latest", setting param ${l} to latest block ${h}`);const d=i.default(r);Array.isArray(d.params)&&(d.params[l]=h),u("Performing another request %o",d);const f=await o.default(e.sendAsync).call(e,d);return n.result=f.result,n.error=f.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1164,{"./logging-utils":1168,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("json-rpc-engine"),s=e("./logging-utils"),i=s.createModuleLogger(s.projectLogger,"block-tracker-inspector"),o=["eth_getTransactionByHash","eth_getTransactionReceipt"];function a(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return n.createAsyncMiddleware((async(t,r,n)=>{if(!o.includes(t.method))return n();await n();const s=a(r);if(!s)return undefined;i("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(s,16)>Number.parseInt(e.getCurrentBlock(),16)&&(i("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1165,{"./utils/timeout":1172,"eth-rpc-errors":2738,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("json-rpc-engine"),s=e("eth-rpc-errors"),i=e("./utils/timeout"),o=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function a(e){switch(e.status){case 405:throw s.ethErrors.rpc.methodNotFound();case 418:throw s.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",s.ethErrors.rpc.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw s.ethErrors.rpc.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw s.ethErrors.rpc.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const s=new URL(r),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(s),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},a=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};if(s.username&&s.password){const t=e(`${s.username}:${s.password}`);c.headers.Authorization=`Basic ${t}`}return n&&a&&(c.headers[n]=a),{fetchUrl:i,fetchParams:c}}r.createFetchMiddleware=function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:s}){return n.createAsyncMiddleware((async(n,l,h)=>{const{fetchUrl:d,fetchParams:f}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:s});for(let e=0;e<5;e++){try{const e=await t(d,f);a(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const s=c(e,n);return void(l.result=s)}catch(e){const t=e.toString();if(!o.some((e=>t.includes(e))))throw e}await i.timeout(1e3)}}))},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1166,{"./block-cache":1161,"./block-ref":1163,"./block-ref-rewrite":1162,"./block-tracker-inspector":1164,"./fetch":1165,"./inflight-cache":1167,"./providerAsMiddleware":1169,"./retryOnEmpty":1170,"./wallet":1173},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./block-cache"),r),s(e("./block-ref-rewrite"),r),s(e("./block-ref"),r),s(e("./block-tracker-inspector"),r),s(e("./fetch"),r),s(e("./inflight-cache"),r),s(e("./providerAsMiddleware"),r),s(e("./retryOnEmpty"),r),s(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[1167,{"./logging-utils":1168,"./utils/cache":1171,clone:2377,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const s=n(e("clone")),i=e("json-rpc-engine"),o=e("./logging-utils"),a=e("./utils/cache"),c=o.createModuleLogger(o.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return i.createAsyncMiddleware((async(t,r,n)=>{if(t.skipCache)return n();const i=a.cacheIdentifierForRequest(t);if(!i)return c("Request is not cacheable, proceeding. req = %o",t),n();let o=e[i];return o?(c("Running %i handler(s) for request %o",o.length,t),await function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=s.default(t.result),e.error=s.default(t.error),r()})),n}(r,o),undefined):(o=[],e[i]=o,c("Carrying original request forward %o",t),await n(),delete e[i],c("Running %i collected handler(s) for request %o",o.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,o),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1168,{"@metamask/utils":1181},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=n.createProjectLogger("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1169,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0,r.providerAsMiddleware=function(e){return(t,r,n,s)=>{e.sendAsync(t,((e,t)=>e instanceof Error?s(e):(Object.assign(r,t),s())))}},r.ethersProviderAsMiddleware=function(e){return(t,r,n,s)=>{e.send(t,((e,t)=>e?s(e):(Object.assign(r,t),s())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[117,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[1170,{"./logging-utils":1168,"./utils/cache":1171,"./utils/timeout":1172,clone:2377,"json-rpc-engine":3414,pify:1189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const s=n(e("clone")),i=e("json-rpc-engine"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=e("./utils/timeout"),l=a.createModuleLogger(a.projectLogger,"retry-on-empty"),h=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return i.createAsyncMiddleware((async(r,n,i)=>{const a=c.blockTagParamIndex(r.method);if(a===undefined)return i();let d=Array.isArray(r.params)?r.params[a]:undefined;if(d===undefined&&(d="latest"),["latest","pending"].includes(d))return i();const f=Number.parseInt(d.slice(2),16);if(Number.isNaN(f))return i();const p=await t.getLatestBlock(),m=Number.parseInt(p.slice(2),16);if(f>m)return l("Requested block number %o is higher than latest block number %o, falling through to original request",f,m),i();l("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",f,m);const g=s.default(r),y=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){l("(call %i) Request failed, waiting 1s to retry again...",r+1),await u.timeout(1e3)}throw l("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{l("Performing request %o",g);const t=await o.default(e.sendAsync).call(e,g);if(l("Response is %o",t),h.includes(t.result))throw new Error(`RetryOnEmptyMiddleware - empty response "${JSON.stringify(t)}" for request "${JSON.stringify(g)}"`);return t}));return l("Copying result %o and error %o",y.result,y.error),n.result=y.result,n.error=y.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1171,{"safe-stable-stringify":4095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=e("safe-stable-stringify").configure({bigint:!1,circularValue:Error});var s;function i(e){return a(e)!==s.Never}function o(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function a(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return s.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return s.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return s.Block;default:return s.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(s=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const s=t?function(e){if(!e.params)return[];const t=o(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return i(e.method)?`${e.method}:${n(s)}`:null},r.canCache=i,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=o(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=o,r.cacheTypeForMethod=a}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1172,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1173,{"@metamask/eth-sig-util":1225,"eth-rpc-errors":2738,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=e("json-rpc-engine"),a=i(e("@metamask/eth-sig-util")),c=e("eth-rpc-errors");function u(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:s,processTransaction:i,processSignTransaction:l,processTypedMessage:h,processTypedMessageV3:d,processTypedMessageV4:f}){if(!e)throw new Error("opts.getAccounts is required");return o.createScaffoldMiddleware({eth_accounts:o.createAsyncMiddleware((async function(t,r){r.result=await e(t)})),eth_coinbase:o.createAsyncMiddleware((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:o.createAsyncMiddleware((async function(e,t){if(!i)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await i(r,e)})),eth_signTransaction:o.createAsyncMiddleware((async function(e,t){if(!l)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{};r.from=await p(r.from,e),t.result=await l(r,e)})),eth_sign:o.createAsyncMiddleware((async function(e,t){if(!n)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),s=e.params[1],i=e.params[2]||{},o=Object.assign(Object.assign({},i),{from:r,data:s});t.result=await n(o,e)})),eth_signTypedData:o.createAsyncMiddleware((async function(e,t){if(!h)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=await p(e.params[1],e),s=e.params[2]||{},i=Object.assign(Object.assign({},s),{from:n,data:r});t.result=await h(i,e,"V1")})),eth_signTypedData_v3:o.createAsyncMiddleware((async function(e,t){if(!d)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],s={data:n,from:r,version:"V3"};t.result=await d(s,e,"V3")})),eth_signTypedData_v4:o.createAsyncMiddleware((async function(e,t){if(!f)throw c.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],s={data:n,from:r,version:"V4"};t.result=await f(s,e,"V4")})),personal_sign:o.createAsyncMiddleware((async function(e,t){if(!s)throw c.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=e.params[1],i=e.params[2]||{};let o,a;if(u(r)&&!u(n)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=r,a=n}else a=r,o=n;o=await p(o,e);const l=Object.assign(Object.assign({},i),{from:o,data:a});t.result=await s(l,e)})),eth_getEncryptionPublicKey:o.createAsyncMiddleware((async function(e,t){if(!r)throw c.ethErrors.rpc.methodNotSupported();const n=await p(e.params[0],e);t.result=await r(n,e)})),eth_decrypt:o.createAsyncMiddleware((async function(e,r){if(!t)throw c.ethErrors.rpc.methodNotSupported();const n=e.params[0],s=await p(e.params[1],e),i=e.params[2]||{},o=Object.assign(Object.assign({},i),{from:s,data:n});r.result=await t(o,e)})),personal_ecRecover:o.createAsyncMiddleware((async function(e,t){const r=e.params[0],n=e.params[1],s=a.recoverPersonalSignature({data:r,signature:n});t.result=s}))});async function p(t,r){if("string"==typeof t&&t.length>0&&u(t)){const n=(await e(r)).map((e=>e.toLowerCase())),s=t.toLowerCase();if(n.includes(s))return s;throw c.ethErrors.provider.unauthorized()}throw c.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1174,{superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function s(e,t){return r=e,Boolean("string"==typeof(null===(s=null===(n=null==r?void 0:r.prototype)||void 0===n?void 0:n.constructor)||void 0===s?void 0:s.name))?new e({message:t}):e({message:t});var r,n,s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=i,r.assert=function(e,t="Assertion failed.",r=i){if(!e){if(t instanceof Error)throw t;throw s(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=i){try{(0,n.assert)(e,t)}catch(e){throw s(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/assert.js"}],[1175,{"./assert":1174,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),s=e("./assert");r.base64=(e,t={})=>{var r,i;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,a=null!==(i=t.characterSet)&&void 0!==i?i:"base64";let c,u;return"base64"===a?c=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===a),c=String.raw`[-_A-Za-z0-9]`),u=o?new RegExp(`^(?:${c}{4})*(?:${c}{3}=|${c}{2}==)?$`,"u"):new RegExp(`^(?:${c}{4})*(?:${c}{2,3}|${c}{3}=|${c}{2}==)?$`,"u"),(0,n.pattern)(e,u)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/base64.js"}],[1176,{"./assert":1174,"./hex":1180,buffer:2335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),s=e("./hex"),i=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,s.add0x)(r.join(""))}function d(e){l(e);const t=h(e);return BigInt(t)}function f(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,s.assertIsHexString)(e);const r=(0,s.remove0x)(e).toLowerCase(),n=r.length%2==0?r:`0${r}`,c=new Uint8Array(n.length/2);for(let e=0;e<c.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),s=t-(t<o?i:a),u=r-(r<o?i:a);c[e]=16*s+u}return c}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=h,r.bytesToBigInt=d,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=y(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/bytes.js"}],[1177,{"./base64":1175,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),s=e("./base64");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/checksum.js"}],[1178,{"./assert":1174,"./bytes":1176,"./hex":1180,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),s=e("./assert"),i=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),h=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,h)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/coercers.js"}],[1179,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){s.set(this,void 0),i(this,s,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return o(this,s,"f")[Symbol.iterator]()}entries(){return o(this,s,"f").entries()}forEach(e,t){return o(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return o(this,s,"f").has(e)}keys(){return o(this,s,"f").keys()}values(){return o(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/collections.js"}],[118,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[1180,{"./assert":1174,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.StrictHexStruct=r.HexStruct=void 0;const n=e("superstruct"),s=e("./assert");function i(e){return(0,n.is)(e,r.HexStruct)}function o(e){return(0,n.is)(e,r.StrictHexStruct)}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.isHexString=i,r.isStrictHexString=o,r.assertIsHexString=function(e){(0,s.assert)(i(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,s.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/hex.js"}],[1181,{"./assert":1174,"./base64":1175,"./bytes":1176,"./checksum":1177,"./coercers":1178,"./collections":1179,"./hex":1180,"./json":1182,"./logging":1183,"./misc":1184,"./number":1185,"./opaque":1186,"./time":1187,"./versions":1188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert"),r),s(e("./base64"),r),s(e("./bytes"),r),s(e("./checksum"),r),s(e("./coercers"),r),s(e("./collections"),r),s(e("./hex"),r),s(e("./json"),r),s(e("./logging"),r),s(e("./misc"),r),s(e("./number"),r),s(e("./opaque"),r),s(e("./time"),r),s(e("./versions"),r)}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/index.js"}],[1182,{"./assert":1174,"./misc":1184,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateJsonAndGetSize=r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.isValidJson=r.JsonStruct=void 0;const n=e("superstruct"),s=e("./assert"),i=e("./misc");function o(e,t=!1){const r=new Set;return function e(t,n){if(t===undefined)return[!1,0];if(null===t)return[!0,n?0:i.JsonSize.Null];const s=typeof t;try{if("function"===s)return[!1,0];if("string"===s||t instanceof String)return[!0,n?0:(0,i.calculateStringSize)(t)+2*i.JsonSize.Quote];if("boolean"===s||t instanceof Boolean)return n?[!0,0]:[!0,1==t?i.JsonSize.True:i.JsonSize.False];if("number"===s||t instanceof Number)return n?[!0,0]:[!0,(0,i.calculateNumberSize)(t)];if(t instanceof Date)return n?[!0,0]:[!0,isNaN(t.getDate())?i.JsonSize.Null:i.JsonSize.Date+2*i.JsonSize.Quote]}catch(e){return[!1,0]}if(!(0,i.isPlainObject)(t)&&!Array.isArray(t))return[!1,0];if(r.has(t))return[!1,0];r.add(t);try{return[!0,Object.entries(t).reduce(((s,[o,a],c,u)=>{let[l,h]=e(a,n);if(!l)throw new Error("JSON validation did not pass. Validation process stopped.");if(r.delete(t),n)return 0;return s+(Array.isArray(t)?0:o.length+i.JsonSize.Comma+2*i.JsonSize.Colon)+h+(c<u.length-1?i.JsonSize.Comma:0)}),n?0:2*i.JsonSize.Wrapper)]}catch(e){return[!1,0]}}(e,t)}r.JsonStruct=(0,n.define)("Json",(e=>{const[t]=o(e,!0);return!!t||"Expected a valid JSON-serializable value"})),r.isValidJson=function(e){return(0,n.is)(e,r.JsonStruct)},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)},r.validateJsonAndGetSize=o}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/json.js"}],[1183,{debug:2583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/logging.js"}],[1184,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){var t;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(t=e.match(r.ESCAPE_CHARACTERS_REGEXP))&&void 0!==t?t:[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/misc.js"}],[1185,{"./assert":1174,"./hex":1180},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),s=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/number.js"}],[1186,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/opaque.js"}],[1187,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/time.js"}],[1188,{"./assert":1174,semver:4134,superstruct:4188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),s=e("superstruct"),i=e("./assert");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/eth-json-rpc-middleware>@metamask/utils",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/@metamask/utils/dist/versions.js"}],[1189,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,s)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),s(t)):r(t)}else e?s(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};t.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(r):!t.exclude.some(r)};let s;s="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):n(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const i in e){const o=e[i];s[i]="function"==typeof o&&r(i)?n(o,t):o}return s}}}},{package:"@metamask/eth-json-rpc-middleware>pify",file:"node_modules/@metamask/eth-json-rpc-middleware/node_modules/pify/index.js"}],[119,{"@metamask/controller-utils":1095,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");var i={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[1190,{"./provider-from-engine":1191,"./provider-from-middleware":1192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./provider-from-engine"),r),s(e("./provider-from-middleware"),r)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/index.js"}],[1191,{"./safe-event-emitter-provider":1193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromEngine=void 0;const n=e("./safe-event-emitter-provider");r.providerFromEngine=function(e){return new n.SafeEventEmitterProvider({engine:e})}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-engine.js"}],[1192,{"./provider-from-engine":1191,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromMiddleware=void 0;const n=e("json-rpc-engine"),s=e("./provider-from-engine");r.providerFromMiddleware=function(e){const t=new n.JsonRpcEngine;return t.push(e),(0,s.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-middleware.js"}],[1193,{"@metamask/safe-event-emitter":1430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SafeEventEmitterProvider=void 0;const a=o(e("@metamask/safe-event-emitter"));class c extends a.default{constructor({engine:e}){super(),n.set(this,void 0),this.sendAsync=(e,t)=>{i(this,n,"f").handle(e,t)},this.send=(e,t)=>{if("function"!=typeof t)throw new Error('Must provide callback to "send" method.');i(this,n,"f").handle(e,t)},s(this,n,e,"f"),e.on&&e.on("notification",(e=>{this.emit("data",null,e)}))}}r.SafeEventEmitterProvider=c,n=new WeakMap}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/safe-event-emitter-provider.js"}],[1194,{"@metamask/browser-passworder":1091,"@metamask/eth-hd-keyring":1118,"@metamask/eth-sig-util":1197,"@metamask/eth-simple-keyring":1237,events:2336,"obs-store":3724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@metamask/browser-passworder"),s=e("@metamask/eth-hd-keyring"),{normalize:i}=e("@metamask/eth-sig-util"),o=e("@metamask/eth-simple-keyring"),{EventEmitter:a}=e("events"),c=e("obs-store"),u=[d(o),d(s)],l="HD Key Tree",h="Simple Key Pair";function d(e){const t=()=>new e;return t.type=e.type,t}t.exports={KeyringController:class extends a{constructor(e){super();const t=e.initState||{};this.keyringBuilders=e.keyringBuilders?u.concat(e.keyringBuilders):u,this.store=new c(t),this.memStore=new c({isUnlocked:!1,keyringTypes:this.keyringBuilders.map((e=>e.type)),keyrings:[],encryptionKey:null}),this.encryptor=e.encryptor||n,this.keyrings=[],this._unsupportedKeyrings=[],this.cacheEncryptionKey=Boolean(e.cacheEncryptionKey)}fullUpdate(){return this.emit("update",this.memStore.getState()),this.memStore.getState()}async createNewVaultAndKeychain(e){return this.password=e,await this.createFirstKeyTree(),this.setUnlocked(),this.fullUpdate()}async createNewVaultAndRestore(e,t){if("string"!=typeof e)throw new Error("Password must be text.");this.password=e,await this.clearKeyrings();const r=await this.addNewKeyring(l,{mnemonic:t,numberOfAccounts:1}),[n]=await r.getAccounts();if(!n)throw new Error("KeyringController - First Account not found.");return this.setUnlocked(),this.fullUpdate()}async setLocked(){return delete this.password,this.memStore.updateState({isUnlocked:!1,encryptionKey:null,encryptionSalt:null}),this.keyrings=[],await this._updateMemStoreKeyrings(),this.emit("lock"),this.fullUpdate()}async submitPassword(e){return this.keyrings=await this.unlockKeyrings(e),this.setUnlocked(),this.fullUpdate()}async submitEncryptionKey(e,t){return this.keyrings=await this.unlockKeyrings(undefined,e,t),this.setUnlocked(),this.fullUpdate()}async verifyPassword(e){const t=this.store.getState().vault;if(!t)throw new Error("Cannot unlock without a previous vault.");await this.encryptor.decrypt(e,t)}async addNewKeyring(e,t){const r=await this._newKeyring(e,t);t&&t.mnemonic||e!==l||(r.generateRandomMnemonic(),await r.addAccounts());const n=await r.getAccounts();return await this.checkForDuplicate(e,n),this.keyrings.push(r),await this.persistAllKeyrings(),this.fullUpdate(),r}async removeEmptyKeyrings(){const e=[];await Promise.all(this.keyrings.map((async t=>{(await t.getAccounts()).length>0&&e.push(t)}))),this.keyrings=e}async checkForDuplicate(e,t){const r=await this.getAccounts();if(e===h){if(Boolean(r.find((e=>{return e===t[0]||e===((r=t[0]).startsWith("0x")?r.slice(2):r);var r}))))throw new Error("The account you are trying to import is a duplicate");return t}return t}async addNewAccount(e){return(await e.addAccounts(1)).forEach((e=>{this.emit("newAccount",e)})),await this.persistAllKeyrings(),this.fullUpdate()}async exportAccount(e){const t=await this.getKeyringForAccount(e);return await t.exportAccount(i(e))}async removeAccount(e){const t=await this.getKeyringForAccount(e);if("function"!=typeof t.removeAccount)throw new Error(`Keyring ${t.type} doesn't support account removal operations`);t.removeAccount(e),this.emit("removedAccount",e);return 0===(await t.getAccounts()).length&&await this.removeEmptyKeyrings(),await this.persistAllKeyrings(),this.fullUpdate()}async signTransaction(e,t,r={}){const n=i(t),s=await this.getKeyringForAccount(n);return await s.signTransaction(n,e,r)}async signMessage(e,t={}){const r=i(e.from),n=await this.getKeyringForAccount(r);return await n.signMessage(r,e.data,t)}async signPersonalMessage(e,t={}){const r=i(e.from),n=await this.getKeyringForAccount(r);return await n.signPersonalMessage(r,e.data,t)}async getEncryptionPublicKey(e,t={}){const r=i(e),n=await this.getKeyringForAccount(e);return await n.getEncryptionPublicKey(r,t)}async decryptMessage(e,t={}){const r=i(e.from);return(await this.getKeyringForAccount(r)).decryptMessage(r,e.data,t)}async signTypedMessage(e,t={version:"V1"}){const r=i(e.from);return(await this.getKeyringForAccount(r)).signTypedData(r,e.data,t)}async getAppKeyAddress(e,t){const r=i(e);return(await this.getKeyringForAccount(r)).getAppKeyAddress(r,t)}async exportAppKeyForAddress(e,t){const r=i(e),n=await this.getKeyringForAccount(r);if(!("exportAccount"in n))throw new Error(`The keyring for address ${e} does not support exporting.`);return n.exportAccount(r,{withAppKeyOrigin:t})}async createFirstKeyTree(){this.clearKeyrings();const e=await this.addNewKeyring(l),[t]=await e.getAccounts();if(!t)throw new Error("KeyringController - No account found on keychain.");const r=i(t);return this.emit("newVault",r),null}async persistAllKeyrings(){const{encryptionKey:e,encryptionSalt:t}=this.memStore.getState();if(!this.password&&!e)throw new Error("Cannot persist vault without password and encryption key");const r=await Promise.all(this.keyrings.map((async e=>{const[t,r]=await Promise.all([e.type,e.serialize()]);return{type:t,data:r}})));let n,s;if(r.push(...this._unsupportedKeyrings),this.cacheEncryptionKey){if(this.password){const{vault:e,exportedKeyString:t}=await this.encryptor.encryptWithDetail(this.password,r);n=e,s=t}else if(e){const s=await this.encryptor.importKey(e),i=await this.encryptor.encryptWithKey(s,r);i.salt=t,n=JSON.stringify(i)}}else n=await this.encryptor.encrypt(this.password,r);if(!n)throw new Error("Cannot persist vault without vault information");return this.store.updateState({vault:n}),await this._updateMemStoreKeyrings(),s&&this.memStore.updateState({encryptionKey:s,encryptionSalt:JSON.parse(n).salt}),!0}async unlockKeyrings(e,t,r){const n=this.store.getState().vault;if(!n)throw new Error("Cannot unlock without a previous vault.");let s;if(await this.clearKeyrings(),this.cacheEncryptionKey)if(e){const t=await this.encryptor.decryptWithDetail(e,n);s=t.vault,this.password=e,this.memStore.updateState({encryptionKey:t.exportedKeyString,encryptionSalt:t.salt})}else{const e=JSON.parse(n);if(r!==e.salt)throw new Error("Encryption key and salt provided are expired");const i=await this.encryptor.importKey(t);s=await this.encryptor.decryptWithKey(i,e),this.memStore.updateState({encryptionKey:t,encryptionSalt:r})}else s=await this.encryptor.decrypt(e,n),this.password=e;return await Promise.all(s.map(this._restoreKeyring.bind(this))),await this._updateMemStoreKeyrings(),this.keyrings}async restoreKeyring(e){const t=await this._restoreKeyring(e);return t&&await this._updateMemStoreKeyrings(),t}async _restoreKeyring(e){const{type:t,data:r}=e,n=await this._newKeyring(t,r);return n?(await n.getAccounts(),this.keyrings.push(n),n):(this._unsupportedKeyrings.push(e),undefined)}getKeyringBuilderForType(e){return this.keyringBuilders.find((t=>t.type===e))}getKeyringsByType(e){return this.keyrings.filter((t=>t.type===e))}async getAccounts(){const e=this.keyrings||[];return(await Promise.all(e.map((e=>e.getAccounts())))).reduce(((e,t)=>e.concat(t)),[]).map(i)}async getKeyringForAccount(e){const t=i(e),r=await Promise.all(this.keyrings.map((e=>Promise.all([e,e.getAccounts()])))),n=r.filter((e=>e[1].map(i).includes(t)));if(n&&n.length>0)return n[0][0];let s="";throw e?r&&r.length?n&&n.length||(s="There are keyrings, but none match the address"):s="There are no keyrings":s="The address passed in is invalid/empty",new Error(`No keyring found for the requested account. Error info: ${s}`)}async displayForKeyring(e){const t=await e.getAccounts();return{type:e.type,accounts:t.map(i)}}async clearKeyrings(){this.keyrings=[],this.memStore.updateState({keyrings:[]})}async _updateMemStoreKeyrings(){const e=await Promise.all(this.keyrings.map(this.displayForKeyring));return this.memStore.updateState({keyrings:e})}setUnlocked(){this.memStore.updateState({isUnlocked:!0}),this.emit("unlock")}forgetKeyring(e){if(!e.forgetDevice)throw new Error(`KeyringController - keyring does not have method "forgetDevice", keyring type: ${e.type}`);e.forgetDevice(),this.persistAllKeyrings()}async _newKeyring(e,t){const r=this.getKeyringBuilderForType(e);if(!r)return undefined;const n=r();return await n.deserialize(t),n.init&&await n.init(),n}},keyringBuilderFactory:d}}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/index.js"}],[1195,{"./utils":1200,buffer:2335,tweetnacl:4218,"tweetnacl-util":4217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=i(e("tweetnacl")),a=i(e("tweetnacl-util")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const s=a.decodeUTF8(t),i=o.randomBytes(o.box.nonceLength),c=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(i),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=h(t),n=o.box.keyPair.fromSecretKey(r).secretKey,s=a.decodeBase64(e.nonce),i=a.decodeBase64(e.ciphertext),c=a.decodeBase64(e.ephemPublicKey),u=o.box.open(i,s,c,n);let l;try{l=a.encodeUTF8(u)}catch(e){throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")}function h(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:r,padding:""},i=t.byteLength(JSON.stringify(s),"utf-8")%2048;let o=0;return i>0&&(o=2048-i-16),s.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(s),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=h(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1196,{"./utils":1200,"@ethereumjs/util":409,"bn.js":2286,buffer:2335,"ethjs-util":1208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.rawEncode=r.parseNumber=r.solidityPack=void 0;const s=e("@ethereumjs/util"),i=e("ethjs-util"),o=n(e("bn.js")),a=e("./utils");function c(e){return e.lastIndexOf("]")===e.length-1}function u(e){const t=e.match(/(.*)\[(.*?)\]$/u);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function l(e){return parseInt(/^\D+(\d+)$/u.exec(e)[1],10)}function h(e){const t=typeof e;if("string"===t)return(0,s.isHexPrefixed)(e)?new o.default((0,i.stripHexPrefix)(e),16):new o.default(e,10);if("number"===t)return new o.default(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function d(e,r,n){let i,o;if(c(e)){const n=e.replace(/\[.*?\]/u,"");if(!c(n)){const t=u(e);if("dynamic"!==t&&0!==t&&r.length>t)throw new Error(`Elements exceed array size: ${t}`)}const s=r.map((function(e){return d(n,e,256)}));return t.concat(s)}if("bytes"===e)return r;if("string"===e)return t.from(r,"utf8");if("bool"===e){n=n||8;const e=Array(n/4).join("0");return t.from(r?`${e}1`:`${e}0`,"hex")}if("address"===e){let e=20;return n&&(e=n/8),(0,s.setLengthLeft)((0,s.toBuffer)(r),e)}if(e.startsWith("bytes")){if(i=l(e),i<1||i>32)throw new Error(`Invalid bytes<N> width: ${i}`);return"number"==typeof r&&(r=(0,a.normalize)(r)),(0,s.setLengthRight)((0,s.toBuffer)(r),i)}if(e.startsWith("uint")){if(i=l(e),i%8||i<8||i>256)throw new Error(`Invalid uint<N> width: ${i}`);if(o=h(r),o.bitLength()>i)throw new Error(`Supplied uint exceeds width: ${i} vs ${o.bitLength()}`);return n=n||i,o.toArrayLike(t,"be",n/8)}if(e.startsWith("int")){if(i=l(e),i%8||i<8||i>256)throw new Error(`Invalid int<N> width: ${i}`);if(o=h(r),o.bitLength()>i)throw new Error(`Supplied int exceeds width: ${i} vs ${o.bitLength()}`);return n=n||i,o.toTwos(i).toArrayLike(t,"be",n/8)}throw new Error(`Unsupported or invalid type: ${e}`)}function f(e){return e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256${e.slice(4)}`:"uint"===e?"uint256":e.startsWith("fixed[")?`fixed128x128${e.slice(5)}`:"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?`ufixed128x128${e.slice(6)}`:"ufixed"===e?"ufixed128x128":e}function p(e,r){let n,i,d,f;if("address"===e)return p("uint160",h(r));if("bool"===e)return p("uint8",r?1:0);if("string"===e)return p("bytes",t.from(r,"utf8"));if(c(e)){if(void 0===r.length)throw new Error("Not an array?");if(n=u(e),"dynamic"!==n&&0!==n&&r.length>n)throw new Error(`Elements exceed array size: ${n}`);for(f in d=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),r)Object.prototype.hasOwnProperty.call(r,f)&&d.push(p(e,r[f]));if("dynamic"===n){const e=p("uint256",r.length);d.unshift(e)}return t.concat(d)}if("bytes"===e)return r=t.from(r),d=t.concat([p("uint256",r.length),r]),r.length%32!=0&&(d=t.concat([d,(0,s.zeros)(32-r.length%32)])),d;if(e.startsWith("bytes")){if(n=l(e),n<1||n>32)throw new Error(`Invalid bytes<N> width: ${n}`);return"number"==typeof r&&(r=(0,a.normalize)(r)),(0,s.setLengthRight)((0,s.toBuffer)(r),32)}if(e.startsWith("uint")){if(n=l(e),n%8||n<8||n>256)throw new Error(`Invalid uint<N> width: ${n}`);if(i=h(r),i.bitLength()>n)throw new Error(`Supplied uint exceeds width: ${n} vs ${i.bitLength()}`);if(i<0)throw new Error("Supplied uint is negative");return i.toArrayLike(t,"be",32)}if(e.startsWith("int")){if(n=l(e),n%8||n<8||n>256)throw new Error(`Invalid int<N> width: ${n}`);if(i=h(r),i.bitLength()>n)throw new Error(`Supplied int exceeds width: ${n} vs ${i.bitLength()}`);return i.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){if(n=g(e),i=h(r),i<0)throw new Error("Supplied ufixed is negative");return p("uint256",i.mul(new o.default(2).pow(new o.default(n[1]))))}if(e.startsWith("fixed"))return n=g(e),p("int256",h(r).mul(new o.default(2).pow(new o.default(n[1]))));throw new Error(`Unsupported or invalid type: ${e}`)}function m(e){return"string"===e||"bytes"===e||"dynamic"===u(e)}function g(e){const t=/^\D+(\d+)x(\d+)$/u.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}r.solidityPack=function(e,r){if(e.length!==r.length)throw new Error("Number of types are not matching the values");const n=[];for(let t=0;t<e.length;t++){const s=f(e[t]),i=r[t];n.push(d(s,i,null))}return t.concat(n)},r.parseNumber=h,r.rawEncode=function(e,r){const n=[],s=[];let i=0;e.forEach((function(e){if(c(e)){const t=u(e);i+="dynamic"!==t?32*t:32}else i+=32}));for(let t=0;t<e.length;t++){const o=f(e[t]),a=p(o,r[t]);m(o)?(n.push(p("uint256",i)),s.push(a),i+=a.length):n.push(a)}return t.concat(n.concat(s))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/ethereumjs-abi-utils.js"}],[1197,{"./encryption":1195,"./personal-sign":1198,"./sign-typed-data":1199,"./utils":1200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,s(e("./personal-sign"),r),s(e("./sign-typed-data"),r),s(e("./encryption"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1198,{"./utils":1200,"@ethereumjs/util":409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),s=e("./utils");function i(e,t){const r=(0,n.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,s.legacyToBuffer)(t),i=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(i,e);return(0,s.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1199,{"./ethereumjs-abi-utils":1196,"./utils":1200,"@ethereumjs/util":409,buffer:2335,"ethereum-cryptography/keccak":1201,"ethjs-util":1208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("ethjs-util"),s=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak"),o=e("./ethereumjs-abi-utils"),a=e("./utils");var c;function u(e,t){if(!Object.keys(c).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function l(e,r,d,f,p){if(u(p,[c.V3,c.V4]),e[d]!==undefined)return["bytes32",p===c.V4&&null==f?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,s.arrToBufArr)((0,i.keccak256)(h(d,f,e,p)))];if(f===undefined)throw new Error(`missing value for field ${r} of type ${d}`);if("bytes"===d){if("number"==typeof f)f=(0,a.numberToBuffer)(f);else if((0,n.isHexString)(f)){const e=f.length%2?"0":"";f=t.from(e+f.slice(2),"hex")}else f=t.from(f,"utf8");return["bytes32",(0,s.arrToBufArr)((0,i.keccak256)(f))]}if("string"===d)return f="number"==typeof f?(0,a.numberToBuffer)(f):t.from(null!=f?f:"","utf8"),["bytes32",(0,s.arrToBufArr)((0,i.keccak256)(f))];if(d.lastIndexOf("]")===d.length-1){if(p===c.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const t=d.slice(0,d.lastIndexOf("[")),n=f.map((n=>l(e,r,t,n,p)));return["bytes32",(0,s.arrToBufArr)((0,i.keccak256)((0,o.rawEncode)(n.map((([e])=>e)),n.map((([,e])=>e)))))]}return[d,f]}function h(e,t,r,n){u(n,[c.V3,c.V4]);const s=["bytes32"],i=[m(e,r)];for(const o of r[e]){if(n===c.V3&&t[o.name]===undefined)continue;const[e,a]=l(r,o.name,o.type,t[o.name],n);s.push(e),i.push(a)}return(0,o.rawEncode)(s,i)}function d(e,t){let r="";const n=f(e,t);n.delete(e);const s=[e,...Array.from(n).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function f(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])f(n.type,t,r);return r}function p(e,t,r,n){return u(n,[c.V3,c.V4]),(0,s.arrToBufArr)((0,i.keccak256)(h(e,t,r,n)))}function m(e,r){const n=t.from(d(e,r),"utf-8");return(0,s.arrToBufArr)((0,i.keccak256)(n))}function g(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function y(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((function(e){return"bytes"!==e.type?e.value:(0,a.legacyToBuffer)(e.value)})),n=e.map((function(e){return e.type})),c=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,s.arrToBufArr)((0,i.keccak256)((0,o.solidityPack)(["bytes32","bytes32"],[(0,i.keccak256)((0,o.solidityPack)(new Array(e.length).fill("string"),c)),(0,i.keccak256)((0,o.solidityPack)(n,r))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(c=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:h,encodeType:d,findTypeDependencies:f,hashStruct:p,hashType:m,sanitizeData:g,eip712Hash:function(e,r){u(r,[c.V3,c.V4]);const n=g(e),o=[t.from("1901","hex")];return o.push(p("EIP712Domain",n.domain,n.types,r)),"EIP712Domain"!==n.primaryType&&o.push(p(n.primaryType,n.message,n.types,r)),(0,s.arrToBufArr)((0,i.keccak256)(t.concat(o)))}},r.typedSignatureHash=function(e){const t=y(e);return(0,s.bufferToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:n}){if(u(n),(0,a.isNullish)(t))throw new Error("Missing data parameter");if((0,a.isNullish)(e))throw new Error("Missing private key parameter");const i=n===c.V1?y(t):r.TypedDataUtils.eip712Hash(t,n),o=(0,s.ecsign)(i,e);return(0,a.concatSig)((0,s.toBuffer)(o.v),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:n}){if(u(n),(0,a.isNullish)(e))throw new Error("Missing data parameter");if((0,a.isNullish)(t))throw new Error("Missing signature parameter");const i=n===c.V1?y(e):r.TypedDataUtils.eip712Hash(e,n),o=(0,a.recoverPublicKey)(i,t),l=(0,s.publicToAddress)(o);return(0,s.bufferToHex)(l)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[12,{"../../../shared/constants/metametrics":4323,"../../../shared/modules/hexstring-utils":4354,"@metamask/base-controller":1090,"@metamask/controller-utils":1095,"@metamask/message-manager":1299,buffer:2335,events:2336,loglevel:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultState=r.default=void 0;var n=l(e("events")),s=l(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("@metamask/controller-utils"),c=e("../../../shared/constants/metametrics"),u=e("../../../shared/modules/hexstring-utils");function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},f=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=f;class p extends o.BaseControllerV2{constructor({getState:e,keyringController:t,metricsEvent:r,messenger:s}){super({metadata:d,messenger:s,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_keyringController",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._keyringController=t,this._metricsEvent=r,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);r.data=this._parseMessageData(r.data);const n=await this._keyringController.decryptMessage(r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;e.data=this._parseMessageData(e.data);const r=await this._keyringController.decryptMessage(e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:c.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||a.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:a.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,u.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=p}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[120,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[1200,{"@ethereumjs/util":409,buffer:2335,"ethjs-util":1208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.numberToBuffer=r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),s=e("ethjs-util");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}r.padWithZeroes=i,r.isNullish=function(e){return null===e||e===undefined},r.legacyToBuffer=function(e){return"string"!=typeof e||(0,s.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=i((0,n.toUnsigned)(o).toString("hex"),64),l=i((0,n.toUnsigned)(a).toString("hex"),64),h=(0,s.stripHexPrefix)((0,s.intToHex)(c));return(0,n.addHexPrefix)(u.concat(l,h))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(!e)return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,n.toBuffer)(e);e=(0,n.bufferToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,n.addHexPrefix)(e.toLowerCase())},r.numberToBuffer=function(e){const r=e.toString(16),n=r.length%2?"0":"";return t.from(n+r,"hex")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1201,{"./utils":1207,"@noble/hashes/sha3":1205},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),s=e("./utils");r.keccak224=(0,s.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,s.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,s.wrapHash)(n.keccak_384),r.keccak512=(0,s.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/keccak.js"}],[1202,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=s,r.bytes=i,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:s,bytes:i,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_assert.js"}],[1203,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}r.fromBig=i,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);function a(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:0|s}}r.add=a;const c={fromBig:i,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_u64.js"}],[1204,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/node_modules/@noble/hashes/cryptoBrowser.js"}],[1205,{"./_assert.js":1202,"./_u64.js":1203,"./utils.js":1206},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),s=e("./_u64.js"),i=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)t=(t<<l^(t>>d)*p)%f,t&h&&(s^=l<<(l<<BigInt(e))-l);c.push(s)}const[m,g]=s.default.split(c,!0),y=(e,t,r)=>r>32?s.default.rotlBH(e,t,r):s.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?s.default.rotlBL(e,t,r):s.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,s=(t+2)%10,i=r[s],o=r[s+1],a=y(i,o,1)^r[n],c=w(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],s=e[3];for(let r=0;r<24;r++){const n=a[r],i=y(t,s,n),c=w(t,s,n),u=o[r];t=e[u],s=e[u+1],e[u]=i,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends i.Hash{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return e||(e=new v(t,r,n,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,i.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const k=(e,t,r)=>(0,i.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=k(31,168,16),r.shake256=k(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/node_modules/@noble/hashes/sha3.js"}],[1206,{"@noble/hashes/crypto":1204},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t};function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let s=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-s;e>=0&&e<t||(await(0,r.nextTick)(),s+=e)}},r.utf8ToBytes=i,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/node_modules/@noble/hashes/utils.js"}],[1207,{"@noble/hashes/_assert":1202,"@noble/hashes/utils":1206},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const s=n(e("@noble/hashes/_assert")),i=e("@noble/hashes/utils"),o=s.default.bool;r.assertBool=o;const a=s.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(s.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethereum-cryptography/utils.js"}],[1208,{buffer:2335,"is-hex-prefixed":3390,"strip-hex-prefix":4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),s=e("strip-hex-prefix");function i(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(i(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:s,padToEven:i,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+i(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},toUtf8:function(e){return new r(i(s(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],s=0;s<e.length;s++){var i=e[s][t];if(r&&!i)i="";else if("string"!=typeof i)throw new Error("invalid abi");n.push(i)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-sig-util>ethjs-util",file:"node_modules/@metamask/eth-keyring-controller/node_modules/ethjs-util/lib/index.js"}],[1209,{"@ethereumjs/tx":385,buffer:2335,"eth-sig-util":1210,"ethereumjs-util":2774,events:2336,hdkey:1216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{EventEmitter:n}=e("events"),s=e("hdkey"),i=e("ethereumjs-util"),o=e("eth-sig-util"),{TransactionFactory:a}=e("@ethereumjs/tx"),c="m",u=`${c}/44'/60'/0'`,l="Ledger Hardware",h={ropsten:"http://api-ropsten.etherscan.io",kovan:"http://api-kovan.etherscan.io",rinkeby:"https://api-rinkeby.etherscan.io",mainnet:"https://api.etherscan.io"};class d extends n{constructor(e={}){super(),this.accountDetails={},this.bridgeUrl=null,this.type=l,this.page=0,this.perPage=5,this.unlockedAccount=0,this.hdk=new s,this.paths={},this.iframe=null,this.network="mainnet",this.implementFullBIP44=!1,this.deserialize(e),this.iframeLoaded=!1,this._setupIframe(),this.currentMessageId=0,this.messageCallbacks={},this._setupListener()}serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,bridgeUrl:this.bridgeUrl,implementFullBIP44:!1})}deserialize(e={}){return this.hdPath=e.hdPath||u,this.bridgeUrl=e.bridgeUrl||"https://metamask.github.io/eth-ledger-bridge-keyring",this.accounts=e.accounts||[],this.accountDetails=e.accountDetails||{},e.accountDetails||this._migrateAccountDetails(e),this.implementFullBIP44=e.implementFullBIP44||!1,this.accounts=this.accounts.filter((e=>Object.keys(this.accountDetails).includes(i.toChecksumAddress(e)))),Promise.resolve()}_migrateAccountDetails(e){if(this._isLedgerLiveHdPath()&&e.accountIndexes)for(const t of Object.keys(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:this._getPathForIndex(e.accountIndexes[t])};this._isLedgerLiveHdPath()||this.accounts.filter((e=>!Object.keys(this.accountDetails).includes(i.toChecksumAddress(e)))).forEach((e=>{try{this.accountDetails[i.toChecksumAddress(e)]={bip44:!1,hdPath:this._pathFromAddress(e)}}catch(t){console.log(`failed to migrate account ${e}`)}}))}isUnlocked(){return Boolean(this.hdk&&this.hdk.publicKey)}isConnected(){return this.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new s),this.hdPath=e}unlock(e,t=!0){if(this.isUnlocked()&&!e)return Promise.resolve("already unlocked");const n=e?this._toLedgerPath(e):this.hdPath;return new Promise(((e,s)=>{this._sendMessage({action:"ledger-unlock",params:{hdPath:n}},(({success:n,payload:i})=>{n?(t&&(this.hdk.publicKey=r.from(i.publicKey,"hex"),this.hdk.chainCode=r.from(i.chainCode,"hex")),e(i.address)):s(i.error||new Error("Unknown error"))}))}))}addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const n=this.unlockedAccount,s=n+e;for(let e=n;e<s;e++){const t=this._getPathForIndex(e);let r;r=this._isLedgerLiveHdPath()?await this.unlock(t):this._addressFromIndex(c,e),this.accountDetails[i.toChecksumAddress(r)]={bip44:this._isLedgerLiveHdPath(),hdPath:t},this.accounts.includes(r)||this.accounts.push(r),this.page=0}t(this.accounts)})).catch(r)}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase())),delete this.accountDetails[i.toChecksumAddress(e)]}attemptMakeApp(){return new Promise(((e,t)=>{this._sendMessage({action:"ledger-make-app"},(({success:r,error:n})=>{r?e(!0):t(n)}))}))}updateTransportMethod(e){return new Promise(((t,r)=>{this.iframeLoaded?this._sendMessage({action:"ledger-update-transport",params:{transportType:e}},(({success:e})=>{e?t(!0):r(new Error("Ledger transport could not be updated"))})):this.delayedPromise={resolve:t,reject:r,transportType:e}}))}signTransaction(e,t){let n;if("function"==typeof t.getChainId)return t.v=i.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),this._signTransaction(e,n,(e=>(t.v=r.from(e.v,"hex"),t.r=r.from(e.r,"hex"),t.s=r.from(e.s,"hex"),t)));const s=t.getMessageToSign(!1);return n=r.isBuffer(s)?s.toString("hex"):i.rlp.encode(s).toString("hex"),this._signTransaction(e,n,(e=>{const r=t.toJSON();return r.type=t.type,r.v=i.addHexPrefix(e.v),r.r=i.addHexPrefix(e.r),r.s=i.addHexPrefix(e.s),a.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}_signTransaction(e,t,r){return new Promise(((n,s)=>{this.unlockAccountByAddress(e).then((e=>{this._sendMessage({action:"ledger-sign-transaction",params:{tx:t,hdPath:e}},(({success:e,payload:t})=>{if(e){const e=r(t);e.verifySignature()?n(e):s(new Error("Ledger: The transaction signature is not valid"))}else s(t.error||new Error("Ledger: Unknown error while signing transaction"))}))})).catch(s)}))}signMessage(e,t){return this.signPersonalMessage(e,t)}signPersonalMessage(e,t){return new Promise(((r,n)=>{this.unlockAccountByAddress(e).then((s=>{this._sendMessage({action:"ledger-sign-personal-message",params:{hdPath:s,message:i.stripHexPrefix(t)}},(({success:s,payload:a})=>{if(s){let s=parseInt(a.v,10);s=s.toString(16),s.length<2&&(s=`0${s}`);const c=`0x${a.r}${a.s}${s}`,u=o.recoverPersonalSignature({data:t,sig:c});i.toChecksumAddress(u)!==i.toChecksumAddress(e)&&n(new Error("Ledger: The signature doesnt match the right address")),r(c)}else n(a.error||new Error("Ledger: Unknown error while signing message"))}))})).catch(n)}))}async unlockAccountByAddress(e){const t=i.toChecksumAddress(e);if(!Object.keys(this.accountDetails).includes(t))throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:r}=this.accountDetails[t];if((await this.unlock(r,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return r}async signTypedData(e,t,r={}){const n="V4"===r.version;if(!n)throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:s,types:a,primaryType:c,message:u}=o.TypedDataUtils.sanitizeData(t),l=o.TypedDataUtils.hashStruct("EIP712Domain",s,a,n).toString("hex"),h=o.TypedDataUtils.hashStruct(c,u,a,n).toString("hex"),d=await this.unlockAccountByAddress(e),{success:f,payload:p}=await new Promise((e=>{this._sendMessage({action:"ledger-sign-typed-data",params:{hdPath:d,domainSeparatorHex:l,hashStructMessageHex:h}},(t=>e(t)))}));if(f){let r=parseInt(p.v,10);r=r.toString(16),r.length<2&&(r=`0${r}`);const n=`0x${p.r}${p.s}${r}`,s=o.recoverTypedSignature_v4({data:t,sig:n});if(i.toChecksumAddress(s)!==i.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return n}throw p.error||new Error("Ledger: Unknown error while signing message")}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new s}_setupIframe(){this.iframe=document.createElement("iframe"),this.iframe.src=this.bridgeUrl,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{if(this.iframeLoaded=!0,this.delayedPromise)try{const e=await this.updateTransportMethod(this.delayedPromise.transportType);this.delayedPromise.resolve(e)}catch(e){this.delayedPromise.reject(e)}finally{delete this.delayedPromise}},document.head.appendChild(this.iframe)}_getOrigin(){const e=this.bridgeUrl.split("/");return e.splice(-1,1),e.join("/")}_sendMessage(e,t){e.target="LEDGER-IFRAME",this.currentMessageId+=1,e.messageId=this.currentMessageId,this.messageCallbacks[this.currentMessageId]=t,this.iframe.contentWindow.postMessage(e,"*")}_setupListener(){this._eventListener=({origin:e,data:t})=>e===this._getOrigin()&&(t&&(this.messageCallbacks[t.messageId]?this.messageCallbacks[t.messageId](t):"ledger-connection-change"===t.action&&(this.isDeviceConnected=t.payload.connected)),undefined),window.addEventListener("message",this._eventListener)}destroy(){window.removeEventListener("message",this._eventListener)}async __getPage(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let n;return await this.unlock(),n=this._isLedgerLiveHdPath()?await this._getAccountsBIP44(t,r):this._getAccountsLegacy(t,r),n}async _getAccountsBIP44(e,t){const r=[];for(let n=e;n<t;n++){const e=this._getPathForIndex(n),t=await this.unlock(e),s=!this.implementFullBIP44||await this._hasPreviousTransactions(t);if(r.push({address:t,balance:null,index:n}),!s)break}return r}_getAccountsLegacy(e,t){const r=[];for(let n=e;n<t;n++){const e=this._addressFromIndex(c,n);r.push({address:e,balance:null,index:n}),this.paths[i.toChecksumAddress(e)]=n}return r}_padLeftEven(e){return e.length%2==0?e:`0${e}`}_normalize(e){return this._padLeftEven(i.bufferToHex(e).toLowerCase())}_addressFromIndex(e,t){const r=this.hdk.derive(`${e}/${t}`),n=i.publicToAddress(r.publicKey,!0).toString("hex");return i.toChecksumAddress(`0x${n}`)}_pathFromAddress(e){const t=i.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===this._addressFromIndex(c,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return this._getPathForIndex(r)}_toAscii(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t}_getPathForIndex(e){return this._isLedgerLiveHdPath()?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`}_isLedgerLiveHdPath(){return"m/44'/60'/0'/0/0"===this.hdPath}_toLedgerPath(e){return e.toString().replace("m/","")}async _hasPreviousTransactions(e){const t=this._getApiUrl(),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),n=await r.json();return"0"!==n.status&&n.result.length>0}_getApiUrl(){return h[this.network]||h.mainnet}}d.type=l,t.exports=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/index.js"}],[121,{"../../../shared/modules/hexstring-utils":4354,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",o="DAI",a="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===o&&(0,s.toChecksumHexAddress)(e.address)===i}var u={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=a);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=a)}}}return e}(r),t}};r.default=u}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[1210,{buffer:2335,"ethereumjs-abi":2754,"ethereumjs-util":1211,tweetnacl:4218,"tweetnacl-util":4217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),s=e("ethereumjs-util"),i=e("ethereumjs-abi"),o=e("tweetnacl");o.util=e("tweetnacl-util");const a={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},c={encodeData(e,t,r,o=!0){const a=["bytes32"],c=[this.hashType(e,r)];if(o){const u=(e,t,a)=>{if(r[t]!==undefined)return["bytes32",null===a||a===undefined?"0x0000000000000000000000000000000000000000000000000000000000000000":s.keccak(this.encodeData(t,a,r,o))];if(a===undefined)throw new Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",s.keccak(a)];if("string"===t)return"string"==typeof a&&(a=n.from(a,"utf8")),["bytes32",s.keccak(a)];if(t.lastIndexOf("]")===t.length-1){const r=t.slice(0,t.lastIndexOf("[")),n=a.map((t=>u(e,r,t)));return["bytes32",s.keccak(i.rawEncode(n.map((([e])=>e)),n.map((([,e])=>e))))]}return[t,a]};for(const n of r[e]){const[e,r]=u(n.name,n.type,t[n.name]);a.push(e),c.push(r)}}else for(const i of r[e]){let e=t[i.name];if(e!==undefined)if("bytes"===i.type)a.push("bytes32"),e=s.keccak(e),c.push(e);else if("string"===i.type)a.push("bytes32"),"string"==typeof e&&(e=n.from(e,"utf8")),e=s.keccak(e),c.push(e);else if(r[i.type]!==undefined)a.push("bytes32"),e=s.keccak(this.encodeData(i.type,e,r,o)),c.push(e);else{if(i.type.lastIndexOf("]")===i.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");a.push(i.type),c.push(e)}}return i.rawEncode(a,c)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter((t=>t!==e));n=[e].concat(n.sort());for(const e of n){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r},findTypeDependencies(e,t,r=[]){const[n]=e.match(/^\w*/u);if(e=n,r.includes(e)||t[e]===undefined)return r;r.push(e);for(const n of t[e])for(const e of this.findTypeDependencies(n.type,t,r))!r.includes(e)&&r.push(e);return r},hashStruct(e,t,r,n=!0){return s.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return s.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r of Object.keys(a.properties))e[r]&&(t[r]=e[r]);return t.types&&(t.types={EIP712Domain:[],...t.types}),t},sign(e,t=!0){const r=this.sanitizeData(e),i=[n.from("1901","hex")];return i.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&i.push(this.hashStruct(r.primaryType,r.message,r.types,t)),s.keccak(n.concat(i))}};function u(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const r=e.map((function(e){return"bytes"===e.type?s.toBuffer(e.value):e.value})),n=e.map((function(e){return e.type})),o=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return i.soliditySHA3(["bytes32","bytes32"],[i.soliditySHA3(new Array(e.length).fill("string"),o),i.soliditySHA3(n,r)])}function l(e,t){const r=s.toBuffer(t),n=s.fromRpcSig(r);return s.ecrecover(e,n.v,n.r,n.s)}function h(e){const t=s.toBuffer(e.data);return l(s.hashPersonalMessage(t),e.sig)}function d(e,t){let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r}function f(e){const t=n.from(e,"hex").toString("base64");return o.util.decodeBase64(t)}t.exports={TYPED_MESSAGE_SCHEMA:a,TypedDataUtils:c,concatSig(e,t,r){const n=s.fromSigned(t),i=s.fromSigned(r),o=s.bufferToInt(e),a=d(s.toUnsigned(n).toString("hex"),64),c=d(s.toUnsigned(i).toString("hex"),64),u=s.stripHexPrefix(s.intToHex(o));return s.addHexPrefix(a.concat(c,u)).toString("hex")},normalize(e){if(!e)return undefined;if("number"==typeof e){const t=s.toBuffer(e);e=s.bufferToHex(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return s.addHexPrefix(e.toLowerCase())},personalSign(e,t){const r=s.toBuffer(t.data),n=s.hashPersonalMessage(r),i=s.ecsign(n,e);return s.bufferToHex(this.concatSig(i.v,i.r,i.s))},recoverPersonalSignature(e){const t=h(e),r=s.publicToAddress(t);return s.bufferToHex(r)},extractPublicKey:e=>`0x${h(e).toString("hex")}`,typedSignatureHash(e){const t=u(e);return s.bufferToHex(t)},signTypedDataLegacy(e,t){const r=u(t.data),n=s.ecsign(r,e);return s.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignatureLegacy(e){const t=l(u(e.data),e.sig),r=s.publicToAddress(t);return s.bufferToHex(r)},encrypt(e,t,r){if("x25519-xsalsa20-poly1305"===r){if(void 0===t.data)throw new Error('Cannot detect secret message, message params should be of the form {data: "secret message"} ');const r=o.box.keyPair();let n;try{n=o.util.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const s=o.util.decodeUTF8(t.data),i=o.randomBytes(o.box.nonceLength),a=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:o.util.encodeBase64(i),ephemPublicKey:o.util.encodeBase64(r.publicKey),ciphertext:o.util.encodeBase64(a)}}throw new Error("Encryption type/version not supported")},encryptSafely(e,t,r){const{data:s}=t;if(!s)throw new Error("Cannot encrypt empty msg.data");if("object"==typeof s&&s.toJSON)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:s,padding:""},o=n.byteLength(JSON.stringify(i),"utf-8")%2048;let a=0;o>0&&(a=2048-o-16),i.padding="0".repeat(a);const c={data:JSON.stringify(i)};return this.encrypt(e,c,r)},decrypt(e,t){if("x25519-xsalsa20-poly1305"===e.version){const r=f(t),n=o.box.keyPair.fromSecretKey(r).secretKey,s=o.util.decodeBase64(e.nonce),i=o.util.decodeBase64(e.ciphertext),a=o.util.decodeBase64(e.ephemPublicKey),c=o.box.open(i,s,a,n);let u;try{u=o.util.encodeUTF8(c)}catch(e){throw new Error("Decryption failed.")}if(u)return u;throw new Error("Decryption failed.")}throw new Error("Encryption type/version not supported.")},decryptSafely(e,t){return JSON.parse(this.decrypt(e,t)).data},getEncryptionPublicKey(e){const t=f(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return o.util.encodeBase64(r)},signTypedMessage(e,t,r="V4"){switch(r){case"V1":return this.signTypedDataLegacy(e,t);case"V3":return this.signTypedData(e,t);default:return this.signTypedData_v4(e,t)}},recoverTypedMessage(e,t="V4"){switch(t){case"V1":return this.recoverTypedSignatureLegacy(e);case"V3":return this.recoverTypedSignature(e);default:return this.recoverTypedSignature_v4(e)}},signTypedData(e,t){const r=c.sign(t.data,!1),n=s.ecsign(r,e);return s.bufferToHex(this.concatSig(n.v,n.r,n.s))},signTypedData_v4(e,t){const r=c.sign(t.data),n=s.ecsign(r,e);return s.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignature(e){const t=l(c.sign(e.data,!1),e.sig),r=s.publicToAddress(t);return s.bufferToHex(r)},recoverTypedSignature_v4(e){const t=l(c.sign(e.data),e.sig),r=s.publicToAddress(t);return s.bufferToHex(r)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/index.js"}],[1211,{"./secp256k1-adapter":1212,assert:2331,"bn.js":2286,"create-hash":2565,"ethereum-cryptography/keccak":2750,"ethjs-util":1215,rlp:4091,"safe-buffer":4093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("ethereum-cryptography/keccak"),i=s.keccak224,o=s.keccak384,a=s.keccak256,c=s.keccak512,u=e("./secp256k1-adapter"),l=e("assert"),h=e("rlp"),d=e("bn.js"),f=e("create-hash"),p=e("safe-buffer").Buffer;Object.assign(r,e("ethjs-util")),r.MAX_INTEGER=new d("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new d("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=p.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=p.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=p.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=d,r.rlp=h,r.secp256k1=u,r.zeros=function(e){return p.allocUnsafe(e).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var s=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(s),s):e.slice(0,t):e.length<t?(e.copy(s,t-e.length),s):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!p.isBuffer(e))if(Array.isArray(e))e=p.from(e);else if("string"==typeof e)e=r.isHexString(e)?p.from(r.padToEven(r.stripHexPrefix(e)),"hex"):p.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null===e||e===undefined)e=p.allocUnsafe(0);else if(d.isBN(e))e=e.toArrayLike(p);else{if(!e.toArray)throw new Error("invalid type");e=p.from(e.toArray())}return e},r.bufferToInt=function(e){return new d(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(e){return new d(e).fromTwos(256)},r.toUnsigned=function(e){return p.from(e.toTwos(256).toArray())},r.keccak=function(e,t){switch(e=r.toBuffer(e),t||(t=256),t){case 224:return i(e);case 256:return a(e);case 384:return o(e);case 512:return c(e);default:throw new Error("Invald algorithm: keccak"+t)}},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),f("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=f("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(h.encode(e))},r.isValidPrivate=function(e){return u.privateKeyVerify(e)},r.isValidPublic=function(e,t){return 64===e.length?u.publicKeyVerify(p.concat([p.from([4]),e])):!!t&&u.publicKeyVerify(e)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=u.publicKeyConvert(e,!1).slice(1)),l(64===e.length),r.keccak(e).slice(-20)};var m=r.privateToPublic=function(e){return e=r.toBuffer(e),u.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=u.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(e,t){var r=u.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(p.concat([t,e]))},r.ecrecover=function(e,t,n,s){var i=p.concat([r.setLength(n,32),r.setLength(s,32)],64),o=t-27;if(0!==o&&1!==o)throw new Error("Invalid signature v value");var a=u.recover(e,i,o);return u.publicKeyConvert(a,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(p.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(m(e))},r.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",s=0;s<e.length;s++)parseInt(t[s],16)>=8?n+=e[s].toUpperCase():n+=e[s];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new d(t)).isZero()?null:p.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(e,t,r,n){var s=new d("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),i=new d("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new d(t),r=new d(r),!(t.isZero()||t.gt(i)||r.isZero()||r.gt(i))&&(!1!==n||1!==new d(r).cmp(s))))},r.baToJSON=function(e){if(p.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,s){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(t){n[t]="0x"+e[t].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return h.encode(e.raw)},t.forEach((function(t,n){function s(){return e.raw[n]}function i(s){"00"!==(s=r.toBuffer(s)).toString("hex")||t.allowZero||(s=p.allocUnsafe(0)),t.allowLess&&t.length?(s=r.stripZeros(s),l(t.length>=s.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===s.length||!t.length||l(t.length===s.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=s}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:s,set:i}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:i,get:s})})),s)if("string"==typeof s&&(s=p.from(r.stripHexPrefix(s),"hex")),p.isBuffer(s)&&(s=h.decode(s)),Array.isArray(s)){if(s.length>e._fields.length)throw new Error("wrong number of fields in data");s.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===s?"undefined":n(s)))throw new Error("invalid data");var i=Object.keys(s);t.forEach((function(t){-1!==i.indexOf(t.name)&&(e[t.name]=s[t.name]),-1!==i.indexOf(t.alias)&&(e[t.alias]=s[t.alias])}))}}}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/index.js"}],[1212,{"./secp256k1-lib/der":1213,"./secp256k1-lib/index":1214,buffer:2335,"ethereum-cryptography/secp256k1":2752},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("ethereum-cryptography/secp256k1");function s(){return e("./secp256k1-lib/index")}var i=e("./secp256k1-lib/der"),o=function(e){return 32===e.length&&n.privateKeyVerify(Uint8Array.from(e))};t.exports={privateKeyVerify:o,privateKeyExport:function(e,t){var r=s();if(32!==e.length)throw new RangeError("private key length is invalid");var n=r.privateKeyExport(e,t);return i.privateKeyExport(e,n,t)},privateKeyImport:function(e){if(null!==(e=i.privateKeyImport(e))&&32===e.length&&o(e))return e;throw new Error("couldn't import from DER format")},privateKeyNegate:function(e){return r.from(n.privateKeyNegate(Uint8Array.from(e)))},privateKeyModInverse:function(e){if(32!==e.length)throw new Error("private key length is invalid");var t=s();return r.from(t.privateKeyModInverse(Uint8Array.from(e)))},privateKeyTweakAdd:function(e,t){return r.from(n.privateKeyTweakAdd(Uint8Array.from(e),t))},privateKeyTweakMul:function(e,t){return r.from(n.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))},publicKeyCreate:function(e,t){return r.from(n.publicKeyCreate(Uint8Array.from(e),t))},publicKeyConvert:function(e,t){return r.from(n.publicKeyConvert(Uint8Array.from(e),t))},publicKeyVerify:function(e){return(33===e.length||65===e.length)&&n.publicKeyVerify(Uint8Array.from(e))},publicKeyTweakAdd:function(e,t,s){return r.from(n.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),s))},publicKeyTweakMul:function(e,t,s){return r.from(n.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),s))},publicKeyCombine:function(e,t){var s=[];return e.forEach((function(e){s.push(Uint8Array.from(e))})),r.from(n.publicKeyCombine(s,t))},signatureNormalize:function(e){return r.from(n.signatureNormalize(Uint8Array.from(e)))},signatureExport:function(e){return r.from(n.signatureExport(Uint8Array.from(e)))},signatureImport:function(e){return r.from(n.signatureImport(Uint8Array.from(e)))},signatureImportLax:function(e){if(0===e.length)throw new RangeError("signature length is invalid");var t=s(),r=i.signatureImportLax(e);if(null===r)throw new Error("couldn't parse DER signature");return t.signatureImport(r)},sign:function(e,t,s){if(null===s)throw new TypeError("options should be an Object");var i=void 0;if(s){if(i={},null===s.data)throw new TypeError("options.data should be a Buffer");if(s.data){if(32!==s.data.length)throw new RangeError("options.data length is invalid");i.data=new Uint8Array(s.data)}if(null===s.noncefn)throw new TypeError("options.noncefn should be a Function");s.noncefn&&(i.noncefn=function(e,t,n,i,o){var a=null!=n?r.from(n):null,c=null!=i?r.from(i):null,u=r.from("");return s.noncefn&&(u=s.noncefn(r.from(e),r.from(t),a,c,o)),Uint8Array.from(u)})}var o=n.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),i);return{signature:r.from(o.signature),recovery:o.recid}},verify:function(e,t,r){return n.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)},recover:function(e,t,s,i){return r.from(n.ecdsaRecover(Uint8Array.from(t),s,Uint8Array.from(e),i))},ecdh:function(e,t){return r.from(n.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))},ecdhUnsafe:function(e,t,n){if(33!==e.length&&65!==e.length)throw new RangeError("public key length is invalid");if(32!==t.length)throw new RangeError("private key length is invalid");var i=s();return r.from(i.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),n))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-adapter.js"}],[1213,{buffer:2335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=e.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=e.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(r,s,i){var o=e.from(i?t:n);return r.copy(o,i?8:9),s.copy(o,i?181:214),o},r.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||48!==e[r])return null;if(t<(r+=1)+1||!(128&e[r]))return null;var n=127&e[r];if(n<1||n>2)return null;if(t<(r+=1)+n)return null;var s=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return t<(r+=n)+s||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]?null:e.slice(r+2,r+2+e[r+1])},r.signatureImportLax=function(t){var r=e.alloc(32,0),n=e.alloc(32,0),s=t.length,i=0;if(48!==t[i++])return null;var o=t[i++];if(128&o&&(i+=o-128)>s)return null;if(2!==t[i++])return null;var a=t[i++];if(128&a){if(i+(o=a-128)>s)return null;for(;o>0&&0===t[i];i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+t[i]}if(a>s-i)return null;var c=i;if(i+=a,2!==t[i++])return null;var u=t[i++];if(128&u){if(i+(o=u-128)>s)return null;for(;o>0&&0===t[i];i+=1,o-=1);for(u=0;o>0;i+=1,o-=1)u=(u<<8)+t[i]}if(u>s-i)return null;var l=i;for(i+=u;a>0&&0===t[c];a-=1,c+=1);if(a>32)return null;var h=t.slice(c,c+a);for(h.copy(r,32-h.length);u>0&&0===t[l];u-=1,l+=1);if(u>32)return null;var d=t.slice(l,l+u);return d.copy(n,32-d.length),{r:r,s:n}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-lib/der.js"}],[1214,{"bn.js":2286,buffer:2335,elliptic:2604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=e("bn.js"),s=new(0,e("elliptic").ec)("secp256k1"),i=s.curve;r.privateKeyExport=function(e,t){var r=new n(e);if(r.ucmp(i.n)>=0)throw new Error("couldn't export to DER format");var a=s.g.mul(r);return o(a.getX(),a.getY(),t)},r.privateKeyModInverse=function(e){var r=new n(e);if(r.ucmp(i.n)>=0||r.isZero())throw new Error("private key range is invalid");return r.invm(i.n).toArrayLike(t,"be",32)},r.signatureImport=function(e){var r=new n(e.r);r.ucmp(i.n)>=0&&(r=new n(0));var s=new n(e.s);return s.ucmp(i.n)>=0&&(s=new n(0)),t.concat([r.toArrayLike(t,"be",32),s.toArrayLike(t,"be",32)])},r.ecdhUnsafe=function(e,t,r){var a=s.keyFromPublic(e),c=new n(t);if(c.ucmp(i.n)>=0||c.isZero())throw new Error("scalar was invalid (zero or overflow)");var u=a.pub.mul(c);return o(u.getX(),u.getY(),r)};var o=function(e,r,n){var s=void 0;return n?((s=t.alloc(33))[0]=r.isOdd()?3:2,e.toArrayLike(t,"be",32).copy(s,1)):((s=t.alloc(65))[0]=4,e.toArrayLike(t,"be",32).copy(s,1),r.toArrayLike(t,"be",32).copy(s,33)),s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/eth-sig-util/node_modules/ethereumjs-util/dist/secp256k1-lib/index.js"}],[1215,{buffer:2335,"is-hex-prefixed":3390,"strip-hex-prefix":4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),s=e("strip-hex-prefix");function i(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(i(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:s,padToEven:i,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+i(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},toUtf8:function(e){return new r(i(s(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],s=0;s<e.length;s++){var i=e[s][t];if(r&&!i)i="";else if("string"!=typeof i)throw new Error("invalid abi");n.push(i)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>eth-sig-util>ethereumjs-util>ethjs-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/ethjs-util/lib/index.js"}],[1216,{assert:2331,coinstring:2379,crypto:2574,"safe-buffer":4093,secp256k1:1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("assert"),s=e("safe-buffer").Buffer,i=e("crypto"),o=e("coinstring"),a=e("secp256k1"),c=s.from("Bitcoin seed","utf8"),u=2147483648,l={private:76066276,public:76067358};function h(e){this.versions=e||l,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}function d(e,t,r){var n=s.allocUnsafe(78);n.writeUInt32BE(t,0),n.writeUInt8(e.depth,4);var i=e.depth?e.parentFingerprint:0;return n.writeUInt32BE(i,5),n.writeUInt32BE(e.index,9),e.chainCode.copy(n,13),r.copy(n,45),n}function f(e){var t=i.createHash("sha256").update(e).digest();return i.createHash("rmd160").update(t).digest()}Object.defineProperty(h.prototype,"fingerprint",{get:function(){return this._fingerprint}}),Object.defineProperty(h.prototype,"identifier",{get:function(){return this._identifier}}),Object.defineProperty(h.prototype,"pubKeyHash",{get:function(){return this.identifier}}),Object.defineProperty(h.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){n.equal(e.length,32,"Private key must be 32 bytes."),n(!0===a.privateKeyVerify(e),"Invalid private key"),this._privateKey=e,this._publicKey=a.publicKeyCreate(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}}),Object.defineProperty(h.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){n(33===e.length||65===e.length,"Public key must be 33 or 65 bytes."),n(!0===a.publicKeyVerify(e),"Invalid public key"),this._publicKey=a.publicKeyConvert(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}}),Object.defineProperty(h.prototype,"privateExtendedKey",{get:function(){return this._privateKey?o.encode(d(this,this.versions.private,s.concat([s.alloc(1,0),this.privateKey]))):null}}),Object.defineProperty(h.prototype,"publicExtendedKey",{get:function(){return o.encode(d(this,this.versions.public,this.publicKey))}}),h.prototype.derive=function(e){if("m"===e||"M"===e||"m'"===e||"M'"===e)return this;var t=e.split("/"),r=this;return t.forEach((function(e,t){if(0!==t){var s=e.length>1&&"'"===e[e.length-1],i=parseInt(e,10);n(i<u,"Invalid index"),s&&(i+=u),r=r.deriveChild(i)}else n(e,"m","Invalid path")})),r},h.prototype.deriveChild=function(e){var t,r=e>=u,o=s.allocUnsafe(4);if(o.writeUInt32BE(e,0),r){n(this.privateKey,"Could not derive hardened child key");var c=this.privateKey,l=s.alloc(1,0);c=s.concat([l,c]),t=s.concat([c,o])}else t=s.concat([this.publicKey,o]);var d=i.createHmac("sha512",this.chainCode).update(t).digest(),f=d.slice(0,32),p=d.slice(32),m=new h(this.versions);if(this.privateKey)try{m.privateKey=a.privateKeyTweakAdd(this.privateKey,f)}catch(t){return this.derive(e+1)}else try{m.publicKey=a.publicKeyTweakAdd(this.publicKey,f,!0)}catch(t){return this.derive(e+1,r)}return m.chainCode=p,m.depth=this.depth+1,m.parentFingerprint=this.fingerprint,m.index=e,m},h.prototype.sign=function(e){return a.sign(e,this.privateKey).signature},h.prototype.verify=function(e,t){return a.verify(e,t,this.publicKey)},h.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}},h.fromMasterSeed=function(e,t){var r=i.createHmac("sha512",c).update(e).digest(),n=r.slice(0,32),s=r.slice(32),o=new h(t);return o.chainCode=s,o.privateKey=n,o},h.fromExtendedKey=function(e,t){var r=new h(t=t||l),s=o.decode(e),i=s.readUInt32BE(0);n(i===t.private||i===t.public,"Version mismatch: does not match private or public"),r.depth=s.readUInt8(4),r.parentFingerprint=s.readUInt32BE(5),r.index=s.readUInt32BE(9),r.chainCode=s.slice(13,45);var a=s.slice(45);return 0===a.readUInt8(0)?(n(i===t.private,"Version mismatch: version does not match private"),r.privateKey=a.slice(1)):(n(i===t.public,"Version mismatch: version does not match public"),r.publicKey=a),r},h.fromJSON=function(e){return h.fromExtendedKey(e.xpriv)},h.HARDENED_OFFSET=u,t.exports=h}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/hdkey/lib/hdkey.js"}],[1217,{"./lib":1221,"./lib/elliptic":1220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/elliptic.js"}],[1218,{"../../../../../is-buffer/index.js":3384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=Object.prototype.toString;r.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},r.isBoolean=function(e,r){if("[object Boolean]"!==t.call(e))throw TypeError(r)},r.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},r.isFunction=function(e,r){if("[object Function]"!==t.call(e))throw TypeError(r)},r.isNumber=function(e,r){if("[object Number]"!==t.call(e))throw TypeError(r)},r.isObject=function(e,r){if("[object Object]"!==t.call(e))throw TypeError(r)},r.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},r.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},r.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},r.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/assert.js"}],[1219,{bip66:2223,"safe-buffer":4093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,s=e("bip66"),i=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(e,t,r){var s=n.from(r?i:o);return e.copy(s,r?8:9),t.copy(s,r?181:214),s},r.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var s=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+s||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},r.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,i=0;r>1&&0===t[i]&&!(128&t[i+1]);--r,++i);for(var o=n.concat([n.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return s.encode(t.slice(i),o.slice(c))},r.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var i=s.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(r,32-i.s.length),{r:t,s:r}},r.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),s=e.length,i=0;if(48===e[i++]){var o=e[i++];if(!(128&o&&(i+=o-128)>s)&&2===e[i++]){var a=e[i++];if(128&a){if(i+(o=a-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+e[i]}if(!(a>s-i)){var c=i;if(i+=a,2===e[i++]){var u=e[i++];if(128&u){if(i+(o=u-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(u=0;o>0;i+=1,o-=1)u=(u<<8)+e[i]}if(!(u>s-i)){var l=i;for(i+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var h=e.slice(c,c+a);for(h.copy(t,32-h.length);u>0&&0===e[l];u-=1,l+=1);if(!(u>32)){var d=e.slice(l,l+u);return d.copy(r,32-d.length),{r:t,s:r}}}}}}}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/der.js"}],[122,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[1220,{"../messages.json":1222,"bn.js":2286,"create-hash":2565,elliptic:2604,"safe-buffer":4093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,s=e("create-hash"),i=e("bn.js"),o=e("elliptic").ec,a=e("../messages.json"),c=new o("secp256k1"),u=c.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new i(t);if(r.cmp(u.p)>=0)return null;var n=(r=r.toRed(u.red)).redSqr().redIMul(r).redIAdd(u.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),c.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new i(t),s=new i(r);if(n.cmp(u.p)>=0||s.cmp(u.p)>=0)return null;if(n=n.toRed(u.red),s=s.toRed(u.red),(6===e||7===e)&&s.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return s.redSqr().redISub(o.redIAdd(u.b)).isZero()?c.keyPair({pub:{x:n,y:s}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new i(e);return t.cmp(u.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new i(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new i(e);return t.isZero()?n.alloc(32):u.n.sub(t).umod(u.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new i(e);if(t.cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(u.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new i(t);if(r.cmp(u.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new i(e)),r.cmp(u.n)>=0&&r.isub(u.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new i(t);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new i(e)),r.cmp(u.n)&&(r=r.umod(u.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new i(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(u.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=u.g.mul(t).add(s.pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(s.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),s=0;s<e.length;++s)if(r[s]=l(e[s]),null===r[s])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0].pub,o=1;o<r.length;++o)i=i.add(r[o].pub);if(i.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(i.encode(!0,t))},r.signatureNormalize=function(e){var t=new i(e.slice(0,32)),r=new i(e.slice(32,64));if(t.cmp(u.n)>=0||r.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var s=n.from(e);return 1===r.cmp(c.nh)&&u.n.sub(r).toArrayLike(n,"be",32).copy(s,32),s},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new i(t).cmp(u.n)>=0||new i(r).cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new i(e.r);t.cmp(u.n)>=0&&(t=new i(0));var r=new i(e.s);return r.cmp(u.n)>=0&&(r=new i(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,s){if("function"==typeof r){var o=r;r=function(r){var c=o(e,t,null,s,r);if(!n.isBuffer(c)||32!==c.length)throw new Error(a.ECDSA_SIGN_FAIL);return new i(c)}}var l=new i(t);if(l.cmp(u.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var h=c.sign(e,t,{canonical:!0,k:r,pers:s});return{signature:n.concat([h.r.toArrayLike(n,"be",32),h.s.toArrayLike(n,"be",32)]),recovery:h.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},s=new i(n.r),o=new i(n.s);if(s.cmp(u.n)>=0||o.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(c.nh)||s.isZero()||o.isZero())return!1;var h=l(r);if(null===h)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return c.verify(e,n,{x:h.pub.x,y:h.pub.y})},r.recover=function(e,t,r,s){var o={r:t.slice(0,32),s:t.slice(32,64)},l=new i(o.r),h=new i(o.s);if(l.cmp(u.n)>=0||h.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||h.isZero())throw new Error;var d=c.recoverPubKey(e,o,r);return n.from(d.encode(!0,s))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return s("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var o=new i(t);if(o.cmp(u.n)>=0||o.isZero())throw new Error(a.ECDH_FAIL);return n.from(s.pub.mul(o).encode(!0,r))}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/elliptic/index.js"}],[1221,{"./assert":1218,"./der":1219,"./messages.json":1222},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./assert"),s=e("./der"),i=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,i.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return s.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),(t=s.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(i.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),s=o(s,!0),e.publicKeyTweakAdd(t,r,s)},publicKeyTweakMul:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),s=o(s,!0),e.publicKeyTweakMul(t,r,s)},publicKeyCombine:function(t,r){n.isArray(t,i.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,i.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var s=0;s<t.length;++s)n.isBuffer(t[s],i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[s],33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return s.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=s.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=s.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,s){n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return s!==undefined&&(n.isObject(s,i.OPTIONS_TYPE_INVALID),s.data!==undefined&&(n.isBuffer(s.data,i.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(s.data,32,i.OPTIONS_DATA_LENGTH_INVALID),o=s.data),s.noncefn!==undefined&&(n.isFunction(s.noncefn,i.OPTIONS_NONCEFN_TYPE_INVALID),a=s.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,s){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(s,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(s,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,s)},recover:function(t,r,s,a){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(s,i.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(s,-1,4,i.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,s,a)},ecdh:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),s=o(s,!0),e.ecdhUnsafe(t,r,s)}}}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/index.js"}],[1222,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"@metamask/eth-ledger-bridge-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/secp256k1/lib/messages.json"}],[1223,{"./utils":1228,buffer:2335,tweetnacl:4218,"tweetnacl-util":4217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=i(e("tweetnacl")),a=i(e("tweetnacl-util")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const s=a.decodeUTF8(t),i=o.randomBytes(o.box.nonceLength),c=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(i),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=h(t),n=o.box.keyPair.fromSecretKey(r).secretKey,s=a.decodeBase64(e.nonce),i=a.decodeBase64(e.ciphertext),c=a.decodeBase64(e.ephemPublicKey),u=o.box.open(i,s,c,n);try{if(!u)throw new Error;const e=a.encodeUTF8(u);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}function h(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:r,padding:""},i=t.byteLength(JSON.stringify(s),"utf-8")%2048;let o=0;return i>0&&(o=2048-i-16),s.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(s),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=h(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1224,{"./utils":1228,"@ethereumjs/util":409,"bn.js":2286,buffer:2335,"ethjs-util":1236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.rawEncode=r.parseNumber=r.solidityPack=void 0;const s=e("@ethereumjs/util"),i=n(e("bn.js")),o=e("ethjs-util"),a=e("./utils");function c(e){return e.endsWith("]")}function u(e){const t=e.match(/(.*)\[(.*?)\]$/u);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function l(e){const t=/^\D+(\d+)$/u.exec(e);if(null===t)throw new Error(`Invalid parseTypeN input "${e}".`);return parseInt(t[1],10)}function h(e){const t=typeof e;if("string"===t)return(0,s.isHexPrefixed)(e)?new i.default((0,o.stripHexPrefix)(e),16):new i.default(e,10);if("number"===t)return new i.default(e);if(e&&Object.prototype.hasOwnProperty.call(e,"toArray")||i.default.isBN(e))return e;throw new Error("Argument is not a number")}function d(e,r,n){if(c(e)){const n=e.replace(/\[.*?\]/u,"");if(!c(n)){const t=u(e);if("dynamic"!==t&&0!==t&&null!==t&&r.length>t)throw new Error(`Elements exceed array size: ${t}`)}const s=r.map((e=>d(n,e,256)));return t.concat(s)}if("bytes"===e)return r;if("string"===e)return t.from(r,"utf8");if("bool"===e){n=n||8;const e=Array(n/4).join("0");return t.from(r?`${e}1`:`${e}0`,"hex")}if("address"===e){let e=20;return n&&(e=n/8),(0,s.setLengthLeft)((0,s.toBuffer)(r),e)}if(e.startsWith("bytes")){const t=l(e);if(t<1||t>32)throw new Error(`Invalid bytes<N> width: ${t}`);return"number"==typeof r&&(r=(0,a.normalize)(r)),(0,s.setLengthRight)((0,s.toBuffer)(r),t)}if(e.startsWith("uint")){const s=l(e);if(s%8||s<8||s>256)throw new Error(`Invalid uint<N> width: ${s}`);const i=h(r);if(i.bitLength()>s)throw new Error(`Supplied uint exceeds width: ${s} vs ${i.bitLength()}`);return n=n||s,i.toArrayLike(t,"be",n/8)}if(e.startsWith("int")){const s=l(e);if(s%8||s<8||s>256)throw new Error(`Invalid int<N> width: ${s}`);const i=h(r);if(i.bitLength()>s)throw new Error(`Supplied int exceeds width: ${s} vs ${i.bitLength()}`);return n=n||s,i.toTwos(s).toArrayLike(t,"be",n/8)}throw new Error(`Unsupported or invalid type: ${JSON.stringify(e)}`)}function f(e){return e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256${e.slice(4)}`:"uint"===e?"uint256":e.startsWith("fixed[")?`fixed128x128${e.slice(5)}`:"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?`ufixed128x128${e.slice(6)}`:"ufixed"===e?"ufixed128x128":e}function p(e,r){if("address"===e)return p("uint160",h(r));if("bool"===e)return p("uint8",r?1:0);if("string"===e)return p("bytes",t.from(r,"utf8"));if(c(e)){if(void 0===r.length)throw new Error("Not an array?");const n=u(e);if("dynamic"!==n&&0!==n&&null!==n&&r.length>n)throw new Error(`Elements exceed array size: ${n}`);const s=[];e=e.slice(0,e.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r));for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&s.push(p(e,r[t]));if("dynamic"===n){const e=p("uint256",r.length);s.unshift(e)}return t.concat(s)}if("bytes"===e){r=t.from(r);let e=t.concat([p("uint256",r.length),r]);return r.length%32!=0&&(e=t.concat([e,(0,s.zeros)(32-r.length%32)])),e}if(e.startsWith("bytes")){const t=l(e);if(t<1||t>32)throw new Error(`Invalid bytes<N> width: ${t}`);const n="number"==typeof r?(0,a.normalize)(r):r;return(0,s.setLengthRight)((0,s.toBuffer)(n),32)}if(e.startsWith("uint")){const n=l(e);if(n%8||n<8||n>256)throw new Error(`Invalid uint<N> width: ${n}`);const s=h(r);if(s.bitLength()>n)throw new Error(`Supplied uint exceeds width: ${n} vs ${s.bitLength()}`);if(s.isNeg())throw new Error("Supplied uint is negative");return s.toArrayLike(t,"be",32)}if(e.startsWith("int")){const n=l(e);if(n%8||n<8||n>256)throw new Error(`Invalid int<N> width: ${n}`);const s=h(r);if(s.bitLength()>n)throw new Error(`Supplied int exceeds width: ${n} vs ${s.bitLength()}`);return s.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){const t=g(e),n=h(r);if(n.isNeg())throw new Error("Supplied ufixed is negative");return p("uint256",n.mul(new i.default(2).pow(new i.default(t[1]))))}if(e.startsWith("fixed")){const t=g(e);return p("int256",h(r).mul(new i.default(2).pow(new i.default(t[1]))))}throw new Error(`Unsupported or invalid type: ${JSON.stringify(e)}`)}function m(e){return"string"===e||"bytes"===e||"dynamic"===u(e)}function g(e){const t=/^\D+(\d+)x(\d+)$/u.exec(e);if(null===t||t.length<1)throw new Error(`Invalid parseTypeNxM input "${e}".`);return[parseInt(t[1],10),parseInt(t[2],10)]}r.solidityPack=function(e,r){if(e.length!==r.length)throw new Error("Number of types are not matching the values");const n=[];for(let t=0;t<e.length;t++){const s=f(e[t]),i=r[t];n.push(d(s,i,null))}return t.concat(n)},r.parseNumber=h,r.rawEncode=function(e,r){const n=[],s=[];let i=0;e.forEach((e=>{if(c(e)){const t=u(e);i+="dynamic"!==t&&null!==t?32*t:32}else i+=32}));for(let t=0;t<e.length;t++){const o=f(e[t]),a=p(o,r[t]);m(o)?(n.push(p("uint256",i)),s.push(a),i+=a.length):n.push(a)}return t.concat(n.concat(s))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/ethereumjs-abi-utils.js"}],[1225,{"./encryption":1223,"./personal-sign":1226,"./sign-typed-data":1227,"./utils":1228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,s(e("./personal-sign"),r),s(e("./sign-typed-data"),r),s(e("./encryption"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/index.js"}],[1226,{"./utils":1228,"@ethereumjs/util":409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),s=e("./utils");function i(e,t){const r=(0,n.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,s.legacyToBuffer)(t),i=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(i,e);return(0,s.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1227,{"./ethereumjs-abi-utils":1224,"./utils":1228,"@ethereumjs/util":409,buffer:2335,"ethereum-cryptography/keccak":1234,"ethjs-util":1236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),s=e("ethereum-cryptography/keccak"),i=e("ethjs-util"),o=e("./ethereumjs-abi-utils"),a=e("./utils");var c;function u(e,t){if(!Object.keys(c).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function l(e,r,d,f,p){if(u(p,[c.V3,c.V4]),e[d]!==undefined)return["bytes32",p===c.V4&&null==f?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,s.keccak256)(h(d,f,e,p)))];if(f===undefined)throw new Error(`missing value for field ${r} of type ${d}`);if("bytes"===d){if("number"==typeof f)f=(0,a.numberToBuffer)(f);else if((0,i.isHexString)(f)){const e=f.length%2?"0":"";f=t.from(e+f.slice(2),"hex")}else f=t.from(f,"utf8");return["bytes32",(0,n.arrToBufArr)((0,s.keccak256)(f))]}if("string"===d)return f="number"==typeof f?(0,a.numberToBuffer)(f):t.from(null!=f?f:"","utf8"),["bytes32",(0,n.arrToBufArr)((0,s.keccak256)(f))];if(d.endsWith("]")){if(p===c.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const t=d.slice(0,d.lastIndexOf("[")),i=f.map((n=>l(e,r,t,n,p)));return["bytes32",(0,n.arrToBufArr)((0,s.keccak256)((0,o.rawEncode)(i.map((([e])=>e)),i.map((([,e])=>e)))))]}return[d,f]}function h(e,t,r,n){u(n,[c.V3,c.V4]);const s=["bytes32"],i=[m(e,r)];for(const o of r[e]){if(n===c.V3&&t[o.name]===undefined)continue;const[e,a]=l(r,o.name,o.type,t[o.name],n);s.push(e),i.push(a)}return(0,o.rawEncode)(s,i)}function d(e,t){let r="";const n=f(e,t);n.delete(e);const s=[e,...Array.from(n).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function f(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])f(n.type,t,r);return r}function p(e,t,r,i){u(i,[c.V3,c.V4]);const o=h(e,t,r,i),a=(0,s.keccak256)(o);return(0,n.arrToBufArr)(a)}function m(e,r){const i=t.from(d(e,r),"utf-8");return(0,n.arrToBufArr)((0,s.keccak256)(i))}function g(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function y(e,t){u(t,[c.V3,c.V4]);const r=g(e),{domain:n}=r;return p("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function w(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((function(e){return"bytes"!==e.type?e.value:(0,a.legacyToBuffer)(e.value)})),i=e.map((function(e){return e.type})),c=e.map((function(e){if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,s.keccak256)((0,o.solidityPack)(["bytes32","bytes32"],[(0,s.keccak256)((0,o.solidityPack)(new Array(e.length).fill("string"),c)),(0,s.keccak256)((0,o.solidityPack)(i,r))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(c=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:h,encodeType:d,findTypeDependencies:f,hashStruct:p,hashType:m,sanitizeData:g,eip712Hash:function(e,r){u(r,[c.V3,c.V4]);const i=g(e),o=[t.from("1901","hex")];return o.push(y(e,r)),"EIP712Domain"!==i.primaryType&&o.push(p(i.primaryType,i.message,i.types,r)),(0,n.arrToBufArr)((0,s.keccak256)(t.concat(o)))},eip712DomainHash:y},r.typedSignatureHash=function(e){const t=w(e);return(0,n.bufferToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:s}){if(u(s),(0,a.isNullish)(t))throw new Error("Missing data parameter");if((0,a.isNullish)(e))throw new Error("Missing private key parameter");const i=s===c.V1?w(t):r.TypedDataUtils.eip712Hash(t,s),o=(0,n.ecsign)(i,e);return(0,a.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:s}){if(u(s),(0,a.isNullish)(e))throw new Error("Missing data parameter");if((0,a.isNullish)(t))throw new Error("Missing signature parameter");const i=s===c.V1?w(e):r.TypedDataUtils.eip712Hash(e,s),o=(0,a.recoverPublicKey)(i,t),l=(0,n.publicToAddress)(o);return(0,n.bufferToHex)(l)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1228,{"@ethereumjs/util":409,buffer:2335,"ethjs-util":1236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.numberToBuffer=r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),s=e("ethjs-util");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}r.padWithZeroes=i,r.isNullish=function(e){return null===e||e===undefined},r.legacyToBuffer=function(e){return"string"!=typeof e||(0,s.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=i((0,n.toUnsigned)(o).toString("hex"),64),l=i((0,n.toUnsigned)(a).toString("hex"),64),h=(0,s.stripHexPrefix)((0,s.intToHex)(c));return(0,n.addHexPrefix)(u.concat(l,h))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(!e)return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,n.toBuffer)(e);e=(0,n.bufferToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,n.addHexPrefix)(e.toLowerCase())},r.numberToBuffer=function(e){const r=e.toString(16),n=r.length%2?"0":"";return t.from(n+r,"hex")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1229,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=s,r.bytes=i,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:s,bytes:i,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/_assert.js"}],[123,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[1230,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}r.fromBig=i,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);function a(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:0|s}}r.add=a;const c={fromBig:i,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};r.default=c}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/_u64.js"}],[1231,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/crypto.js"}],[1232,{"./_assert.js":1229,"./_u64.js":1230,"./utils.js":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),s=e("./_u64.js"),i=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)t=(t<<l^(t>>d)*p)%f,t&h&&(s^=l<<(l<<BigInt(e))-l);c.push(s)}const[m,g]=s.default.split(c,!0),y=(e,t,r)=>r>32?s.default.rotlBH(e,t,r):s.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?s.default.rotlBL(e,t,r):s.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,s=(t+2)%10,i=r[s],o=r[s+1],a=y(i,o,1)^r[n],c=w(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],s=e[3];for(let r=0;r<24;r++){const n=a[r],i=y(t,s,n),c=w(t,s,n),u=o[r];t=e[u],s=e[u+1],e[u]=i,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends i.Hash{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return e||(e=new v(t,r,n,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,i.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const k=(e,t,r)=>(0,i.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=k(31,168,16),r.shake256=k(31,136,32)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/sha3.js"}],[1233,{"@noble/hashes/crypto":1231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t};function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let s=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-s;e>=0&&e<t||(await(0,r.nextTick)(),s+=e)}},r.utf8ToBytes=i,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-sig-util/node_modules/@noble/hashes/utils.js"}],[1234,{"./utils":1235,"@noble/hashes/sha3":1232},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),s=e("./utils");r.keccak224=(0,s.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,s.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,s.wrapHash)(n.keccak_384),r.keccak512=(0,s.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-sig-util/node_modules/ethereum-cryptography/keccak.js"}],[1235,{"@noble/hashes/_assert":1229,"@noble/hashes/utils":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const s=n(e("@noble/hashes/_assert")),i=e("@noble/hashes/utils"),o=s.default.bool;r.assertBool=o;const a=s.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(s.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethereum-cryptography",file:"node_modules/@metamask/eth-sig-util/node_modules/ethereum-cryptography/utils.js"}],[1236,{buffer:2335,"is-hex-prefixed":3390,"strip-hex-prefix":4186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-hex-prefixed"),s=e("strip-hex-prefix");function i(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=o(e);return new r(i(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return r.byteLength(e,"utf8")},isHexPrefixed:n,stripHexPrefix:s,padToEven:i,intToHex:o,fromAscii:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(e){return"0x"+i(new r(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},toUtf8:function(e){return new r(i(s(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],s=0;s<e.length;s++){var i=e[s][t];if(r&&!i)i="";else if("string"!=typeof i)throw new Error("invalid abi");n.push(i)}return n},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util>ethjs-util",file:"node_modules/@metamask/eth-sig-util/node_modules/ethjs-util/lib/index.js"}],[1237,{"@ethereumjs/util":409,"@metamask/eth-sig-util":1225,buffer:2335,"ethereum-cryptography/keccak":1238,events:2336,randombytes:3856},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{EventEmitter:n}=e("events"),{isValidPrivate:s,stripHexPrefix:i,privateToPublic:o,bufferToHex:a,publicToAddress:c,ecsign:u,arrToBufArr:l}=e("@ethereumjs/util"),h=e("randombytes"),{keccak256:d}=e("ethereum-cryptography/keccak"),f="Simple Key Pair",{concatSig:p,decrypt:m,getEncryptionPublicKey:g,normalize:y,personalSign:w,signTypedData:b,SignTypedDataVersion:v}=e("@metamask/eth-sig-util");function _(){const e=h(32);if(!s(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");return e}class k extends n{constructor(e){super(),this.type=f,this._wallets=[],this.deserialize(e)}async serialize(){return this._wallets.map((({privateKey:e})=>e.toString("hex")))}async deserialize(e=[]){this._wallets=e.map((e=>{const t=i(e),n=r.from(t,"hex");return{privateKey:n,publicKey:o(n)}}))}async addAccounts(e=1){const t=[];for(let r=0;r<e;r++){const e=_(),r=o(e);t.push({privateKey:e,publicKey:r})}this._wallets=this._wallets.concat(t);return t.map((({publicKey:e})=>a(c(e))))}async getAccounts(){return this._wallets.map((({publicKey:e})=>a(c(e))))}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),s=t.sign(n);return s===undefined?t:s}async signMessage(e,t,n={}){const s=i(t),o=this._getPrivateKeyFor(e,n),a=u(r.from(s,"hex"),o);return p(a.v,a.r,a.s)}async signPersonalMessage(e,t,n={}){const s=this._getPrivateKeyFor(e,n),i=r.from(s,"hex");return w({privateKey:i,data:t})}async decryptMessage(e,t){const r=this._getWalletForAccount(e),{privateKey:n}=r;return m({privateKey:n,encryptedData:t})}async signTypedData(e,t,r={version:v.V1}){const n=Object.keys(v).includes(r.version)?r.version:v.V1,s=this._getPrivateKeyFor(e,r);return b({privateKey:s,data:t,version:n})}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return g(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return y(c(r.publicKey).toString("hex"))}async exportAccount(e,t={}){return this._getWalletForAccount(e,t).privateKey.toString("hex")}removeAccount(e){if(!this._wallets.map((({publicKey:e})=>a(c(e)).toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:t})=>a(c(t)).toLowerCase()!==e.toLowerCase()))}_getWalletForAccount(e,t={}){const n=y(e);let s=this._wallets.find((({publicKey:e})=>a(c(e))===n));if(!s)throw new Error("Simple Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=s,n=r.from(t.withAppKeyOrigin,"utf8"),i=r.concat([e,n]),a=l(d(i,256));s={privateKey:a,publicKey:o(a)}}return s}}k.type=f,t.exports=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/index.js"}],[1238,{"./utils":1244,"@noble/hashes/sha3":1242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.keccak512=r.keccak384=r.keccak256=r.keccak224=void 0;const n=e("@noble/hashes/sha3"),s=e("./utils");r.keccak224=(0,s.wrapHash)(n.keccak_224),r.keccak256=(()=>{const e=(0,s.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),r.keccak384=(0,s.wrapHash)(n.keccak_384),r.keccak512=(0,s.wrapHash)(n.keccak_512)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/keccak.js"}],[1239,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=s,r.bytes=i,r.hash=o,r.exists=a,r.output=c;const u={number:n,bool:s,bytes:i,hash:o,exists:a,output:c};r.default=u}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_assert.js"}],[124,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[1240,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[r[s],n[s]]=[o,a]}return[r,n]}r.fromBig=i,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);function a(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:0|s}}r.add=a;const c={fromBig:i,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};r.default=c}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_u64.js"}],[1241,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:undefined,web:"object"==typeof self&&"crypto"in self?self.crypto:undefined}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/cryptoBrowser.js"}],[1242,{"./_assert.js":1239,"./_u64.js":1240,"./utils.js":1243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),s=e("./_u64.js"),i=e("./utils.js"),[o,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)t=(t<<l^(t>>d)*p)%f,t&h&&(s^=l<<(l<<BigInt(e))-l);c.push(s)}const[m,g]=s.default.split(c,!0),y=(e,t,r)=>r>32?s.default.rotlBH(e,t,r):s.default.rotlSH(e,t,r),w=(e,t,r)=>r>32?s.default.rotlBL(e,t,r):s.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,s=(t+2)%10,i=r[s],o=r[s+1],a=y(i,o,1)^r[n],c=w(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],s=e[3];for(let r=0;r<24;r++){const n=a[r],i=y(t,s,n),c=w(t,s,n),u=o[r];t=e[u],s=e[u+1],e[u]=i,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=b;class v extends i.Hash{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return e||(e=new v(t,r,n,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=v;const _=(e,t,r)=>(0,i.wrapConstructor)((()=>new v(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const k=(e,t,r)=>(0,i.wrapConstructorWithOpts)(((n={})=>new v(t,e,n.dkLen===undefined?r:n.dkLen,!0)));r.shake128=k(31,168,16),r.shake256=k(31,136,32)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/sha3.js"}],[1243,{"@noble/hashes/crypto":1241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,s=e.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t};function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let s=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-s;e>=0&&e<t||(await(0,r.nextTick)(),s+=e)}},r.utf8ToBytes=i,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(t!==undefined&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/node_modules/@noble/hashes/utils.js"}],[1244,{"@noble/hashes/_assert":1239,"@noble/hashes/utils":1243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=r.wrapHash=r.equalsBytes=r.hexToBytes=r.bytesToUtf8=r.utf8ToBytes=r.createView=r.concatBytes=r.toHex=r.bytesToHex=r.assertBytes=r.assertBool=void 0;const s=n(e("@noble/hashes/_assert")),i=e("@noble/hashes/utils"),o=s.default.bool;r.assertBool=o;const a=s.default.bytes;r.assertBytes=a;var c=e("@noble/hashes/utils");Object.defineProperty(r,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(r,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(r,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),r.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},r.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},r.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},r.wrapHash=function(e){return t=>(s.default.bytes(t),e(t))},r.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:undefined,r=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):undefined,web:e}})()}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring>ethereum-cryptography",file:"node_modules/@metamask/eth-simple-keyring/node_modules/ethereum-cryptography/utils.js"}],[125,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[126,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[1263,{"@ethereumjs/tx":385,"@ethereumjs/util":409,"@trezor/connect-plugin-ethereum":1864,"@trezor/connect-web":1867,buffer:2335,events:2336,hdkey:1264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{EventEmitter:n}=e("events"),s=e("@ethereumjs/util"),i=e("hdkey"),o=e("@trezor/connect-web").default,{TransactionFactory:a}=e("@ethereumjs/tx"),{transformTypedData:c}=e("@trezor/connect-plugin-ethereum"),u="m/44'/60'/0'/0",l={[u]:!0,"m/44'/1'/0'/0":!0},h="Trezor Hardware",d=1e3,f={email:"support@metamask.io",appUrl:"https://metamask.io"};function p(e){return new Promise((t=>setTimeout(t,e)))}function m(e){return"function"==typeof e.getChainId}class g extends n{constructor(e={}){super(),this.type=h,this.accounts=[],this.hdk=new i,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},this.deserialize(e),this.trezorConnectInitiated=!1,o.on("DEVICE_EVENT",(e=>{e&&e.payload&&e.payload.features&&(this.model=e.payload.features.model)})),this.trezorConnectInitiated||(o.init({manifest:f,lazyLoad:!0}),this.trezorConnectInitiated=!0)}getModel(){return this.model}dispose(){o.dispose()}serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}deserialize(e={}){return this.hdPath=e.hdPath||u,this.accounts=e.accounts||[],this.page=e.page||0,this.perPage=e.perPage||5,Promise.resolve()}isUnlocked(){return Boolean(this.hdk&&this.hdk.publicKey)}unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,t)=>{o.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{n.success?(this.hdk.publicKey=r.from(n.payload.publicKey,"hex"),this.hdk.chainCode=r.from(n.payload.chainCode,"hex"),e("just unlocked")):t(new Error(n.payload&&n.payload.error||"Unknown error"))})).catch((e=>{t(new Error(e&&e.toString()||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(e,10)}addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const n=this.unlockedAccount,s=n+e;for(let e=n;e<s;e++){const t=this._addressFromIndex("m",e);this.accounts.includes(t)||this.accounts.push(t),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}__getPage(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,n=r+this.perPage,i=[];for(let e=r;e<n;e++){const t=this._addressFromIndex("m",e);i.push({address:t,balance:null,index:e}),this.paths[s.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))}getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}signTransaction(e,t){return m(t)?this._signTransaction(e,t.getChainId(),t,(e=>(t.v=r.from(e.v,"hex"),t.r=r.from(e.r,"hex"),t.s=r.from(e.s,"hex"),t))):this._signTransaction(e,Number(t.common.chainId()),t,(e=>{const r=t.toJSON();return r.type=t.type,r.v=s.addHexPrefix(e.v),r.r=s.addHexPrefix(e.r),r.s=s.addHexPrefix(e.s),a.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async _signTransaction(e,t,r,n){let i;i=m(r)?{to:this._normalize(r.to),value:this._normalize(r.value),data:this._normalize(r.data),chainId:t,nonce:this._normalize(r.nonce),gasLimit:this._normalize(r.gasLimit),gasPrice:this._normalize(r.gasPrice)}:{...r.toJSON(),chainId:t,to:this._normalize(r.to)};try{const t=await this.unlock();await p("just unlocked"===t?d:0);const r=await o.ethereumSignTransaction({path:this._pathFromAddress(e),transaction:i});if(r.success){const t=n(r.payload),i=s.toChecksumAddress(s.addHexPrefix(t.getSenderAddress().toString("hex")));if(i!==s.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error(r.payload&&r.payload.error||"Unknown error")}catch(e){throw new Error(e&&e.toString()||"Unknown error")}}signMessage(e,t){return this.signPersonalMessage(e,t)}signPersonalMessage(e,t){return new Promise(((r,n)=>{this.unlock().then((i=>{setTimeout((i=>{o.ethereumSignMessage({path:this._pathFromAddress(e),message:s.stripHexPrefix(t),hex:!0}).then((t=>{if(t.success){t.payload.address!==s.toChecksumAddress(e)&&n(new Error("signature doesnt match the right address"));const i=`0x${t.payload.signature}`;r(i)}else n(new Error(t.payload&&t.payload.error||"Unknown error"))})).catch((e=>{n(new Error(e&&e.toString()||"Unknown error"))}))}),"just unlocked"===i?d:0)})).catch((e=>{n(new Error(e&&e.toString()||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){const n=c(t,"V4"===r),{types:{EIP712Domain:i=[],...a}={},message:u={},domain:l={},primaryType:h,domain_separator_hash:f,message_hash:m}=n,g=await this.unlock();await p("just unlocked"===g?d:0);const y=await o.ethereumSignTypedData({path:this._pathFromAddress(e),data:{types:{EIP712Domain:i,...a},message:u,domain:l,primaryType:h},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:m});if(y.success){if(s.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error(y.payload&&y.payload.error||"Unknown error")}exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new i,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!l[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new i,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}_normalize(e){return s.bufferToHex(e).toString()}_addressFromIndex(e,t){const r=this.hdk.derive(`${e}/${t}`),n=s.publicToAddress(r.publicKey,!0).toString("hex");return s.toChecksumAddress(`0x${n}`)}_pathFromAddress(e){const t=s.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===this._addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`}}g.type=h,t.exports=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/index.js"}],[1264,{assert:2331,coinstring:2379,crypto:2574,"safe-buffer":4093,secp256k1:1265},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("assert"),s=e("safe-buffer").Buffer,i=e("crypto"),o=e("coinstring"),a=e("secp256k1"),c=s.from("Bitcoin seed","utf8"),u=2147483648,l={private:76066276,public:76067358};function h(e){this.versions=e||l,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}function d(e,t,r){var n=s.allocUnsafe(78);n.writeUInt32BE(t,0),n.writeUInt8(e.depth,4);var i=e.depth?e.parentFingerprint:0;return n.writeUInt32BE(i,5),n.writeUInt32BE(e.index,9),e.chainCode.copy(n,13),r.copy(n,45),n}function f(e){var t=i.createHash("sha256").update(e).digest();return i.createHash("rmd160").update(t).digest()}Object.defineProperty(h.prototype,"fingerprint",{get:function(){return this._fingerprint}}),Object.defineProperty(h.prototype,"identifier",{get:function(){return this._identifier}}),Object.defineProperty(h.prototype,"pubKeyHash",{get:function(){return this.identifier}}),Object.defineProperty(h.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){n.equal(e.length,32,"Private key must be 32 bytes."),n(!0===a.privateKeyVerify(e),"Invalid private key"),this._privateKey=e,this._publicKey=a.publicKeyCreate(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}}),Object.defineProperty(h.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){n(33===e.length||65===e.length,"Public key must be 33 or 65 bytes."),n(!0===a.publicKeyVerify(e),"Invalid public key"),this._publicKey=a.publicKeyConvert(e,!0),this._identifier=f(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}}),Object.defineProperty(h.prototype,"privateExtendedKey",{get:function(){return this._privateKey?o.encode(d(this,this.versions.private,s.concat([s.alloc(1,0),this.privateKey]))):null}}),Object.defineProperty(h.prototype,"publicExtendedKey",{get:function(){return o.encode(d(this,this.versions.public,this.publicKey))}}),h.prototype.derive=function(e){if("m"===e||"M"===e||"m'"===e||"M'"===e)return this;var t=e.split("/"),r=this;return t.forEach((function(e,t){if(0!==t){var s=e.length>1&&"'"===e[e.length-1],i=parseInt(e,10);n(i<u,"Invalid index"),s&&(i+=u),r=r.deriveChild(i)}else n(e,"m","Invalid path")})),r},h.prototype.deriveChild=function(e){var t,r=e>=u,o=s.allocUnsafe(4);if(o.writeUInt32BE(e,0),r){n(this.privateKey,"Could not derive hardened child key");var c=this.privateKey,l=s.alloc(1,0);c=s.concat([l,c]),t=s.concat([c,o])}else t=s.concat([this.publicKey,o]);var d=i.createHmac("sha512",this.chainCode).update(t).digest(),f=d.slice(0,32),p=d.slice(32),m=new h(this.versions);if(this.privateKey)try{m.privateKey=a.privateKeyTweakAdd(this.privateKey,f)}catch(t){return this.derive(e+1)}else try{m.publicKey=a.publicKeyTweakAdd(this.publicKey,f,!0)}catch(t){return this.derive(e+1,r)}return m.chainCode=p,m.depth=this.depth+1,m.parentFingerprint=this.fingerprint,m.index=e,m},h.prototype.sign=function(e){return a.sign(e,this.privateKey).signature},h.prototype.verify=function(e,t){return a.verify(e,t,this.publicKey)},h.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}},h.fromMasterSeed=function(e,t){var r=i.createHmac("sha512",c).update(e).digest(),n=r.slice(0,32),s=r.slice(32),o=new h(t);return o.chainCode=s,o.privateKey=n,o},h.fromExtendedKey=function(e,t){var r=new h(t=t||l),s=o.decode(e),i=s.readUInt32BE(0);n(i===t.private||i===t.public,"Version mismatch: does not match private or public"),r.depth=s.readUInt8(4),r.parentFingerprint=s.readUInt32BE(5),r.index=s.readUInt32BE(9),r.chainCode=s.slice(13,45);var a=s.slice(45);return 0===a.readUInt8(0)?(n(i===t.private,"Version mismatch: version does not match private"),r.privateKey=a.slice(1)):(n(i===t.public,"Version mismatch: version does not match public"),r.publicKey=a),r},h.fromJSON=function(e){return h.fromExtendedKey(e.xpriv)},h.HARDENED_OFFSET=u,t.exports=h}}},{package:"@metamask/eth-trezor-keyring>hdkey",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/hdkey/lib/hdkey.js"}],[1265,{"./lib":1269,"./lib/elliptic":1268},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/elliptic.js"}],[1266,{"../../../../../is-buffer/index.js":3384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=Object.prototype.toString;r.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},r.isBoolean=function(e,r){if("[object Boolean]"!==t.call(e))throw TypeError(r)},r.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},r.isFunction=function(e,r){if("[object Function]"!==t.call(e))throw TypeError(r)},r.isNumber=function(e,r){if("[object Number]"!==t.call(e))throw TypeError(r)},r.isObject=function(e,r){if("[object Object]"!==t.call(e))throw TypeError(r)},r.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},r.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},r.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},r.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/lib/assert.js"}],[1267,{bip66:2223,"safe-buffer":4093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,s=e("bip66"),i=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(e,t,r){var s=n.from(r?i:o);return e.copy(s,r?8:9),t.copy(s,r?181:214),s},r.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var s=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+s||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},r.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,i=0;r>1&&0===t[i]&&!(128&t[i+1]);--r,++i);for(var o=n.concat([n.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return s.encode(t.slice(i),o.slice(c))},r.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var i=s.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(r,32-i.s.length),{r:t,s:r}},r.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),s=e.length,i=0;if(48===e[i++]){var o=e[i++];if(!(128&o&&(i+=o-128)>s)&&2===e[i++]){var a=e[i++];if(128&a){if(i+(o=a-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+e[i]}if(!(a>s-i)){var c=i;if(i+=a,2===e[i++]){var u=e[i++];if(128&u){if(i+(o=u-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(u=0;o>0;i+=1,o-=1)u=(u<<8)+e[i]}if(!(u>s-i)){var l=i;for(i+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var h=e.slice(c,c+a);for(h.copy(t,32-h.length);u>0&&0===e[l];u-=1,l+=1);if(!(u>32)){var d=e.slice(l,l+u);return d.copy(r,32-d.length),{r:t,s:r}}}}}}}}}}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/lib/der.js"}],[1268,{"../messages.json":1270,"bn.js":2286,"create-hash":2565,elliptic:2604,"safe-buffer":4093},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,s=e("create-hash"),i=e("bn.js"),o=e("elliptic").ec,a=e("../messages.json"),c=new o("secp256k1"),u=c.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new i(t);if(r.cmp(u.p)>=0)return null;var n=(r=r.toRed(u.red)).redSqr().redIMul(r).redIAdd(u.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),c.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new i(t),s=new i(r);if(n.cmp(u.p)>=0||s.cmp(u.p)>=0)return null;if(n=n.toRed(u.red),s=s.toRed(u.red),(6===e||7===e)&&s.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return s.redSqr().redISub(o.redIAdd(u.b)).isZero()?c.keyPair({pub:{x:n,y:s}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new i(e);return t.cmp(u.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new i(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new i(e);return t.isZero()?n.alloc(32):u.n.sub(t).umod(u.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new i(e);if(t.cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(u.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new i(t);if(r.cmp(u.n)>=0)throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new i(e)),r.cmp(u.n)>=0&&r.isub(u.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new i(t);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new i(e)),r.cmp(u.n)&&(r=r.umod(u.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new i(e);if(r.cmp(u.n)>=0||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(u.n)>=0)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=u.g.mul(t).add(s.pub);if(o.isInfinity())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(u.n)>=0||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(s.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),s=0;s<e.length;++s)if(r[s]=l(e[s]),null===r[s])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0].pub,o=1;o<r.length;++o)i=i.add(r[o].pub);if(i.isInfinity())throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(i.encode(!0,t))},r.signatureNormalize=function(e){var t=new i(e.slice(0,32)),r=new i(e.slice(32,64));if(t.cmp(u.n)>=0||r.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var s=n.from(e);return 1===r.cmp(c.nh)&&u.n.sub(r).toArrayLike(n,"be",32).copy(s,32),s},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new i(t).cmp(u.n)>=0||new i(r).cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new i(e.r);t.cmp(u.n)>=0&&(t=new i(0));var r=new i(e.s);return r.cmp(u.n)>=0&&(r=new i(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,s){if("function"==typeof r){var o=r;r=function(r){var c=o(e,t,null,s,r);if(!n.isBuffer(c)||32!==c.length)throw new Error(a.ECDSA_SIGN_FAIL);return new i(c)}}var l=new i(t);if(l.cmp(u.n)>=0||l.isZero())throw new Error(a.ECDSA_SIGN_FAIL);var h=c.sign(e,t,{canonical:!0,k:r,pers:s});return{signature:n.concat([h.r.toArrayLike(n,"be",32),h.s.toArrayLike(n,"be",32)]),recovery:h.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},s=new i(n.r),o=new i(n.s);if(s.cmp(u.n)>=0||o.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(c.nh)||s.isZero()||o.isZero())return!1;var h=l(r);if(null===h)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return c.verify(e,n,{x:h.pub.x,y:h.pub.y})},r.recover=function(e,t,r,s){var o={r:t.slice(0,32),s:t.slice(32,64)},l=new i(o.r),h=new i(o.s);if(l.cmp(u.n)>=0||h.cmp(u.n)>=0)throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||h.isZero())throw new Error;var d=c.recoverPubKey(e,o,r);return n.from(d.encode(!0,s))}catch(e){throw new Error(a.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return s("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var s=l(e);if(null===s)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var o=new i(t);if(o.cmp(u.n)>=0||o.isZero())throw new Error(a.ECDH_FAIL);return n.from(s.pub.mul(o).encode(!0,r))}}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/lib/elliptic/index.js"}],[1269,{"./assert":1266,"./der":1267,"./messages.json":1270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./assert"),s=e("./der"),i=e("./messages.json");function o(e,t){return e===undefined?t:(n.isBoolean(e,i.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return s.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),(t=s.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(i.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),s=o(s,!0),e.publicKeyTweakAdd(t,r,s)},publicKeyTweakMul:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),s=o(s,!0),e.publicKeyTweakMul(t,r,s)},publicKeyCombine:function(t,r){n.isArray(t,i.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,i.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var s=0;s<t.length;++s)n.isBuffer(t[s],i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[s],33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return s.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=s.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=s.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,s){n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return s!==undefined&&(n.isObject(s,i.OPTIONS_TYPE_INVALID),s.data!==undefined&&(n.isBuffer(s.data,i.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(s.data,32,i.OPTIONS_DATA_LENGTH_INVALID),o=s.data),s.noncefn!==undefined&&(n.isFunction(s.noncefn,i.OPTIONS_NONCEFN_TYPE_INVALID),a=s.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,s){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(s,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(s,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,s)},recover:function(t,r,s,a){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(s,i.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(s,-1,4,i.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,s,a)},ecdh:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,s){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),s=o(s,!0),e.ecdhUnsafe(t,r,s)}}}}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/lib/index.js"}],[127,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;i.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};r.default=s;const i=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[1270,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"@metamask/eth-trezor-keyring>hdkey>secp256k1",file:"node_modules/@metamask/eth-trezor-keyring/node_modules/secp256k1/lib/messages.json"}],[1278,{"./determineGasFeeCalculations":1279,"./fetchGasEstimatesViaEthFeeHistory":1281,"./gas-util":1285,"@metamask/base-controller":1090,"@metamask/controller-utils":1095,"eth-query":2734,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GasFeeController=r.GAS_ESTIMATE_TYPES=r.LEGACY_GAS_PRICES_API_URL=void 0;const l=u(e("eth-query")),h=e("uuid"),d=e("@metamask/base-controller"),f=e("@metamask/controller-utils"),p=e("./gas-util"),m=u(e("./determineGasFeeCalculations")),g=u(e("./fetchGasEstimatesViaEthFeeHistory"));r.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",r.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const y={gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1}},w={gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.NONE};class b extends d.BaseControllerV2{constructor({interval:e=15e3,messenger:t,state:u,getCurrentNetworkEIP1559Compatibility:h,getCurrentAccountEIP1559Compatibility:d,getChainId:f,getCurrentNetworkLegacyGasAPICompatibility:p,getProvider:m,onNetworkStateChange:g,legacyAPIEndpoint:b=r.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:v,clientId:_}){super({name:"GasFeeController",metadata:y,messenger:t,state:Object.assign(Object.assign({},w),u)}),n.add(this),s.set(this,void 0),this.intervalDelay=e,this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=h,this.getCurrentNetworkLegacyGasAPICompatibility=p,this.getCurrentAccountEIP1559Compatibility=d,a(this,s,m,"f"),this.EIP1559APIEndpoint=v,this.legacyAPIEndpoint=b,this.clientId=_,this.ethQuery=new l.default(c(this,s,"f").call(this)),g&&f?(this.currentChainId=f(),g((e=>o(this,void 0,void 0,(function*(){yield c(this,n,"m",i).call(this,e)}))))):(this.currentChainId=this.messagingSystem.call("NetworkController:getState").providerConfig.chainId,this.messagingSystem.subscribe("NetworkController:stateChange",(e=>o(this,void 0,void 0,(function*(){yield c(this,n,"m",i).call(this,e)})))))}resetPolling(){return o(this,void 0,void 0,(function*(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),yield this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}))}fetchGasFeeEstimates(e){return o(this,void 0,void 0,(function*(){return yield this._fetchGasFeeEstimateData(e)}))}getGasFeeEstimatesAndStartPolling(e){return o(this,void 0,void 0,(function*(){const t=e||(0,h.v1)();return this.pollTokens.add(t),1===this.pollTokens.size&&(yield this._fetchGasFeeEstimateData(),this._poll()),t}))}_fetchGasFeeEstimateData(e={}){return o(this,void 0,void 0,(function*(){const{shouldUpdateState:t=!0}=e;let r;const n=this.getCurrentNetworkLegacyGasAPICompatibility(),s=(0,f.convertHexToDecimal)(this.currentChainId);try{r=yield this.getEIP1559Compatibility()}catch(e){console.error(e),r=!1}const i=yield(0,m.default)({isEIP1559Compatible:r,isLegacyGasAPICompatible:n,fetchGasEstimates:p.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${s}`),fetchGasEstimatesViaEthFeeHistory:g.default,fetchLegacyGasPriceEstimates:p.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${s}`),fetchEthGasPriceEstimate:p.fetchEthGasPriceEstimate,calculateTimeEstimate:p.calculateTimeEstimate,clientId:this.clientId,ethQuery:this.ethQuery});return t&&this.update((e=>{e.gasFeeEstimates=i.gasFeeEstimates,e.estimatedGasFeeTimeBounds=i.estimatedGasFeeTimeBounds,e.gasEstimateType=i.gasEstimateType})),i}))}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>o(this,void 0,void 0,(function*(){yield(0,f.safelyExecute)((()=>this._fetchGasFeeEstimateData()))}))),this.intervalDelay)}resetState(){this.update((()=>w))}getEIP1559Compatibility(){var e,t;return o(this,void 0,void 0,(function*(){const r=yield this.getCurrentNetworkEIP1559Compatibility(),n=null===(t=null===(e=this.getCurrentAccountEIP1559Compatibility)||void 0===e?void 0:e.call(this))||void 0===t||t;return r&&n}))}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===r.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,p.calculateTimeEstimate)(e,t,this.state.gasFeeEstimates):{}}}r.GasFeeController=b,s=new WeakMap,n=new WeakSet,i=function(e){return o(this,void 0,void 0,(function*(){const t=e.providerConfig.chainId;t!==this.currentChainId&&(this.ethQuery=new l.default(c(this,s,"f").call(this)),yield this.resetPolling(),this.currentChainId=t)}))},r.default=b}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/GasFeeController.js"}],[1279,{"./GasFeeController":1278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const s=e("./GasFeeController");r.default=function({isEIP1559Compatible:e,isLegacyGasAPICompatible:t,fetchGasEstimates:r,fetchGasEstimatesUrl:i,fetchGasEstimatesViaEthFeeHistory:o,fetchLegacyGasPriceEstimates:a,fetchLegacyGasPriceEstimatesUrl:c,fetchEthGasPriceEstimate:u,calculateTimeEstimate:l,clientId:h,ethQuery:d}){return n(this,void 0,void 0,(function*(){try{if(e){let e;try{e=yield r(i,h)}catch(t){e=yield o(d)}const{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:n}=e.medium;return{gasFeeEstimates:e,estimatedGasFeeTimeBounds:l(t,n,e),gasEstimateType:s.GAS_ESTIMATE_TYPES.FEE_MARKET}}if(t){return{gasFeeEstimates:yield a(c,h),estimatedGasFeeTimeBounds:{},gasEstimateType:s.GAS_ESTIMATE_TYPES.LEGACY}}throw new Error("Main gas fee/price estimation failed. Use fallback")}catch(e){try{return{gasFeeEstimates:yield u(d),estimatedGasFeeTimeBounds:{},gasEstimateType:s.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/determineGasFeeCalculations.js"}],[128,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[1280,{"@metamask/controller-utils":1095,"ethereumjs-util":2774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const s=e("ethereumjs-util"),i=e("@metamask/controller-utils"),o=1024;function a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:s,includeNextBlock:o}){var a;return n(this,void 0,void 0,(function*(){const n=yield(0,i.query)(e,"eth_feeHistory",[(0,i.toHex)(t),(0,i.toHex)(r),s]),c=(0,i.fromHex)(n.oldestBlock);if(n.baseFeePerGas!==undefined&&n.baseFeePerGas.length>0&&n.gasUsedRatio.length>0&&(n.reward===undefined||n.reward.length>0)){const e=o?n.baseFeePerGas:n.baseFeePerGas.slice(0,t),r=n.gasUsedRatio,u=null!==(a=n.reward)&&void 0!==a?a:[],l=r.length;return e.map(((e,t)=>{const n=(0,i.fromHex)(e),o=c.addn(t);return t>=l?function({baseFeePerGas:e,number:t}){return{number:t,baseFeePerGas:e,gasUsedRatio:null,priorityFeesByPercentile:null}}({baseFeePerGas:n,number:o}):function({baseFeePerGas:e,number:t,blockIndex:r,gasUsedRatios:n,priorityFeePercentileGroups:s,percentiles:o}){const a=n[r],c=s[r];return{number:t,baseFeePerGas:e,gasUsedRatio:a,priorityFeesByPercentile:o.reduce(((e,t,r)=>{const n=c[r];return Object.assign(Object.assign({},e),{[t]:(0,i.fromHex)(n)})}),{})}}({baseFeePerGas:n,number:o,blockIndex:t,gasUsedRatios:r,priorityFeePercentileGroups:u,percentiles:s})}))}return[]}))}r.default=function({ethQuery:e,numberOfBlocks:t,endBlock:r="latest",percentiles:c=[],includeNextBlock:u=!1}){return n(this,void 0,void 0,(function*(){const n=c.length>0?Array.from(new Set(c)).sort(((e,t)=>e-t)):[],l=function(e,t){e.lt(new s.BN(t))&&(t=e.toNumber());const r=[];for(let n=e.subn(t);n.lt(e);n=n.addn(o)){const t=e.sub(n).toNumber(),s=t<o?t:o,i=n.addn(s);r.push({numberOfBlocks:s,endBlockNumber:i})}return r}("latest"===r?(0,i.fromHex)(yield(0,i.query)(e,"blockNumber")):r,t);return(yield Promise.all(l.map((({numberOfBlocks:t,endBlockNumber:r},s)=>s===l.length-1?a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:n,includeNextBlock:u}):a({ethQuery:e,numberOfBlocks:t,endBlockNumber:r,percentiles:n,includeNextBlock:!1}))))).reduce(((e,t)=>[...e,...t]),[])}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchBlockFeeHistory.js"}],[1281,{"./fetchBlockFeeHistory":1280,"./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels":1282,"./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock":1283,"@metamask/controller-utils":1095,"ethjs-unit":2812},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=e("ethjs-unit"),o=e("@metamask/controller-utils"),a=s(e("./fetchBlockFeeHistory")),c=s(e("./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock")),u=s(e("./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels"));r.default=function(e){return n(this,void 0,void 0,(function*(){const t=yield(0,c.default)(e),r=yield(0,a.default)({ethQuery:e,endBlock:t.number,numberOfBlocks:5,percentiles:[10,20,30]}),n=(0,i.fromWei)(t.baseFeePerGas,o.GWEI),s=(0,u.default)(r);return Object.assign(Object.assign({},s),{estimatedBaseFee:n,historicalBaseFeeRange:null,baseFeeTrend:null,latestPriorityFeeRange:null,historicalPriorityFeeRange:null,priorityFeeTrend:null,networkCongestion:null})}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory.js"}],[1282,{"./medianOf":1284,"@metamask/controller-utils":1095,"ethereumjs-util":2774,"ethjs-unit":2812},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=e("ethereumjs-util"),i=e("ethjs-unit"),o=e("@metamask/controller-utils"),a=n(e("./medianOf")),c=["low","medium","high"],u={low:{percentile:10,baseFeePercentageMultiplier:new s.BN(110),priorityFeePercentageMultiplier:new s.BN(94),minSuggestedMaxPriorityFeePerGas:new s.BN(1e9),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:3e4}},medium:{percentile:20,baseFeePercentageMultiplier:new s.BN(120),priorityFeePercentageMultiplier:new s.BN(97),minSuggestedMaxPriorityFeePerGas:new s.BN(15e8),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:45e3}},high:{percentile:30,baseFeePercentageMultiplier:new s.BN(125),priorityFeePercentageMultiplier:new s.BN(98),minSuggestedMaxPriorityFeePerGas:new s.BN(2e9),estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:6e4}}};r.default=function(e){return c.reduce(((t,r)=>{const n=function(e,t){const r=u[e],n=t[t.length-1].baseFeePerGas.mul(r.baseFeePercentageMultiplier).divn(100),c=t.map((e=>"priorityFeesByPercentile"in e?e.priorityFeesByPercentile[r.percentile]:null)).filter(s.BN.isBN),l=(0,a.default)(c).mul(r.priorityFeePercentageMultiplier).divn(100),h=s.BN.max(l,r.minSuggestedMaxPriorityFeePerGas),d=n.add(h);return Object.assign(Object.assign({},r.estimatedWaitTimes),{suggestedMaxPriorityFeePerGas:(0,i.fromWei)(h,o.GWEI),suggestedMaxFeePerGas:(0,i.fromWei)(d,o.GWEI)})}(r,e);return Object.assign(Object.assign({},t),{[r]:n})}),{})}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels.js"}],[1283,{"@metamask/controller-utils":1095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const s=e("@metamask/controller-utils");r.default=function(e,t=!1){return n(this,void 0,void 0,(function*(){const r=yield(0,s.query)(e,"blockNumber"),n=yield(0,s.query)(e,"getBlockByNumber",[r,t]);return Object.assign(Object.assign({},n),{number:(0,s.fromHex)(n.number),baseFeePerGas:(0,s.fromHex)(n.baseFeePerGas)})}))}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock.js"}],[1284,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){const t=e.slice().sort(((e,t)=>e.cmp(t))),r=t.length;return t[Math.floor((r-1)/2)]}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/fetchGasEstimatesViaEthFeeHistory/medianOf.js"}],[1285,{"@metamask/controller-utils":1095,"ethereumjs-util":2774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.calculateTimeEstimate=r.fetchEthGasPriceEstimate=r.fetchLegacyGasPriceEstimates=r.fetchGasEstimates=r.normalizeGWEIDecimalNumbers=void 0;const s=e("ethereumjs-util"),i=e("@metamask/controller-utils"),o=e=>({"X-Client-Id":e});function a(e){const t=(0,i.gweiDecToWEIBN)(e).toString(16);return(0,i.weiHexToGweiDec)(t).toString(10)}r.normalizeGWEIDecimalNumbers=a,r.fetchGasEstimates=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield(0,i.handleFetch)(e,t?{headers:o(t)}:undefined);return{low:Object.assign(Object.assign({},r.low),{suggestedMaxPriorityFeePerGas:a(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.low.suggestedMaxFeePerGas)}),medium:Object.assign(Object.assign({},r.medium),{suggestedMaxPriorityFeePerGas:a(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.medium.suggestedMaxFeePerGas)}),high:Object.assign(Object.assign({},r.high),{suggestedMaxPriorityFeePerGas:a(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(r.high.suggestedMaxFeePerGas)}),estimatedBaseFee:a(r.estimatedBaseFee),historicalBaseFeeRange:r.historicalBaseFeeRange,baseFeeTrend:r.baseFeeTrend,latestPriorityFeeRange:r.latestPriorityFeeRange,historicalPriorityFeeRange:r.historicalPriorityFeeRange,priorityFeeTrend:r.priorityFeeTrend,networkCongestion:r.networkCongestion}}))},r.fetchLegacyGasPriceEstimates=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield(0,i.handleFetch)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:Object.assign({"Content-Type":"application/json"},t&&o(t))});return{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice}}))},r.fetchEthGasPriceEstimate=function(e){return n(this,void 0,void 0,(function*(){const t=yield(0,i.query)(e,"gasPrice");return{gasPrice:(0,i.weiHexToGweiDec)(t).toString()}}))},r.calculateTimeEstimate=function(e,t,r){const{low:n,medium:o,high:a,estimatedBaseFee:c}=r,u=(0,i.gweiDecToWEIBN)(e),l=(0,i.gweiDecToWEIBN)(t),h=(0,i.gweiDecToWEIBN)(c),d=s.BN.min(u,l.sub(h)),f=(0,i.gweiDecToWEIBN)(n.suggestedMaxPriorityFeePerGas),p=(0,i.gweiDecToWEIBN)(o.suggestedMaxPriorityFeePerGas),m=(0,i.gweiDecToWEIBN)(a.suggestedMaxPriorityFeePerGas);let g,y;return d.lt(f)?(g=null,y="unknown"):d.gte(f)&&d.lt(p)?(g=n.minWaitTimeEstimate,y=n.maxWaitTimeEstimate):d.gte(p)&&d.lt(m)?(g=o.minWaitTimeEstimate,y=o.maxWaitTimeEstimate):d.eq(m)?(g=a.minWaitTimeEstimate,y=a.maxWaitTimeEstimate):(g=0,y=a.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:y}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/gas-util.js"}],[1286,{"./GasFeeController":1278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./GasFeeController"),r)}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/index.js"}],[129,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[1293,{"@metamask/base-controller":1090,events:2336},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const i=e("events"),o=e("@metamask/base-controller");class a extends o.BaseController{constructor(e,t,r,n,s){super(e,t),this.hub=new i.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=null!=n?n:[],this.getCurrentChainId=s,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}securityCheck(e){return n(this,void 0,void 0,(function*(){if(this.securityProviderRequest){const t=yield this.securityProviderRequest(e,e.type);return Object.assign(Object.assign({},e),{securityProviderResponse:t})}return e}))}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){return n(this,void 0,void 0,(function*(){const t=yield this.securityCheck(e);this.messages.push(t),this.saveMessageList()}))}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}waitForFinishStatus(e,t){return n(this,void 0,void 0,(function*(){const{metamaskId:r}=e,n=s(e,["metamaskId"]);return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}))}}r.AbstractMessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.js"}],[1294,{"./AbstractMessageManager":1293,"./utils":1300,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const s=e("uuid"),i=e("./utils"),o=e("./AbstractMessageManager");class a extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,i.validateDecryptedMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin),e.data=(0,i.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.js"}],[1295,{"./AbstractMessageManager":1293,"./utils":1300,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),o=e("./utils");class a extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateEncryptionPublicKeyMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.js"}],[1296,{"./AbstractMessageManager":1293,"./utils":1300,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.MessageManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),o=e("./utils");class a extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_sign"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.MessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/MessageManager.js"}],[1297,{"./AbstractMessageManager":1293,"./utils":1300,"@metamask/controller-utils":1095,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const s=e("uuid"),i=e("@metamask/controller-utils"),o=e("./utils"),a=e("./AbstractMessageManager");class c extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,i.detectSIWE)(e),n=Object.assign(Object.assign({},e),{siwe:r}),a=(0,s.v1)(),c={id:a,messageParams:n,status:"unapproved",time:Date.now(),type:"personal_sign"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},n),{metamaskId:a})),a}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.PersonalMessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/PersonalMessageManager.js"}],[1298,{"./AbstractMessageManager":1293,"./utils":1300,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const s=e("uuid"),i=e("./utils"),o=e("./AbstractMessageManager");class a extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessage(e,t,r){var o;return n(this,void 0,void 0,(function*(){if("V1"===r&&(0,i.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=null===(o=this.getCurrentChainId)||void 0===o?void 0:o.call(this);(0,i.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=(0,s.v1)(),a=Object.assign(Object.assign({},e),{metamaskId:n,version:r});t&&(e.origin=t.origin);const c={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",a),n}))}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){return delete e.metamaskId,delete e.version,Promise.resolve(e)}}r.TypedMessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/TypedMessageManager.js"}],[1299,{"./AbstractMessageManager":1293,"./DecryptMessageManager":1294,"./EncryptionPublicKeyManager":1295,"./MessageManager":1296,"./PersonalMessageManager":1297,"./TypedMessageManager":1298},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AbstractMessageManager"),r),s(e("./MessageManager"),r),s(e("./PersonalMessageManager"),r),s(e("./TypedMessageManager"),r),s(e("./EncryptionPublicKeyManager"),r),s(e("./DecryptMessageManager"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[13,{"../../../shared/constants/metametrics":4323,"../../../shared/constants/network":4324,"../../../shared/constants/time":4334,"../../../shared/constants/tokens":4335,"../../../shared/constants/transaction":4336,"../../../shared/modules/network.utils":4357,"../../../shared/modules/string-utils":4363,loglevel:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("loglevel"),s=e("../../../shared/constants/time"),i=e("../../../shared/constants/network"),o=e("../../../shared/constants/tokens"),a=e("../../../shared/modules/network.utils"),c=e("../../../shared/modules/string-utils"),u=e("../../../shared/constants/transaction"),l=e("../../../shared/constants/metametrics");const h=3*s.MINUTE;r.default=class{constructor({messenger:e,interval:t=h,preferences:r,network:n,keyringMemStore:s,tokenList:i,tokensController:o,assetsContractController:a=null,trackMetaMetricsEvent:c}={}){var u,l,d,f,p;this.messenger=e,this.assetsContractController=a,this.tokensController=o,this.preferences=r,this.interval=t,this.network=n,this.keyringMemStore=s,this.tokenList=i,this.useTokenDetection=null===(u=this.preferences)||void 0===u?void 0:u.store.getState().useTokenDetection,this.selectedAddress=null===(l=this.preferences)||void 0===l?void 0:l.store.getState().selectedAddress,this.tokenAddresses=null===(d=this.tokensController)||void 0===d?void 0:d.state.tokens.map((e=>e.address)),this.hiddenTokens=null===(f=this.tokensController)||void 0===f?void 0:f.state.ignoredTokens,this.detectedTokens=null===(p=this.tokensController)||void 0===p?void 0:p.state.detectedTokens,this.chainId=this.getChainIdFromNetworkStore(),this._trackMetaMetricsEvent=c,null==r||r.store.subscribe((({selectedAddress:e,useTokenDetection:t})=>{this.selectedAddress===e&&this.useTokenDetection===t||(this.selectedAddress=e,this.useTokenDetection=t,this.restartTokenDetection({selectedAddress:e}))})),null==o||o.subscribe((({tokens:e=[],ignoredTokens:t=[],detectedTokens:r=[]})=>{this.tokenAddresses=e.map((e=>e.address)),this.hiddenTokens=t,this.detectedTokens=r})),e.subscribe("NetworkController:stateChange",(()=>{if(this.chainId!==this.getChainIdFromNetworkStore()){const e=this.getChainIdFromNetworkStore();this.chainId=e,this.restartTokenDetection({chainId:this.chainId})}}))}async detectNewTokens({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,s=t??this.getChainIdFromNetworkStore();if(!this.isActive)return;if(!(0,a.isTokenDetectionEnabledForNetwork)(s))return;if(!this.useTokenDetection&&s!==i.CHAIN_IDS.MAINNET)return;const h=!this.useTokenDetection&&s===i.CHAIN_IDS.MAINNET,{tokenList:d}=this._tokenList.state,f=h?o.STATIC_MAINNET_TOKEN_LIST:d,p=[];for(const e in f)this.tokenAddresses.find((t=>(0,c.isEqualCaseInsensitive)(t,e)))||this.hiddenTokens.find((t=>(0,c.isEqualCaseInsensitive)(t,e)))||this.detectedTokens.find((({address:t})=>(0,c.isEqualCaseInsensitive)(t,e)))||p.push(e);const m=[p.slice(0,1e3),p.slice(1e3,p.length-1)];for(const e of m){let t;try{t=await this.assetsContractController.getBalancesInSingleCall(r,e)}catch(e){return void(0,n.warn)("MetaMask - DetectTokensController single call balance fetch failed",e)}const i=[],o=[];if(t){const e=Object.keys(t);for(const t of e){const{address:e,symbol:r,decimals:n}=f[t];o.push(`${r} - ${e}`),i.push({address:e,symbol:r,decimals:n})}i.length>0&&(this._trackMetaMetricsEvent({event:l.MetaMetricsEventName.TokenDetected,category:l.MetaMetricsEventCategory.Wallet,properties:{tokens:o,token_standard:u.TokenStandard.ERC20,asset_type:u.AssetType.token}}),await this.tokensController.addDetectedTokens(i,{selectedAddress:r,chainId:s}))}}}restartTokenDetection({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,n=t??this.chainId;this.isActive&&r&&(this.detectNewTokens({selectedAddress:r,chainId:n}),this.interval=h)}getChainIdFromNetworkStore(){var e;return null===(e=this.network)||void 0===e?void 0:e.state.providerConfig.chainId}set interval(e){this._handle&&clearInterval(this._handle),e&&(this._handle=setInterval((()=>{this.detectNewTokens()}),e))}set keyringMemStore(e){e&&(this._keyringMemStore=e,this._keyringMemStore.subscribe((({isUnlocked:e})=>{this.isUnlocked!==e&&(this.isUnlocked=e,e&&this.restartTokenDetection())})))}set tokenList(e){e&&(this._tokenList=e)}get isActive(){return this.isOpen&&this.isUnlocked}}}}},{package:"$root$",file:"app/scripts/controllers/detect-tokens.js"}],[130,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,s,a,c,u,l,h;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&o.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var f,p;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(f=e.NetworkController)||void 0===f||(null===(p=f.provider)||void 0===p||delete p.rpcTarget)}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(s=e.CachedBalancesController)||void 0===s||delete s.cachedBalances;const m=null===(a=e.TransactionController)||void 0===a?void 0:a.transactions;Array.isArray(m)&&m.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&i.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const g=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(g).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(g[e],t),g[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(g,e,t):g[t]=g[e],delete g[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(l=u.incomingTxLastFetchedBlocksByNetwork)||void 0===l||delete l.localhost;const y=null===(h=e.PreferencesController)||void 0===h?void 0:h.accountTokens;y&&Object.keys(y).forEach((e=>{var t,r;const n=(null===(t=y[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=y[e].rpc||[];t.length>0?y[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):y[e].rpc=n}null===(r=y[e])||void 0===r||delete r.localhost}));return e}(r),t}};r.default=s;const i=/^0x[0-9a-f]+$/iu,o=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[1300,{"@metamask/controller-utils":1095,buffer:2335,"eth-sig-util":2740,"ethereumjs-util":2774,jsonschema:1303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("ethereumjs-util"),s=e("eth-sig-util"),i=e("jsonschema"),o=e("@metamask/controller-utils"),a=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,o.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,n.stripHexPrefix)(e);if(t.match(a))return(0,n.addHexPrefix)(t)}catch(e){}return(0,n.bufferToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,s.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,i.validate)(r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.js"}],[1301,{"./helpers":1302},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./helpers"),s=n.ValidatorResult,i=n.SchemaError,o={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0}},a=o.validators={};function c(e,t,r,n,s){var i=t.throwError;t.throwError=!1;var o=this.validateSchema(e,s,t,r);return t.throwError=i,!o.valid&&n instanceof Function&&n(o),o.valid}function u(e,t,r,n,s,i){if(this.types.object(e)&&(!t.properties||t.properties[s]===undefined))if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:s,message:"additionalProperty "+JSON.stringify(s)+" exists in instance when not allowed"});else{var o=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,o,r,n);var a=this.validateSchema(e[s],o,r,n.makeChild(o,s));a.instance!==i.instance[s]&&(i.instance[s]=a.instance),i.importErrors(a)}}a.type=function(e,t,r,n){if(e===undefined)return null;var i=new s(e,t,r,n),o=Array.isArray(t.type)?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,r,n))){var a=o.map((function(e){return e.id&&"<"+e.id+">"||e+""}));i.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return i},a.anyOf=function(e,t,r,n){if(e===undefined)return null;var o=new s(e,t,r,n),a=new s(e,t,r,n);if(!Array.isArray(t.anyOf))throw new i("anyOf must be an array");if(!t.anyOf.some(c.bind(this,e,r,n,(function(e){a.importErrors(e)})))){var u=t.anyOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&o.importErrors(a),o.addError({name:"anyOf",argument:u,message:"is not any of "+u.join(",")})}return o},a.allOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.allOf))throw new i("allOf must be an array");var o=new s(e,t,r,n),a=this;return t.allOf.forEach((function(t,s){var i=a.validateSchema(e,t,r,n);if(!i.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";o.addError({name:"allOf",argument:{id:c,length:i.errors.length,valid:i},message:"does not match allOf schema "+c+" with "+i.errors.length+" error[s]:"}),o.importErrors(i)}})),o},a.oneOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.oneOf))throw new i("oneOf must be an array");var o=new s(e,t,r,n),a=new s(e,t,r,n),u=t.oneOf.filter(c.bind(this,e,r,n,(function(e){a.importErrors(e)}))).length,l=t.oneOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==u&&(r.nestedErrors&&o.importErrors(a),o.addError({name:"oneOf",argument:l,message:"is not exactly one from "+l.join(",")})),o},a.properties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),o=t.properties||{};for(var a in o){"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[a],r,n);var c=Object.hasOwnProperty.call(e,a)?e[a]:undefined,u=this.validateSchema(c,o[a],r,n.makeChild(o[a],a));u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u)}return i}},a.patternProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),o=t.patternProperties||{};for(var a in e){var c=!0;for(var l in o){if(new RegExp(l).test(a)){c=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[l],r,n);var h=this.validateSchema(e[a],o[l],r,n.makeChild(o[l],a));h.instance!==i.instance[a]&&(i.instance[a]=h.instance),i.importErrors(h)}}c&&u.call(this,e,t,r,n,a,i)}return i}},a.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var i=new s(e,t,r,n);for(var o in e)u.call(this,e,t,r,n,o,i);return i}},a.minProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i}},a.maxProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i}},a.items=function(e,t,r,n){var i=this;if(this.types.array(e)&&t.items){var o=new s(e,t,r,n);return e.every((function(e,s){var a=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(a===undefined)return!0;if(!1===a)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=i.validateSchema(e,a,r,n.makeChild(a,s));return c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c),!0})),o}},a.minimum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum)||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i}},a.maximum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum)||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i}};var l=function(e,t,r,o,a,c){if(this.types.number(e)){var u=t[a];if(0==u)throw new i(a+" cannot be zero");var l=new s(e,t,r,o),h=n.getDecimalPlaces(e),d=n.getDecimalPlaces(u),f=Math.max(h,d),p=Math.pow(10,f);return Math.round(e*p)%Math.round(u*p)!=0&&l.addError({name:a,argument:u,message:c+JSON.stringify(u)}),l}};function h(e,t,r){var s,i=r.length;for(s=t+1;s<i;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}a.multipleOf=function(e,t,r,n){return l.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},a.divisibleBy=function(e,t,r,n){return l.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},a.required=function(e,t,r,n){var i=new s(e,t,r,n);return e===undefined&&!0===t.required?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){e[t]===undefined&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),i},a.pattern=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i}},a.format=function(e,t,r,i){if(e!==undefined){var o=new s(e,t,r,i);return o.disableFormat||n.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}},a.minLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i}},a.maxLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i}},a.minItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i}},a.maxItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i}},a.uniqueItems=function(e,t,r,i){if(this.types.array(e)){var o=new s(e,t,r,i);return e.every((function(e,t,r){for(var s=t+1;s<r.length;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}))||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}},a.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.every(h)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}},a.dependencies=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);for(var o in t.dependencies)if(e[o]!==undefined){var a=t.dependencies[o],c=n.makeChild(a,o);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach((function(t){e[t]===undefined&&i.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})}));else{var u=this.validateSchema(e,a,r,c);i.instance!==u.instance&&(i.instance=u.instance),u&&u.errors.length&&(i.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),i.importErrors(u))}}return i}},a.enum=function(e,t,r,o){if(e===undefined)return null;if(!Array.isArray(t.enum))throw new i("enum expects an array",t);var a=new s(e,t,r,o);return t.enum.some(n.deepCompareStrict.bind(null,e))||a.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),a},a.const=function(e,t,r,i){if(e===undefined)return null;var o=new s(e,t,r,i);return n.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o},a.not=a.disallow=function(e,t,r,n){var i=this;if(e===undefined)return null;var o=new s(e,t,r,n),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach((function(s){if(i.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;o.addError({name:"not",argument:a,message:"is of prohibited type "+a})}})),o):null},t.exports=o}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/attribute.js"}],[1302,{url:4239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=r.ValidationError=function(e,t,r,n,s,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=s,this.argument=i,this.stack=this.toString()};s.prototype.toString=function(){return this.property+" "+this.message};var i=r.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};function o(e,t){return t+": "+e.toString()+"\n"}i.prototype.addError=function(e){var t;if("string"==typeof e)t=new s(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new s(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},i.prototype.toString=function(e){return this.errors.map(o).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var a=r.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};a.prototype=Object.create(Error.prototype,{constructor:{value:a,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var c=r.SchemaContext=function(e,t,r,n,s){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=s};c.prototype.resolve=function(e){return n.resolve(this.base,e)},c.prototype.makeChild=function(e,t){var r=t===undefined?this.propertyPath:this.propertyPath+l(t),s=n.resolve(this.base,e.id||""),i=new c(e,this.options,r,s,Object.create(this.schemas));return e.id&&!i.schemas[s]&&(i.schemas[s]=e),i};var u=r.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],r.isFormat=function(e,t,r){if("string"==typeof e&&u[t]!==undefined){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var l=r.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function h(e,t,r,n){"object"==typeof r?t[n]=p(e[n],r):-1===e.indexOf(r)&&t.push(r)}function d(e,t,r){t[r]=e[r]}function f(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=p(e[n],t[n]):r[n]=t[n]}function p(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(h.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(d.bind(null,e,n)),Object.keys(t).forEach(f.bind(null,e,t,n))),n}function m(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}r.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every((function(n,s){return e(t[s],r[s])})));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),s=Object.keys(r);return n.length===s.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r},t.exports.deepMerge=p,r.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var s=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(s in e))return;e=e[s]}return e},r.encodePath=function(e){return e.map(m).join("")},r.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/helpers.js"}],[1303,{"./helpers":1302,"./scan":1304,"./validator":1305},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.SchemaScanResult=e("./scan").SchemaScanResult,t.exports.scan=e("./scan").scan,t.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/index.js"}],[1304,{"./helpers":1302,url:4239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./helpers");function i(e,t){this.id=e,this.ref=t}t.exports.SchemaScanResult=i,t.exports.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var i=n.resolve(e,t.$ref);u[i]=u[i]?u[i]+1:0}else{var l=t.id?n.resolve(e,t.id):e;if(l){if(l.indexOf("#")<0&&(l+="#"),c[l]){if(!s.deepCompareStrict(c[l],t))throw new Error("Schema <"+t+"> already exists with different definition");return c[l]}c[l]=t,"#"==l[l.length-1]&&(c[l.substring(0,l.length-1)]=t)}o(l+"/items",t.items instanceof Array?t.items:[t.items]),o(l+"/extends",t.extends instanceof Array?t.extends:[t.extends]),r(l+"/additionalItems",t.additionalItems),a(l+"/properties",t.properties),r(l+"/additionalProperties",t.additionalProperties),a(l+"/definitions",t.definitions),a(l+"/patternProperties",t.patternProperties),a(l+"/dependencies",t.dependencies),o(l+"/disallow",t.disallow),o(l+"/allOf",t.allOf),o(l+"/anyOf",t.anyOf),o(l+"/oneOf",t.oneOf),r(l+"/not",t.not)}}function o(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function a(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var c={},u={};return r(e,t),new i(c,u)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/scan.js"}],[1305,{"./attribute":1301,"./helpers":1302,"./scan":1304,url:4239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./attribute"),i=e("./helpers"),o=e("./scan").scan,a=i.ValidatorResult,c=i.SchemaError,u=i.SchemaContext,l=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(d),this.attributes=Object.create(s.validators)};function h(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=o(t||"/",e),s=t||e.id;for(var i in n.id)this.schemas[i]=n.id[i];for(var i in n.ref)this.unresolvedRefs.push(i);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[s]},l.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},l.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},l.prototype.setSchemas=function(e){this.schemas=e},l.prototype.getSchema=function(e){return this.schemas[e]},l.prototype.validate=function(e,t,r,s){r||(r={});var i=r.propertyName||"instance",a=n.resolve(r.base||"/",t.id||"");if(!s){(s=new u(t,r,i,a,Object.create(this.schemas))).schemas[a]||(s.schemas[a]=t);var l=o(a,t);for(var h in l.id){var d=l.id[h];s.schemas[h]=d}}if(t){var f=this.validateSchema(e,t,r,s);if(!f)throw new Error("Result undefined");return f}throw new c("no schema specified",t)},l.prototype.validateSchema=function(e,t,r,n){var o,l=new a(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var d={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,d)),t=d.schema,d.schema=null,d.ctx=null,d=null}else t=i.deepMerge(t,this.superResolve(t.extends,n));if(o=h(t)){var f=this.resolve(t,o,n),p=new u(f.subschema,r,n.propertyPath,f.switchSchema,n.schemas);return this.validateSchema(e,f.subschema,r,p)}var m=r&&r.skipAttributes||[];for(var g in t)if(!s.ignoreProperties[g]&&m.indexOf(g)<0){var y=null,w=this.attributes[g];if(w)y=w.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new c("Unsupported attribute: "+g,t);y&&l.importErrors(y)}if("function"==typeof r.rewrite){var b=r.rewrite.call(this,e,t,r,n);l.instance=b}return l},l.prototype.schemaTraverser=function(e,t){e.schema=i.deepMerge(e.schema,this.superResolve(t,e.ctx))},l.prototype.superResolve=function(e,t){var r;return(r=h(e))?this.resolve(e,r,t).subschema:e},l.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var s=n.parse(t),o=s&&s.hash,a=o&&o.length&&t.substr(0,t.length-o.length);if(!a||!r.schemas[a])throw new c("no such schema <"+t+">",e);var u=i.objectGetPath(r.schemas[a],o.substr(1));if(u===undefined)throw new c("no such schema "+o+" located in <"+a+">",e);return{subschema:u,switchSchema:t}},l.prototype.testType=function(e,t,r,n,s){if("function"==typeof this.types[s])return this.types[s].call(this,e);if(s&&"object"==typeof s){var i=this.validateSchema(e,s,r,n);return i===undefined||!(i&&i.errors.length)}return!0};var d=l.prototype.types={};d.string=function(e){return"string"==typeof e},d.number=function(e){return"number"==typeof e&&isFinite(e)},d.integer=function(e){return"number"==typeof e&&e%1==0},d.boolean=function(e){return"boolean"==typeof e},d.array=function(e){return Array.isArray(e)},d.null=function(e){return null===e},d.date=function(e){return e instanceof Date},d.any=function(e){return!0},d.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=l}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/validator.js"}],[131,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[1310,{"./constants":1311,"./create-auto-managed-network-client":1312,"./logger":1315,"./types":1316,"@metamask/base-controller":1090,"@metamask/controller-utils":1095,"@metamask/swappable-obj-proxy":1644,"@metamask/utils":1654,assert:2331,"eth-query":2734,"eth-rpc-errors":2738,uuid:4260},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,h,d,f,p,m,g,y,w,b,v,_,k=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},E=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},T=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkController=r.defaultState=r.knownKeysOf=void 0;const A=e("assert"),I=e("@metamask/swappable-obj-proxy"),P=S(e("eth-query")),x=e("@metamask/base-controller"),C=e("uuid"),j=e("eth-rpc-errors"),M=e("@metamask/controller-utils"),N=e("@metamask/utils"),O=e("./constants"),L=e("./logger"),B=e("./types"),R=e("./create-auto-managed-network-client"),D=(0,L.createModuleLogger)(L.projectLogger,"NetworkController");function K(e){return Object.keys(e)}function U(e,t){const r=t.reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{});var n,s,i;return n=r,s=()=>t.every((e=>e in r)),i="The reduce did not produce an object with all of the desired keys.",A.strict.ok(s(n),i),r}function H(e){return Object.keys(M.InfuraNetworkType).includes(e)}function F(e){return"string"==typeof e?e:e.type}function V(...e){if(1===e.length)return e[0];const[{id:t,rpcUrl:r},n]=e;if(t===undefined){const e=Object.values(n).find((e=>e.rpcUrl===r.toLowerCase()));return e?e.id:r.toLowerCase()}return t}function $(e){return H(e.type)}function G(e){return e.type===M.NetworkType.rpc}function Y(e){if(e.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(e.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints")}r.knownKeysOf=K;r.defaultState={networkId:null,networkStatus:O.NetworkStatus.Unknown,providerConfig:{type:M.NetworkType.mainnet,chainId:M.ChainId.mainnet},networkDetails:{EIPS:{}},networkConfigurations:{}};class J extends x.BaseControllerV2{constructor({messenger:e,state:t,infuraProjectId:d,trackMetaMetricsEvent:f}){if(super({name:"NetworkController",metadata:{networkId:{persist:!0,anonymous:!1},networkStatus:{persist:!0,anonymous:!1},networkDetails:{persist:!0,anonymous:!1},providerConfig:{persist:!0,anonymous:!1},networkConfigurations:{persist:!0,anonymous:!1}},messenger:e,state:Object.assign(Object.assign({},r.defaultState),t)}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),h.set(this,void 0),!d||"string"!=typeof d)throw new Error("Invalid Infura project ID");E(this,i,d,"f"),E(this,o,f,"f"),this.messagingSystem.registerActionHandler(`${this.name}:getProviderConfig`,(()=>this.state.providerConfig)),this.messagingSystem.registerActionHandler(`${this.name}:getEthQuery`,(()=>T(this,s,"f"))),E(this,a,this.state.providerConfig,"f")}getProviderAndBlockTracker(){return{provider:T(this,c,"f"),blockTracker:T(this,l,"f")}}getNetworkClientsById(){const e=T(this,n,"m",g).call(this);return Object.assign({},e[B.NetworkClientType.Infura],e[B.NetworkClientType.Custom])}initializeProvider(){return k(this,void 0,void 0,(function*(){T(this,n,"m",g).call(this),T(this,n,"m",_).call(this),yield this.lookupNetwork()}))}lookupNetwork(){return k(this,void 0,void 0,(function*(){if(!T(this,s,"f"))return;const e=$(this.state.providerConfig);let t=!1;const r=()=>{t=!0,this.messagingSystem.unsubscribe("NetworkController:networkDidChange",r)};let i;this.messagingSystem.subscribe("NetworkController:networkDidChange",r);let o,a=null;try{const[e,t]=yield Promise.all([T(this,n,"m",f).call(this),T(this,n,"m",m).call(this)]);i=O.NetworkStatus.Available,a=e,o=t}catch(t){if(function(e){return"object"==typeof e&&null!==e&&"code"in e}(t)){let r;if(e&&(0,N.hasProperty)(t,"message")&&"string"==typeof t.message)try{r=JSON.parse(t.message)}catch(e){}i=(0,N.isPlainObject)(r)&&r.error===O.INFURA_BLOCKED_KEY?O.NetworkStatus.Blocked:t.code===j.errorCodes.rpc.internal?O.NetworkStatus.Unknown:O.NetworkStatus.Unavailable}else D("NetworkController - could not determine network status",t),i=O.NetworkStatus.Unknown}t||(this.messagingSystem.unsubscribe("NetworkController:networkDidChange",r),this.update((e=>{e.networkId=a,e.networkStatus=i,o===undefined?delete e.networkDetails.EIPS[1559]:e.networkDetails.EIPS[1559]=o})),e?i===O.NetworkStatus.Available?this.messagingSystem.publish("NetworkController:infuraIsUnblocked"):i===O.NetworkStatus.Blocked&&this.messagingSystem.publish("NetworkController:infuraIsBlocked"):this.messagingSystem.publish("NetworkController:infuraIsUnblocked"))}))}setProviderType(e){return k(this,void 0,void 0,(function*(){A.strict.notStrictEqual(e,M.NetworkType.rpc,`NetworkController - cannot call "setProviderType" with type "${M.NetworkType.rpc}". Use "setActiveNetwork"`),A.strict.ok(H(e),`Unknown Infura provider type "${e}".`),E(this,a,this.state.providerConfig,"f");const t=e in M.NetworksTicker&&M.NetworksTicker[e].length>0?M.NetworksTicker[e]:"ETH";T(this,n,"m",g).call(this),this.update((r=>{r.providerConfig.type=e,r.providerConfig.ticker=t,r.providerConfig.chainId=M.ChainId[e],r.providerConfig.rpcPrefs=M.BUILT_IN_NETWORKS[e].rpcPrefs,r.providerConfig.rpcUrl=undefined,r.providerConfig.nickname=undefined,r.providerConfig.id=undefined})),yield T(this,n,"m",d).call(this)}))}setActiveNetwork(e){return k(this,void 0,void 0,(function*(){E(this,a,this.state.providerConfig,"f");const t=this.state.networkConfigurations[e];if(!t)throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration`);T(this,n,"m",g).call(this),this.update((e=>{e.providerConfig.type=M.NetworkType.rpc,e.providerConfig.rpcUrl=t.rpcUrl,e.providerConfig.chainId=t.chainId,e.providerConfig.ticker=t.ticker,e.providerConfig.nickname=t.nickname,e.providerConfig.rpcPrefs=t.rpcPrefs,e.providerConfig.id=t.id})),yield T(this,n,"m",d).call(this)}))}getEIP1559Compatibility(){return k(this,void 0,void 0,(function*(){const{EIPS:e}=this.state.networkDetails;if(e[1559]!==undefined)return e[1559];if(!T(this,s,"f"))return!1;const t=yield T(this,n,"m",m).call(this);return this.update((e=>{e.networkDetails.EIPS[1559]=t})),t}))}resetConnection(){return k(this,void 0,void 0,(function*(){T(this,n,"m",g).call(this),yield T(this,n,"m",d).call(this)}))}upsertNetworkConfiguration(e,{referrer:t,source:r,setActive:s=!1}){return k(this,void 0,void 0,(function*(){const i=U(e,["rpcUrl","chainId","ticker","nickname","rpcPrefs"]),{rpcUrl:a,chainId:c,ticker:u}=i;if((0,N.assertIsStrictHexString)(c),!(0,M.isSafeChainId)(c))throw new Error(`Invalid chain ID "${c}": numerical value greater than max safe value.`);if(!a)throw new Error("An rpcUrl is required to add or update network configuration");if(!t||!r)throw new Error("referrer and source are required arguments for adding or updating a network configuration");try{new URL(a)}catch(e){if(e.message.includes("Invalid URL"))throw new Error("rpcUrl must be a valid URL")}if(!u)throw new Error("A ticker is required to add or update networkConfiguration");const l=T(this,n,"m",g).call(this),h=Object.values(this.state.networkConfigurations).find((e=>e.rpcUrl.toLowerCase()===a.toLowerCase())),d=h?h.id:(0,C.v4)(),f=V(d);this.update((e=>{e.networkConfigurations[d]=Object.assign({id:d},i)}));const p=l[B.NetworkClientType.Custom],m=p[f],y=m&&m.configuration.chainId!==c;return y&&m.destroy(),m&&!y||(p[f]=(0,R.createAutoManagedNetworkClient)({type:B.NetworkClientType.Custom,chainId:c,rpcUrl:a})),h||T(this,o,"f").call(this,{event:"Custom Network Added",category:"Network",referrer:{url:t},properties:{chain_id:c,symbol:u,source:r}}),s&&(yield this.setActiveNetwork(d)),d}))}removeNetworkConfiguration(e){if(!this.state.networkConfigurations[e])throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration`);const t=T(this,n,"m",g).call(this),r=V(e);this.update((t=>{delete t.networkConfigurations[e]}));const s=t[B.NetworkClientType.Custom];s[r].destroy(),delete s[r]}rollbackToPreviousProvider(){return k(this,void 0,void 0,(function*(){T(this,n,"m",g).call(this),this.update((e=>{e.providerConfig=T(this,a,"f")})),yield T(this,n,"m",d).call(this)}))}destroy(){var e;return k(this,void 0,void 0,(function*(){yield null===(e=T(this,l,"f"))||void 0===e?void 0:e.destroy()}))}loadBackup({networkConfigurations:e}){this.update((t=>{t.networkConfigurations=Object.assign(Object.assign({},t.networkConfigurations),e)}))}}r.NetworkController=J,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,n=new WeakSet,d=function(){return k(this,void 0,void 0,(function*(){this.messagingSystem.publish("NetworkController:networkWillChange"),this.update((e=>{e.networkId=null,e.networkStatus=O.NetworkStatus.Unknown,e.networkDetails={EIPS:{}}})),T(this,n,"m",_).call(this),this.messagingSystem.publish("NetworkController:networkDidChange"),yield this.lookupNetwork()}))},f=function(){return k(this,void 0,void 0,(function*(){return function(e){if("number"==typeof e&&!Number.isNaN(e))return`${e}`;if((0,N.isStrictHexString)(e))return`${(0,M.convertHexToDecimal)(e)}`;if("string"==typeof e&&/^\d+$/u.test(e))return e;throw new Error(`Cannot parse as a valid network ID: '${e}'`)}(yield new Promise(((e,t)=>{if(!T(this,s,"f"))throw new Error("Provider has not been initialized");T(this,s,"f").sendAsync({method:"net_version"},((r,n)=>{r?t(r):e(n)}))})))}))},p=function(){return new Promise(((e,t)=>{if(!T(this,s,"f"))throw new Error("Provider has not been initialized");T(this,s,"f").sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,n)=>{r?t(r):e(n)}))}))},m=function(){return k(this,void 0,void 0,(function*(){const e=yield T(this,n,"m",p).call(this);return(null==e?void 0:e.baseFeePerGas)!==undefined}))},g=function(){var e;const t=null!==(e=T(this,h,"f"))&&void 0!==e?e:T(this,n,"m",y).call(this);return E(this,h,t,"f"),t},y=function(){return[...T(this,n,"m",w).call(this),...T(this,n,"m",b).call(this),...T(this,n,"m",v).call(this)].reduce(((e,[t,r,n])=>{const s=(0,R.createAutoManagedNetworkClient)(n);return r in e[t]?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{[r]:s})})}),{[B.NetworkClientType.Infura]:{},[B.NetworkClientType.Custom]:{}})},w=function(){return K(M.InfuraNetworkType).map((e=>{const t=F(e),r={type:B.NetworkClientType.Infura,network:e,infuraProjectId:T(this,i,"f")};return[B.NetworkClientType.Infura,t,r]}))},b=function(){return Object.entries(this.state.networkConfigurations).map((([e,t])=>{if(t.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(t.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints");const r=V(e),n={type:B.NetworkClientType.Custom,chainId:t.chainId,rpcUrl:t.rpcUrl};return[B.NetworkClientType.Custom,r,n]}))},v=function(){const{providerConfig:e}=this.state;if(G(e)){Y(e);const t=V(e,this.state.networkConfigurations),r={chainId:e.chainId,rpcUrl:e.rpcUrl,type:B.NetworkClientType.Custom};return[[B.NetworkClientType.Custom,t,r]]}if($(e))return[];throw new Error(`Unrecognized network type: '${e.type}'`)},_=function(){if(!T(this,h,"f"))throw new Error("initializeProvider must be called first in order to switch the network");const{providerConfig:e}=this.state;let t;if($(e)){const r=B.NetworkClientType.Infura,n=F(e);if(t=T(this,h,"f")[r][n],!t)throw new Error(`Could not find custom network matching ${n}`)}else{if(!G(e))throw new Error("Could not determine type of provider config");{Y(e);const r=B.NetworkClientType.Custom,n=V(e,this.state.networkConfigurations);if(t=T(this,h,"f")[r][n],!t)throw new Error(`Could not find built-in network matching ${n}`)}}const{provider:r,blockTracker:n}=t;T(this,c,"f")?T(this,c,"f").setTarget(r):E(this,c,(0,I.createEventEmitterProxy)(r),"f"),E(this,u,r,"f"),T(this,l,"f")?T(this,l,"f").setTarget(n):E(this,l,(0,I.createEventEmitterProxy)(n,{eventFilter:"skipInternal"}),"f"),E(this,s,new P.default(T(this,c,"f")),"f")}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/NetworkController.js"}],[1311,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.INFURA_BLOCKED_KEY=r.NetworkStatus=void 0,function(e){e.Unknown="unknown",e.Available="available",e.Unavailable="unavailable",e.Blocked="blocked"}(r.NetworkStatus||(r.NetworkStatus={})),r.INFURA_BLOCKED_KEY="countryBlocked"}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/constants.js"}],[1312,{"./create-network-client":1313},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAutoManagedNetworkClient=void 0;const n=e("./create-network-client"),s="__target__",i={__UNINITIALIZED__:!0};r.createAutoManagedNetworkClient=function(e){let t;const r=new Proxy(i,{get(r,i,o){if(i===s)return null==t?void 0:t.provider;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like `createNetworkClient` didn't return anything. Perhaps it's being mocked?");const{provider:a}=t;if(i in a){const e=a[i];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,i){if(i===s)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{provider:o}=t;return i in o}}),o=new Proxy(i,{get(r,i,o){if(i===s)return null==t?void 0:t.blockTracker;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like createNetworkClient returned undefined. Perhaps it's mocked?");const{blockTracker:a}=t;if(i in a){const e=a[i];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,i){if(i===s)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{blockTracker:o}=t;return i in o}});return{configuration:e,provider:r,blockTracker:o,destroy:()=>{null==t||t.destroy()}}}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-auto-managed-network-client.js"}],[1313,{"./types":1316,"@metamask/controller-utils":1095,"@metamask/eth-json-rpc-infura":1141,"@metamask/eth-json-rpc-middleware":1166,"@metamask/eth-json-rpc-provider":1190,"eth-block-tracker":2624,"json-rpc-engine":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){this&&this.__awaiter;Object.defineProperty(r,"__esModule",{value:!0}),r.createNetworkClient=void 0;const n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("@metamask/eth-json-rpc-provider"),o=e("@metamask/eth-json-rpc-infura"),a=e("eth-block-tracker"),c=e("@metamask/controller-utils"),u=e("./types");function l({network:e}){return(0,n.createScaffoldMiddleware)({eth_chainId:c.ChainId[e],net_version:c.NetworkId[e]})}r.createNetworkClient=function(e){const t=e.type===u.NetworkClientType.Infura?(0,o.createInfuraMiddleware)({network:e.network,projectId:e.infuraProjectId,maxAttempts:5,source:"metamask"}):(0,s.createFetchMiddleware)({btoa:global.btoa,fetch:global.fetch,rpcUrl:e.rpcUrl}),r=(0,i.providerFromMiddleware)(t),c={},d=new a.PollingBlockTracker(Object.assign(Object.assign({},c),{provider:r})),f=e.type===u.NetworkClientType.Infura?function({blockTracker:e,network:t,rpcProvider:r,rpcApiMiddleware:i}){return(0,n.mergeMiddleware)([l({network:t}),(0,s.createBlockCacheMiddleware)({blockTracker:e}),(0,s.createInflightCacheMiddleware)(),(0,s.createBlockRefMiddleware)({blockTracker:e,provider:r}),(0,s.createRetryOnEmptyMiddleware)({blockTracker:e,provider:r}),(0,s.createBlockTrackerInspectorMiddleware)({blockTracker:e}),i])}({blockTracker:d,network:e.network,rpcProvider:r,rpcApiMiddleware:t}):function({blockTracker:e,chainId:t,rpcApiMiddleware:r}){const i=[];return(0,n.mergeMiddleware)([...i,h(t),(0,s.createBlockRefRewriteMiddleware)({blockTracker:e}),(0,s.createBlockCacheMiddleware)({blockTracker:e}),(0,s.createInflightCacheMiddleware)(),(0,s.createBlockTrackerInspectorMiddleware)({blockTracker:e}),r])}({blockTracker:d,chainId:e.chainId,rpcApiMiddleware:t}),p=new n.JsonRpcEngine;return p.push(f),{configuration:e,provider:(0,i.providerFromEngine)(p),blockTracker:d,destroy:()=>{d.destroy()}}};const h=e=>(t,r,n,s)=>"eth_chainId"===t.method?(r.result=e,s()):n()}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-network-client.js"}],[1314,{"./NetworkController":1310,"./constants":1311},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./NetworkController"),r),s(e("./constants"),r)}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/index.js"}],[1315,{"@metamask/utils":1654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("network-controller")}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/logger.js"}],[1316,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkClientType=void 0,function(e){e.Custom="custom",e.Infura="infura"}(r.NetworkClientType||(r.NetworkClientType={}))}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/types.js"}],[1317,{"@metamask/base-controller":1090,"@metamask/utils":1654,nanoid:1319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationController=void 0;const n=e("nanoid"),s=e("@metamask/utils"),i=e("@metamask/base-controller"),o="NotificationController",a={notifications:{persist:!0,anonymous:!1}},c={notifications:{}};class u extends i.BaseControllerV2{constructor({messenger:e,state:t}){super({name:o,metadata:a,messenger:e,state:Object.assign(Object.assign({},c),t)}),this.messagingSystem.registerActionHandler(`${o}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${o}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${o}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${o}:clear`,(()=>this.clear()))}show(e,t){const r=(0,n.nanoid)(),s={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=s}))}dismiss(e){this.update((t=>{for(const r of e)(0,s.hasProperty)(t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)(0,s.hasProperty)(t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>Object.assign({},c)))}}r.NotificationController=u}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/NotificationController.js"}],[1318,{"./NotificationController":1317},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./NotificationController"),r)}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1319,{"./url-alphabet/index.cjs":1320},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let o="";for(;;){let t=r(s),a=s;for(;a--;)if(o+=e[t[a]&n]||"",o.length===i)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[132,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];var i={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[1320,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[1324,{"./ObservableStore":1326},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1325,{"./ObservableStore":1326},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1326,{"@metamask/safe-event-emitter":1430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1327,{stream:2339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1328,{"./ComposedStore":1324,"./MergedStore":1325,"./ObservableStore":1326,"./asStream":1327,"./transform":1329},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1329,{through2:1330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[133,{"../../../shared/constants/network":4324,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");var i={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},o=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;o&&n!==o&&(e.NetworkController.provider.chainId=o);return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[1330,{_process:3761,"readable-stream":4056,util:2342,xtend:4304},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}s(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),o.call(this,this.options)}return s(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/obs-store>through2",file:"node_modules/@metamask/obs-store/node_modules/through2/through2.js"}],[134,{"../../../shared/constants/network":4324,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");var i={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},o={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){o[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{o[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:o[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":o[e]["0x3"]=r[e].ropsten;break;case"rinkeby":o[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:o[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":o[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=o}}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[1344,{"./utils":1346,"@metamask/base-controller":1090,"@metamask/controller-utils":1095,"eth-phishing-detect/src/detector":2733,"punycode/":3825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},h=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const f=e("@metamask/base-controller"),p=e("@metamask/controller-utils"),m=d(e("eth-phishing-detect/src/detector")),g=e("punycode/"),y=e("./utils");var w,b;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.metafi.codefi.network",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.HOTLIST_REFRESH_INTERVAL=1800,r.STALELIST_REFRESH_INTERVAL=345600,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,function(e){e.PhishfortHotlist="phishfort_hotlist",e.EthPhishingDetectConfig="eth_phishing_detect_config"}(w=r.ListKeys||(r.ListKeys={})),function(e){e.MetaMask="MetaMask",e.Phishfort="Phishfort"}(b=r.ListNames||(r.ListNames={}));const v={[b.Phishfort]:w.PhishfortHotlist,[b.MetaMask]:w.EthPhishingDetectConfig};r.phishingListKeyNameMap={[w.EthPhishingDetectConfig]:b.MetaMask,[w.PhishfortHotlist]:b.Phishfort};class _ extends f.BaseController{constructor(e,t){super(e,t),n.add(this),s.set(this,void 0),i.set(this,void 0),this.name="PhishingController",this.defaultConfig={stalelistRefreshInterval:r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:r.HOTLIST_REFRESH_INTERVAL},this.defaultState={phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0},this.initialize(),this.updatePhishingDetector()}updatePhishingDetector(){this.detector=new m.default(this.state.phishingLists)}setStalelistRefreshInterval(e){this.configure({stalelistRefreshInterval:e},!1,!1)}setHotlistRefreshInterval(e){this.configure({hotlistRefreshInterval:e},!1,!1)}isStalelistOutOfDate(){return(0,y.fetchTimeNow)()-this.state.stalelistLastFetched>=this.config.stalelistRefreshInterval}isHotlistOutOfDate(){return(0,y.fetchTimeNow)()-this.state.hotlistLastFetched>=this.config.hotlistRefreshInterval}maybeUpdateState(){return c(this,void 0,void 0,(function*(){if(this.isStalelistOutOfDate())return void(yield this.updateStalelist());this.isHotlistOutOfDate()&&(yield this.updateHotlist())}))}test(e){const t=(0,g.toASCII)(e);return this.state.whitelist.includes(t)?{result:!1,type:"all"}:this.detector.check(t)}bypass(e){const t=(0,g.toASCII)(e),{whitelist:r}=this.state;r.includes(t)||this.update({whitelist:[...r,t]})}updateHotlist(){return c(this,void 0,void 0,(function*(){if(u(this,s,"f"))yield u(this,s,"f");else try{l(this,s,u(this,n,"m",a).call(this),"f"),yield u(this,s,"f")}finally{l(this,s,undefined,"f")}}))}updateStalelist(){return c(this,void 0,void 0,(function*(){if(u(this,i,"f"))yield u(this,i,"f");else try{l(this,i,u(this,n,"m",o).call(this),"f"),yield u(this,i,"f")}finally{l(this,i,undefined,"f")}}))}queryConfig(e){return c(this,void 0,void 0,(function*(){const t=yield(0,p.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===(null==t?void 0:t.status)?yield t.json():null}))}}r.PhishingController=_,s=new WeakMap,i=new WeakMap,n=new WeakSet,o=function(){return c(this,void 0,void 0,(function*(){if(this.disabled)return;let e,t;try{e=yield this.queryConfig(r.METAMASK_STALELIST_URL).then((e=>e)),(null==e?void 0:e.data)&&e.data.lastUpdated>0&&(t=yield this.queryConfig(`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,y.fetchTimeNow)();this.update({stalelistLastFetched:e,hotlistLastFetched:e})}if(!e||!t)return;const n=e.data,{phishfort_hotlist:s,eth_phishing_detect_config:i}=n,o=h(n,["phishfort_hotlist","eth_phishing_detect_config"]),a=Object.assign(Object.assign(Object.assign({},s),o),{fuzzylist:[],allowlist:[],name:r.phishingListKeyNameMap.phishfort_hotlist}),c=Object.assign(Object.assign(Object.assign({},i),o),{name:r.phishingListKeyNameMap.eth_phishing_detect_config}),u=(0,y.applyDiffs)(a,t.data,w.PhishfortHotlist),l=(0,y.applyDiffs)(c,t.data,w.EthPhishingDetectConfig);this.update({phishingLists:[l,u]}),this.updatePhishingDetector()}))},a=function(){return c(this,void 0,void 0,(function*(){if(this.disabled)return;const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=yield this.queryConfig(`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update({hotlistLastFetched:(0,y.fetchTimeNow)()})}if(!(null==t?void 0:t.data))return;const n=t.data,s=this.state.phishingLists.map((e=>(0,y.applyDiffs)(e,n,v[e.name])));this.update({phishingLists:s}),this.updatePhishingDetector()}))},r.default=_}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.js"}],[1345,{"./PhishingController":1344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./PhishingController"),r)}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.js"}],[1346,{"./PhishingController":1344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.applyDiffs=r.fetchTimeNow=void 0;const n=e("./PhishingController");r.fetchTimeNow=()=>Math.round(Date.now()/1e3);const s=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};r.applyDiffs=(e,t,r)=>{const i=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&s(n)[0]===r));let o=e.lastUpdated;const a={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of i){const i=s(t)[1];n>o&&(o=n),e?a[i].delete(r):a[i].add(r)}return{allowlist:Array.from(a.allowlist),blocklist:Array.from(a.blocklist),fuzzylist:Array.from(a.fuzzylist),version:e.version,name:n.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:o}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.js"}],[135,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[136,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}var i={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[1366,{"@metamask/base-controller":1090,"eth-rpc-errors":2738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitController=void 0;const s=e("eth-rpc-errors"),i=e("@metamask/base-controller"),o="RateLimitController",a={requests:{persist:!1,anonymous:!1}};class c extends i.BaseControllerV2{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:s}){const i={requests:Object.keys(s).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:o,metadata:a,messenger:r,state:Object.assign(Object.assign({},i),n)}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${o}:call`,((e,t,...r)=>this.call(e,t,...r)))}call(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw s.ethErrors.rpc.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}))}isRateLimited(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitCount)&&void 0!==r?r:this.rateLimitCount;return this.state.requests[e][t]>=n}recordRequest(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitTimeout)&&void 0!==r?r:this.rateLimitTimeout;this.update((r=>{var s;const i=null!==(s=r.requests[e][t])&&void 0!==s?s:0;r.requests[e][t]=i+1,0===i&&setTimeout((()=>this.resetRequestCount(e,t)),n)}))}resetRequestCount(e,t){this.update((r=>{r.requests[e][t]=0}))}}r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/RateLimitController.js"}],[1367,{"./RateLimitController":1366},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./RateLimitController"),r)}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[137,{"../../../shared/constants/network":4324,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");var i={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??o})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[o],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};r.default=i;const o="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[138,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[139,{"../../../shared/modules/random-id":4359,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};var o={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[14,{"../../../shared/constants/app":4316,"../../../shared/constants/keyring":4321,"../../../shared/constants/metametrics":4323,"@metamask/base-controller":1090,"@metamask/message-manager":1299,events:2336,loglevel:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),s=l(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends o.BaseControllerV2{constructor({messenger:e,keyringController:t,getState:r,metricsEvent:s}){super({name:"EncryptionPublicKeyController",metadata:d,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),h(this,"hub",void 0),h(this,"_keyringController",void 0),h(this,"_getState",void 0),h(this,"_encryptionPublicKeyManager",void 0),h(this,"_metricsEvent",void 0),this._keyringController=t,this._getState=r,this._metricsEvent=s,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch((await this._keyringController.getKeyringForAccount(e)).type){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._keyringController.getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:a.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[140,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[141,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[142,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";var i={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[143,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[144,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[1442,{"@metamask/base-controller":1090,"@metamask/controller-utils":1095,"@metamask/message-manager":1299,buffer:2335,"eth-rpc-errors":2738,"ethereumjs-util":2774,events:2336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,o,a,c,u,l,h,d,f,p,m,g,y,w,b,v,_,k,E,T,S,A,I,P=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},x=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},C=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},j=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},M=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureController=void 0;const N=M(e("events")),O=e("lodash"),L=e("@metamask/message-manager"),B=e("eth-rpc-errors"),R=e("ethereumjs-util"),D=e("@metamask/base-controller"),K=e("@metamask/controller-utils"),U={unapprovedMsgs:{persist:!1,anonymous:!1},unapprovedPersonalMsgs:{persist:!1,anonymous:!1},unapprovedTypedMessages:{persist:!1,anonymous:!1},unapprovedMsgCount:{persist:!1,anonymous:!1},unapprovedPersonalMsgCount:{persist:!1,anonymous:!1},unapprovedTypedMessagesCount:{persist:!1,anonymous:!1}};class H extends D.BaseControllerV2{constructor({messenger:e,keyringController:t,isEthSignEnabled:r,getAllState:l,securityProviderRequest:h,getCurrentChainId:d}){super({name:"SignatureController",metadata:U,messenger:e,state:{unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0}}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),x(this,s,t,"f"),x(this,i,r,"f"),x(this,o,l,"f"),this.hub=new N.default,x(this,a,new L.MessageManager(undefined,undefined,h),"f"),x(this,c,new L.PersonalMessageManager(undefined,undefined,h),"f"),x(this,u,new L.TypedMessageManager(undefined,undefined,h,undefined,d),"f"),C(this,n,"m",v).call(this,C(this,a,"f"),"unapprovedMessage"),C(this,n,"m",v).call(this,C(this,c,"f"),"unapprovedPersonalMessage"),C(this,n,"m",v).call(this,C(this,u,"f"),"unapprovedTypedMessage"),C(this,n,"m",_).call(this,C(this,a,"f"),((e,t,r)=>{e.unapprovedMsgs=t,e.unapprovedMsgCount=r})),C(this,n,"m",_).call(this,C(this,c,"f"),((e,t,r)=>{e.unapprovedPersonalMsgs=t,e.unapprovedPersonalMsgCount=r})),C(this,n,"m",_).call(this,C(this,u,"f"),((e,t,r)=>{e.unapprovedTypedMessages=t,e.unapprovedTypedMessagesCount=r}))}get unapprovedMsgCount(){return C(this,a,"f").getUnapprovedMessagesCount()}get unapprovedPersonalMessagesCount(){return C(this,c,"f").getUnapprovedMessagesCount()}get unapprovedTypedMessagesCount(){return C(this,u,"f").getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0})))}rejectUnapproved(e){C(this,n,"m",m).call(this,C(this,a,"f"),e),C(this,n,"m",m).call(this,C(this,c,"f"),e),C(this,n,"m",m).call(this,C(this,u,"f"),e)}clearUnapproved(){C(this,n,"m",g).call(this,C(this,a,"f")),C(this,n,"m",g).call(this,C(this,c,"f")),C(this,n,"m",g).call(this,C(this,u,"f"))}newUnsignedMessage(e,t){return P(this,void 0,void 0,(function*(){return C(this,n,"m",h).call(this,C(this,a,"f"),K.ApprovalType.EthSign,"Message",C(this,n,"m",d).bind(this),e,t,C(this,n,"m",l).bind(this))}))}newUnsignedPersonalMessage(e,t){return P(this,void 0,void 0,(function*(){return C(this,n,"m",h).call(this,C(this,c,"f"),K.ApprovalType.PersonalSign,"Personal Message",C(this,n,"m",f).bind(this),e,t)}))}newUnsignedTypedMessage(e,t,r){return P(this,void 0,void 0,(function*(){return C(this,n,"m",h).call(this,C(this,u,"f"),K.ApprovalType.EthSignTypedData,"Typed Message",C(this,n,"m",p).bind(this),e,t,undefined,r,{parseJsonData:!0})}))}setTypedMessageInProgress(e){C(this,u,"f").setMessageStatusInProgress(e)}setPersonalMessageInProgress(e){C(this,c,"f").setMessageStatusInProgress(e)}}r.SignatureController=H,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,n=new WeakSet,l=function(e){if(!C(this,i,"f").call(this))throw B.ethErrors.rpc.methodNotFound("eth_sign has been disabled. You must enable it in the advanced settings");const t=C(this,n,"m",T).call(this,e.data);if(66!==t.length&&67!==t.length)throw B.ethErrors.rpc.invalidParams("eth_sign requires 32 byte message hash")},h=function(e,t,r,s,i,o,a,c,u){return P(this,void 0,void 0,(function*(){a&&a(i);const l=yield e.addUnapprovedMessage(i,o,c),h=Object.assign(Object.assign({},i),{metamaskId:l}),d=e.waitForFinishStatus(h,r);try{yield C(this,n,"m",A).call(this,h,t)}catch(t){throw d.catch((()=>{})),C(this,n,"m",b).call(this,e,l),B.ethErrors.provider.userRejectedRequest(`MetaMask ${r} Signature: User denied message signature.`)}return yield s(h,c,u),d}))},d=function(e){return P(this,void 0,void 0,(function*(){return yield C(this,n,"m",y).call(this,C(this,a,"f"),K.ApprovalType.EthSign,e,(e=>P(this,void 0,void 0,(function*(){return yield C(this,s,"f").signMessage(e)}))))}))},f=function(e){return P(this,void 0,void 0,(function*(){return yield C(this,n,"m",y).call(this,C(this,c,"f"),K.ApprovalType.PersonalSign,e,(e=>P(this,void 0,void 0,(function*(){return yield C(this,s,"f").signPersonalMessage(e)}))))}))},p=function(e,t,r){return P(this,void 0,void 0,(function*(){return yield C(this,n,"m",y).call(this,C(this,u,"f"),K.ApprovalType.EthSignTypedData,e,(e=>P(this,void 0,void 0,(function*(){const i=(null==r?void 0:r.parseJsonData)?C(this,n,"m",I).call(this,e,t):e;return yield C(this,s,"f").signTypedMessage(i,{version:t})}))))}))},m=function(e,t){Object.keys(e.getUnapprovedMessages()).forEach((r=>{C(this,n,"m",b).call(this,e,r,t)}))},g=function(e){e.update({unapprovedMessages:{},unapprovedMessagesCount:0})},y=function(e,t,r,s){return P(this,void 0,void 0,(function*(){console.info(`MetaMaskController - ${t}`);const i=r.metamaskId;try{const n=yield e.approveMessage(r),o=yield s(n);return this.hub.emit(`${t}:signed`,{signature:o,messageId:i}),n.deferSetAsSigned||e.setMessageStatusSigned(i,o),o}catch(r){throw console.info(`MetaMaskController - ${t} failed.`,r),C(this,n,"m",w).call(this,e,i,r.message),r}}))},w=function(e,t,r){e instanceof L.TypedMessageManager?e.setMessageStatusErrored(t,r):C(this,n,"m",b).call(this,e,t)},b=function(e,t,r){if(r){const e=C(this,n,"m",S).call(this,t);this.hub.emit("cancelWithReason",{message:e,reason:r})}e.rejectMessage(t)},v=function(e,t){e.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),e.hub.on("unapprovedMessage",(e=>{this.hub.emit(t,e)}))},_=function(e,t){e.subscribe((e=>{const r=C(this,n,"m",k).call(this,e.unapprovedMessages);this.update((()=>{const n=Object.assign({},this.state);return t(n,r,e.unapprovedMessagesCount),n}))}))},k=function(e){const t={};for(const r of Object.keys(e)){const s=e[r],i=C(this,n,"m",E).call(this,s);t[r]=i}return t},E=function(e){const{messageParams:t}=e,r=j(e,["messageParams"]);return Object.assign(Object.assign({},r),{msgParams:t})},T=function(e){return"0x"===e.slice(0,2)?e:(0,R.bufferToHex)(t.from(e,"utf8"))},S=function(e){return Object.assign(Object.assign(Object.assign({},this.state.unapprovedMsgs),this.state.unapprovedPersonalMsgs),this.state.unapprovedTypedMessages)[e]},A=function(e,t){return P(this,void 0,void 0,(function*(){const r=e.metamaskId,n=e.origin||K.ORIGIN_METAMASK,s=(0,O.cloneDeep)(e);return this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t,requestData:s},!0)}))},I=function(e,t){return"V1"===t||"string"!=typeof e.data?e:Object.assign(Object.assign({},e),{data:JSON.parse(e.data)})}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/SignatureController.js"}],[1443,{"./SignatureController":1442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./SignatureController"),r)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/index.js"}],[1445,{"./constants":1446,"./types":1448,"./utils":1449,"@ethersproject/bignumber":454,"@ethersproject/bytes":457,"@ethersproject/providers":503,"@metamask/base-controller":1453,"@metamask/controller-utils":1455,"bignumber.js":1458,"lodash/cloneDeep":3590,"lodash/mapValues":3618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const s=e("@metamask/base-controller"),i=e("@metamask/controller-utils"),o=e("bignumber.js"),a=e("@ethersproject/bignumber"),c=e("@ethersproject/providers"),u=e("@ethersproject/bytes"),l=n(e("lodash/mapValues")),h=n(e("lodash/cloneDeep")),d=e("./types"),f=e("./utils"),p=e("./constants");r.DEFAULT_INTERVAL=5e3;class m extends s.BaseController{constructor({onNetworkStateChange:e,getNonceLock:t,getNetwork:n,provider:s,confirmExternalTransaction:i,trackMetaMetricsEvent:o},a,u){super(a,u),this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:p.CHAIN_IDS.ETHEREUM,clientId:"default",supportedChainIds:[p.CHAIN_IDS.ETHEREUM,p.CHAIN_IDS.RINKEBY]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0}},this.getNonceLock=t,this.getNetwork=n,this.ethersProvider=new c.Web3Provider(s),this.confirmExternalTransaction=i,this.trackMetaMetricsEvent=o,this.initialize(),this.initializeSmartTransactionsForChainId(),e((({providerConfig:e})=>{const{chainId:t}=e;this.configure({chainId:t}),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state),this.ethersProvider=new c.Web3Provider(s)})),this.subscribe((e=>this.checkPoll(e)))}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return f.handleFetch(e,n)}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(f.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(await i.safelyExecute((()=>this.updateSmartTransactions())),this.timeoutHandle=setInterval((()=>{i.safelyExecute((()=>this.updateSmartTransactions()))}),this.config.interval))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptIn:e})})}trackStxStatusChange(e,t){if(!t)return;let r=h.default(e);if(r=Object.assign(Object.assign({},h.default(t)),r),!r.swapMetaData||r.status===t.status&&t.swapMetaData)return;const n={stx_status:r.status,token_from_symbol:r.sourceTokenSymbol,token_to_symbol:r.destinationTokenSymbol,processing_time:f.getStxProcessingTime(r.time),stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0};this.trackMetaMetricsEvent({event:"STX Status Updated",category:"swaps",sensitiveProperties:n})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,s=n[t],i=null==s?void 0:s.findIndex((t=>t.uuid===e));return-1===i||i===undefined}updateSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,s=n[t],i=null==s?void 0:s.findIndex((t=>t.uuid===e.uuid)),o=this.isNewSmartTransaction(e.uuid);if(this.trackStxStatusChange(e,o?undefined:s[i]),o){const n=s.findIndex((t=>{var r,n,s;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(s=t.status)||void 0===s?void 0:s.startsWith("cancelled"))})),i=[h.default(e)],o=Object.assign(Object.assign({},e),{history:i}),a=n>-1?s.slice(0,n).concat(s.slice(n+1)).concat(o):s.concat(o);this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:a})})})}else{if((e.status===d.SmartTransactionStatuses.SUCCESS||e.status===d.SmartTransactionStatuses.REVERTED)&&!e.confirmed){const t=s[i],r=Object.assign(Object.assign({},t),e);this.confirmSmartTransaction(r)}this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:r.smartTransactions[t].map(((t,r)=>r===i?Object.assign(Object.assign({},t),e):t))})})})}}async updateSmartTransactions(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=(null==e?void 0:e[t]).filter(f.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r)}async confirmSmartTransaction(e){var t,r,n;const s=null===(t=e.statusMetadata)||void 0===t?void 0:t.minedHash;try{const t=await this.ethersProvider.getTransactionReceipt(s),i=await this.ethersProvider.getTransaction(s),o=null===(r=i.maxFeePerGas)||void 0===r?void 0:r.toHexString(),c=null===(n=i.maxPriorityFeePerGas)||void 0===n?void 0:n.toHexString();if(null==t?void 0:t.blockNumber){const r=await this.ethersProvider.getBlock(null==t?void 0:t.blockNumber,!1),n=null==r?void 0:r.baseFeePerGas.toHexString(),i=l.default(t,(e=>e instanceof a.BigNumber?e.toHexString():e)),u=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:o,maxPriorityFeePerGas:c}),h=Object.assign(Object.assign({},e),{id:e.uuid,status:"confirmed",hash:s,txParams:u}),d=f.snapshotFromTxMeta(h),p=f.replayHistory(h.history),m=f.generateHistoryEntry(p,d,"txStateManager: setting status to confirmed"),g=m.length>0?Object.assign(Object.assign({},h),{history:h.history.concat(m)}):h;this.confirmExternalTransaction(g,i,n),this.trackMetaMetricsEvent({event:"STX Confirmed",category:"swaps"}),this.updateSmartTransaction(Object.assign(Object.assign({},e),{confirmed:!0}))}}catch(e){this.trackMetaMetricsEvent({event:"STX Confirmation Failed",category:"swaps"}),console.error("confirm error",e)}}async fetchSmartTransactionsStatus(e){const{chainId:t}=this.config,r=new URLSearchParams({uuids:e.join(",")}),n=`${f.getAPIRequestURL(d.APIType.BATCH_STATUS,t)}?${r.toString()}`,s=await this.fetch(n);return Object.entries(s).forEach((([e,t])=>{this.updateSmartTransaction({statusMetadata:t,status:f.calculateStatus(t),cancellable:f.isSmartTransactionCancellable(t),uuid:e})})),s}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t){const{chainId:r}=this.config,n=[];let s;if(t){const r=await this.addNonceToTransaction(t);n.push(r),s=Object.assign(Object.assign({},e),{nonce:f.incrementNonceInHex(r.nonce)})}else s=await this.addNonceToTransaction(e);n.push(s);const i=await this.fetch(f.getAPIRequestURL(d.APIType.GET_FEES,r),{method:"POST",body:JSON.stringify({txs:n})});let o,a;return t?(o=null==i?void 0:i.txs[0],a=null==i?void 0:i.txs[1]):a=null==i?void 0:i.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:{approvalTxFees:o,tradeTxFees:a}})}),{approvalTxFees:o,tradeTxFees:a}}async submitSignedTransactions({txParams:e,signedTransactions:t,signedCanceledTransactions:r}){const{chainId:n}=this.config,s=await this.fetch(f.getAPIRequestURL(d.APIType.SUBMIT_TRANSACTIONS,n),{method:"POST",body:JSON.stringify({rawTxs:t,rawCancelTxs:r})}),i=Date.now(),a=this.getNetwork();let c;try{const t=await this.ethersProvider.getBalance(null==e?void 0:e.from);c=new o.BigNumber(t.toHexString()).toString(16)}catch(e){console.error("ethers error",e)}const l=await this.getNonceLock(null==e?void 0:e.from);try{const t=u.hexlify(l.nextNonce);e&&!(null==e?void 0:e.nonce)&&(e.nonce=t);const{nonceDetails:r}=l;this.updateSmartTransaction({chainId:n,nonceDetails:r,metamaskNetworkId:a,preTxBalance:c,status:d.SmartTransactionStatuses.PENDING,time:i,txParams:e,uuid:s.uuid,cancellable:!0})}finally{l.releaseLock()}return s}async cancelSmartTransaction(e){const{chainId:t}=this.config;await this.fetch(f.getAPIRequestURL(d.APIType.CANCEL,t),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness(){const{chainId:e}=this.config;let t=!1;try{const r=await this.fetch(f.getAPIRequestURL(d.APIType.LIVENESS,e));t=Boolean(r.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{liveness:t})}),t}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){const{smartTransactions:r}=this.state.smartTransactionsState,{chainId:n}=this.config,s=null==r?void 0:r[n];return s&&0!==s.length?s.filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e})):[]}}r.default=m}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[1446,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_IDS=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.metaswap.codefi.network",r.CHAIN_IDS={ETHEREUM:"0x1",RINKEBY:"0x4",BSC:"0x38"}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[1447,{"./SmartTransactionsController":1445,"isomorphic-fetch":3403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch");const s=n(e("./SmartTransactionsController"));r.default=s.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[1448,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s;Object.defineProperty(r,"__esModule",{value:!0}),r.cancellationReasonToStatusMap=r.SmartTransactionStatuses=r.SmartTransactionCancellationReason=r.SmartTransactionMinedTx=r.APIType=void 0,function(e){e[e.GET_FEES=0]="GET_FEES",e[e.ESTIMATE_GAS=1]="ESTIMATE_GAS",e[e.SUBMIT_TRANSACTIONS=2]="SUBMIT_TRANSACTIONS",e[e.CANCEL=3]="CANCEL",e[e.BATCH_STATUS=4]="BATCH_STATUS",e[e.LIVENESS=5]="LIVENESS"}(r.APIType||(r.APIType={})),function(e){e.NOT_MINED="not_mined",e.SUCCESS="success",e.CANCELLED="cancelled",e.REVERTED="reverted",e.UNKNOWN="unknown"}(r.SmartTransactionMinedTx||(r.SmartTransactionMinedTx={})),function(e){e.WOULD_REVERT="would_revert",e.TOO_CHEAP="too_cheap",e.DEADLINE_MISSED="deadline_missed",e.INVALID_NONCE="invalid_nonce",e.USER_CANCELLED="user_cancelled",e.NOT_CANCELLED="not_cancelled",e.PREVIOUS_TX_CANCELLED="previous_tx_cancelled"}(n=r.SmartTransactionCancellationReason||(r.SmartTransactionCancellationReason={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.REVERTED="reverted",e.UNKNOWN="unknown",e.CANCELLED="cancelled",e.CANCELLED_WOULD_REVERT="cancelled_would_revert",e.CANCELLED_TOO_CHEAP="cancelled_too_cheap",e.CANCELLED_DEADLINE_MISSED="cancelled_deadline_missed",e.CANCELLED_INVALID_NONCE="cancelled_invalid_nonce",e.CANCELLED_USER_CANCELLED="cancelled_user_cancelled",e.CANCELLED_PREVIOUS_TX_CANCELLED="cancelled_previous_tx_cancelled",e.RESOLVED="resolved"}(s=r.SmartTransactionStatuses||(r.SmartTransactionStatuses={})),r.cancellationReasonToStatusMap={[n.WOULD_REVERT]:s.CANCELLED_WOULD_REVERT,[n.TOO_CHEAP]:s.CANCELLED_TOO_CHEAP,[n.DEADLINE_MISSED]:s.CANCELLED_DEADLINE_MISSED,[n.INVALID_NONCE]:s.CANCELLED_INVALID_NONCE,[n.USER_CANCELLED]:s.CANCELLED_USER_CANCELLED,[n.PREVIOUS_TX_CANCELLED]:s.CANCELLED_PREVIOUS_TX_CANCELLED}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/types.js"}],[1449,{"./constants":1446,"./types":1448,"@ethersproject/bytes":457,"bignumber.js":1458,"fast-json-patch":3026,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const s=n(e("fast-json-patch")),i=n(e("lodash")),o=e("bignumber.js"),a=e("@ethersproject/bytes"),c=e("./types"),u=e("./constants");r.isSmartTransactionPending=function(e){return e.status===c.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case c.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${r}/getFees`;case c.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${r}/estimateGas`;case c.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${r}/submitTransactions`;case c.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${r}/cancel`;case c.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${r}/batchStatus`;case c.APIType.LIVENESS:return`${u.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if(r.isSmartTransactionStatusResolved(e))return c.SmartTransactionStatuses.RESOLVED;const t=[c.SmartTransactionCancellationReason.WOULD_REVERT,c.SmartTransactionCancellationReason.TOO_CHEAP,c.SmartTransactionCancellationReason.DEADLINE_MISSED,c.SmartTransactionCancellationReason.INVALID_NONCE,c.SmartTransactionCancellationReason.USER_CANCELLED,c.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED)return c.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?c.cancellationReasonToStatusMap[e.cancellationReason]:c.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.SUCCESS)return c.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.CANCELLED)return c.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.REVERTED)return c.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.UNKNOWN)return c.SmartTransactionStatuses.UNKNOWN}return c.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return i.default.cloneDeep(e).reduce(((e,t)=>s.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,i.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!i.default.isObject(e))return e;const t=i.default.mapValues(e,(e=>i.default.isArray(e)?e.map(r.mapKeysToCamel):i.default.isObject(e)?r.mapKeysToCamel(e):e));return i.default.mapKeys(t,((e,t)=>i.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),s=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},r.mapKeysToCamel(s)))}`);return s};r.isSmartTransactionCancellable=e=>e.minedTx===c.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return a.hexlify(Number(t)+1)}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[145,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,o,a,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,h={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));const d={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=h,e.TokensController.allIgnoredTokens=d):e.TokensController={allTokens:h,allIgnoredTokens:d};return null==e||(null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens),null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.hiddenTokens,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1450,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1451,{immer:3380},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{const i=t[s][r],o=e[s];return"function"==typeof i?n[s]=i(o):i&&(n[s]=o),n}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1452,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1453,{"./BaseController":1450,"./BaseControllerV2":1451,"./ControllerMessenger":1452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1454,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.GANACHE_CHAIN_ID=r.RINKEBY_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=r.MAINNET=void 0,r.MAINNET="mainnet",r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.RINKEBY_CHAIN_ID="4",r.GANACHE_CHAIN_ID="1337",r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={RINKEBY:"RinkebyETH",GOERLI:"GoerliETH",ROPSTEN:"RopstenETH",KOVAN:"KovanETH"},r.TESTNET_NETWORK_TYPE_TO_TICKER_SYMBOL={rinkeby:"RinkebyETH",goerli:"GoerliETH",ropsten:"RopstenETH",kovan:"KovanETH",mainnet:"",rpc:"",localhost:""},r.OPENSEA_PROXY_URL="https://proxy.metaswap.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1"}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1455,{"./constants":1454,"./types":1456,"./util":1457,"isomorphic-fetch":3403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),e("isomorphic-fetch"),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1456,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksChainId=void 0,function(e){e.mainnet="1",e.kovan="42",e.rinkeby="4",e.goerli="5",e.ropsten="3",e.localhost="",e.rpc=""}(r.NetworksChainId||(r.NetworksChainId={}))}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1457,{buffer:2335,"eth-ens-namehash":2634,"ethereumjs-util":2774,"ethjs-unit":2812,"fast-deep-equal":3022},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.hasProperty=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=void 0;const i=e("ethereumjs-util"),o=e("ethjs-unit"),a=s(e("eth-ens-namehash")),c=s(e("fast-deep-equal")),u=new Error("timeout");function l(e){return new i.BN((0,i.stripHexPrefix)(e),16)}function h(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function d(e,t){return n(this,void 0,void 0,(function*(){const r=yield h(e,t);return yield r.json()}))}r.BNToHex=function(e){return(0,i.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new i.BN(t),s=new i.BN(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new i.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,o.toWei)(r,"gwei");if(n.length<=9)return(0,o.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let a=(0,o.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(a=a.add(new i.BN(1))),a},r.weiHexToGweiDec=function(e){const t=new i.BN((0,i.stripHexPrefix)(e),16);return(0,o.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"3":return"https://faucet.metamask.io/";case"4":return"https://www.rinkeby.io/";case"5":return"https://goerli-faucet.slock.it/";case"42":return"https://github.com/kovan-testnet/faucet";default:return undefined}},r.hexToBN=l,r.hexToText=function(e){try{const r=(0,i.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return i.BN.isBN(e)?e:new i.BN(l(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,i.isHexString)(e)?e:`0x${i.BN.isBN(e)?e.toString(16):new i.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,i.addHexPrefix)(e);return(0,i.isHexString)(t)?(0,i.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,i.addHexPrefix)(e):e;return!!(0,i.isHexString)(r)&&(0,i.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=h,r.handleFetch=d,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield d(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):yield d(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===u)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,i.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};r.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,c.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1458,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,s=e.length,i=e[0]+"";n<s;){for(t=e[n++]+"",r=u-t.length;r--;t="0"+t);i+=t}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function g(e,t){var r,n,s=e.c,i=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!s||!i)return n?0:!s^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=s.length)<(u=i.length)?c:u,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==i(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,s;if(t<0){for(s=r+".";++t;s+=r);e=s+e}else if(++t>(n=e.length)){for(s=r,t-=n;--t;s+=r);e+=s}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,_,k,E,T,S,A,I,P,x,C=$.prototype={constructor:$,toString:null,valueOf:null},j=new $(1),M=20,N=4,O=-7,L=21,B=-1e7,R=1e7,D=!1,K=1,U=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function $(e,t){var r,s,o,c,h,d,f,p,m=this;if(!(m instanceof $))return new $(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>R?m.c=m.e=null:e.e<B?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,h=e;h>=10;h/=10,c++);return void(c>R?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return k(m,p,d);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(c<0&&(c=h),c+=+p.slice(h+1),p=p.substring(0,h)):c<0&&(c=p.length)}else{if(y(t,2,F.length,"Base"),10==t&&V)return z(m=new $(e),M+m.e+1,N);if(p=String(e),d="number"==typeof e){if(0*e!=0)return k(m,p,d,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,$.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=F.slice(0,t),c=h=0,f=p.length;h<f;h++)if(r.indexOf(s=p.charAt(h))<0){if("."==s){if(h>c){c=f;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,h=-1,c=0;continue}return k(m,String(e),d,t)}d=!1,(c=(p=_(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(h=0;48===p.charCodeAt(h);h++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(h,++f)){if(f-=h,d&&$.DEBUG&&f>15&&(e>l||e!==i(e)))throw Error(a+m.s*e);if((c=c-h-1)>R)m.c=m.e=null;else if(c<B)m.c=[m.e=0];else{if(m.e=c,m.c=[],h=(c+1)%u,c<0&&(h+=u),h<f){for(h&&m.c.push(+p.slice(0,h)),f-=u;h<f;)m.c.push(+p.slice(h,h+=u));h=u-(p=p.slice(h)).length}else h-=f;for(;h--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function G(e,t,r,n){var s,i,o,a,c;if(null==r?r=N:y(r,0,8),!e.c)return e.toString();if(s=e.c[0],o=e.e,null==t)c=m(e.c),c=1==n||2==n&&(o<=O||o>=L)?b(c,o):v(c,o,"0");else if(i=(e=z(new $(e),t,r)).e,a=(c=m(e.c)).length,1==n||2==n&&(t<=i||i<=O)){for(;a<t;c+="0",a++);c=b(c,i)}else if(t-=o,c=v(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&s?"-"+c:c}function Y(e,t){for(var r,n=1,s=new $(e[0]);n<e.length;n++){if(!(r=new $(e[n])).s){s=r;break}t.call(s,r)&&(s=r)}return s}function J(e,t,r){for(var n=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,n++);return(r=n+r*u-1)>R?e.c=e.e=null:r<B?e.c=[e.e=0]:(e.e=r,e.c=t),e}function z(e,t,r,n){var o,a,l,d,f,p,m,g=e.c,y=h;if(g){e:{for(o=1,d=g[0];d>=10;d/=10,o++);if((a=t-o)<0)a+=u,l=t,m=(f=g[p=0])/y[o-l-1]%10|0;else if((p=s((a+1)/u))>=g.length){if(!n)break e;for(;g.length<=p;g.push(0));f=m=0,o=1,l=(a%=u)-u+1}else{for(f=d=g[p],o=1;d>=10;d/=10,o++);m=(l=(a%=u)-u+o)<0?0:f/y[o-l-1]%10|0}if(n=n||t<0||null!=g[p+1]||(l<0?f:f%y[o-l-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?l>0?f/y[o-l]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=p,d=1,p--):(g.length=p+1,d=y[u-a],g[p]=l>0?i(f/y[o-l]%y[l])*d:0),n)for(;;){if(0==p){for(a=1,l=g[0];l>=10;l/=10,a++);for(l=g[0]+=d,d=1;l>=10;l/=10,d++);a!=d&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=d,g[p]!=c)break;g[p--]=0,d=1}for(a=g.length;0===g[--a];g.pop());}e.e>R?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function W(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=O||r>=L?b(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,f,t),M=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),N=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-f,0,t),y(r[1],0,f,t),O=r[0],L=r[1]):(y(r,-f,f,t),O=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-f,-1,t),y(r[1],1,f,t),B=r[0],R=r[1];else{if(y(r,-f,f,t),!r)throw Error(o+t+" cannot be zero: "+r);B=-(R=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(o+"crypto unavailable");D=r}else D=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),K=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,f,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);H=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);V="0123456789"==r.slice(0,10),F=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:N,EXPONENTIAL_AT:[O,L],RANGE:[B,R],CRYPTO:D,MODULO_MODE:K,POW_PRECISION:U,FORMAT:H,ALPHABET:F}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,r,n=e.c,s=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&s>=-f&&s<=f&&s===i(s)){if(0===n[0]){if(0===s&&1===n.length)return!0;break e}if((t=(s+1)%u)<1&&(t+=u),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==i(r))break e;if(0!==r)return!0}}}else if(null===n&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return Y(arguments,C.lt)},$.minimum=$.min=function(){return Y(arguments,C.gt)},$.random=(E=9007199254740992,T=Math.random()*E&2097151?function(){return i(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,c,l=0,d=[],p=new $(j);if(null==e?e=M:y(e,0,f),a=s(e/u),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(d.push(c%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw D=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(d.push(c%1e14),l+=7);l=a/7}if(!D)for(;l<a;)(c=T())<9e15&&(d[l++]=c%1e14);for(a=d[--l],e%=u,a&&e&&(c=h[u-e],d[l]=i(a/c)*c);0===d[l];d.pop(),l--);if(l<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=u);for(l=1,c=d[0];c>=10;c/=10,l++);l<u&&(n-=u-l)}return p.e=n,p.c=d,p}),$.sum=function(){for(var e=1,t=arguments,r=new $(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var s,i,o=[0],a=0,c=e.length;a<c;){for(i=o.length;i--;o[i]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),s=0;s<o.length;s++)o[s]>r-1&&(null==o[s+1]&&(o[s+1]=0),o[s+1]+=o[s]/r|0,o[s]%=r)}return o.reverse()}return function(n,s,i,o,a){var c,u,l,h,d,f,p,g,y=n.indexOf("."),w=M,b=N;for(y>=0&&(h=U,U=0,n=n.replace(".",""),f=(g=new $(s)).pow(n.length-y),U=h,g.c=t(v(m(f.c),f.e,"0"),10,i,e),g.e=g.c.length),l=h=(p=t(n,s,i,a?(c=F,e):(c=e,F))).length;0==p[--h];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=r(f,g,w,b,i)).c,d=f.r,l=f.e),y=p[u=l+w+1],h=i/2,d=d||u<0||null!=p[u+1],d=b<4?(null!=y||d)&&(0==b||b==(f.s<0?3:2)):y>h||y==h&&(4==b||d||6==b&&1&p[u-1]||b==(f.s<0?8:7)),u<1||!p[0])n=d?v(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(p.length=u,d)for(--i;++p[--u]>i;)p[u]=0,u||(++l,p=[1].concat(p));for(h=p.length;!p[--h];);for(y=0,n="";y<=h;n+=c.charAt(p[y++]));n=v(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,s,i,o,a=0,c=e.length,u=t%d,l=t/d|0;for(e=e.slice();c--;)a=((s=u*(i=e[c]%d)+(n=l*i+(o=e[c]/d|0)*u)%d*d+a)/r|0)+(n/d|0)+l*o,e[c]=s%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var s,i;if(r!=n)i=r>n?1:-1;else for(s=i=0;s<r;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function r(e,t,r,n){for(var s=0;r--;)e[r]-=s,s=e[r]<t[r]?1:0,e[r]=s*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,s,o,a,l){var h,d,f,m,g,y,w,b,v,_,k,E,T,S,A,I,P,x=n.s==s.s?1:-1,C=n.c,j=s.c;if(!(C&&C[0]&&j&&j[0]))return new $(n.s&&s.s&&(C?!j||C[0]!=j[0]:j)?C&&0==C[0]||!j?0*x:x/0:NaN);for(v=(b=new $(x)).c=[],x=o+(d=n.e-s.e)+1,l||(l=c,d=p(n.e/u)-p(s.e/u),x=x/u|0),f=0;j[f]==(C[f]||0);f++);if(j[f]>(C[f]||0)&&d--,x<0)v.push(1),m=!0;else{for(S=C.length,I=j.length,f=0,x+=2,(g=i(l/(j[0]+1)))>1&&(j=e(j,g,l),C=e(C,g,l),I=j.length,S=C.length),T=I,k=(_=C.slice(0,I)).length;k<I;_[k++]=0);P=j.slice(),P=[0].concat(P),A=j[0],j[1]>=l/2&&A++;do{if(g=0,(h=t(j,_,I,k))<0){if(E=_[0],I!=k&&(E=E*l+(_[1]||0)),(g=i(E/A))>1)for(g>=l&&(g=l-1),w=(y=e(j,g,l)).length,k=_.length;1==t(y,_,w,k);)g--,r(y,I<w?P:j,w,l),w=y.length,h=1;else 0==g&&(h=g=1),w=(y=j.slice()).length;if(w<k&&(y=[0].concat(y)),r(_,y,k,l),k=_.length,-1==h)for(;t(j,_,I,k)<1;)g++,r(_,I<k?P:j,k,l),k=_.length}else 0===h&&(g++,_=[0]);v[f++]=g,_[0]?_[k++]=C[T]||0:(_=[C[T]],k=1)}while((T++<S||null!=_[0])&&x--);m=null!=_[0],v[0]||v.splice(0,1)}if(l==c){for(f=1,x=v[0];x>=10;x/=10,f++);z(b,o+(b.e=f+d*u-1)+1,a,m)}else b.e=d,b.r=+m;return b}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,I=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(e,t,r,n){var s,i=r?t:t.replace(x,"");if(P.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(S,(function(e,t,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=s?e:t})),n&&(s=n,i=i.replace(A,"$1").replace(I,"0.$1")),t!=i))return new $(i,s);if($.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new $(e,t))},C.decimalPlaces=C.dp=function(e,t){var r,n,s,i=this;if(null!=e)return y(e,0,f),null==t?t=N:y(t,0,8),z(new $(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((s=r.length-1)-p(this.e/u))*u,s=r[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(e,t){return r(this,new $(e,t),M,N)},C.dividedToIntegerBy=C.idiv=function(e,t){return r(this,new $(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var r,n,a,c,l,h,d,f,p=this;if((e=new $(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+W(e));if(null!=t&&(t=new $(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new $(Math.pow(+W(p),l?e.s*(2-w(e)):+W(e))),t?f.mod(t):f;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(n=!h&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&w(e)?-0:0,p.e>-1&&(c=1/c),new $(h?1/c:c);U&&(c=s(U/u+2))}for(l?(r=new $(.5),h&&(e.s=1),d=w(e)):d=(a=Math.abs(+W(e)))%2,f=new $(j);;){if(d){if(!(f=f.times(p)).c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}if(a){if(0===(a=i(a/2)))break;d=a%2}else if(z(e=e.times(r),e.e+1,1),e.e>14)d=w(e);else{if(0===(a=+W(e)))break;d=a%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?f:(h&&(f=j.div(f)),t?f.mod(t):c?z(f,U,N,undefined):f)},C.integerValue=function(e){var t=new $(this);return null==e?e=N:y(e,0,8),z(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new $(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new $(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new $(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new $(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new $(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var r,n,s,i,o=this,a=o.s;if(t=(e=new $(e,t)).s,!a||!t)return new $(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/u,h=e.e/u,d=o.c,f=e.c;if(!l||!h){if(!d||!f)return d?(e.s=-t,e):new $(f?o:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new $(d[0]?o:3==N?-0:0)}if(l=p(l),h=p(h),d=d.slice(),a=l-h){for((i=a<0)?(a=-a,s=d):(h=l,s=f),s.reverse(),t=a;t--;s.push(0));s.reverse()}else for(n=(i=(a=d.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(d[t]!=f[t]){i=d[t]<f[t];break}if(i&&(s=d,d=f,f=s,e.s=-e.s),(t=(n=f.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=c-1;n>a;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=c}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--h);return d[0]?J(e,d,h):(e.s=3==N?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var n,s,i=this;return e=new $(e,t),!i.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||i.c&&!i.c[0]?new $(i):(9==K?(s=e.s,e.s=1,n=r(i,e,0,3),e.s=s,n.s*=s):n=r(i,e,0,K),(e=i.minus(n.times(e))).c[0]||1!=K||(e.s=i.s),e)},C.multipliedBy=C.times=function(e,t){var r,n,s,i,o,a,l,h,f,m,g,y,w,b,v,_=this,k=_.c,E=(e=new $(e,t)).c;if(!(k&&E&&k[0]&&E[0]))return!_.s||!e.s||k&&!k[0]&&!E||E&&!E[0]&&!k?e.c=e.e=e.s=null:(e.s*=_.s,k&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(_.e/u)+p(e.e/u),e.s*=_.s,(l=k.length)<(m=E.length)&&(w=k,k=E,E=w,s=l,l=m,m=s),s=l+m,w=[];s--;w.push(0));for(b=c,v=d,s=m;--s>=0;){for(r=0,g=E[s]%v,y=E[s]/v|0,i=s+(o=l);i>s;)r=((h=g*(h=k[--o]%v)+(a=y*h+(f=k[o]/v|0)*g)%v*v+w[i]+r)/b|0)+(a/v|0)+y*f,w[i--]=h%b;w[i]=r}return r?++n:w.splice(0,1),J(e,w,n)},C.negated=function(){var e=new $(this);return e.s=-e.s||null,e},C.plus=function(e,t){var r,n=this,s=n.s;if(t=(e=new $(e,t)).s,!s||!t)return new $(NaN);if(s!=t)return e.s=-t,n.minus(e);var i=n.e/u,o=e.e/u,a=n.c,l=e.c;if(!i||!o){if(!a||!l)return new $(s/0);if(!a[0]||!l[0])return l[0]?e:new $(a[0]?n:0*s)}if(i=p(i),o=p(o),a=a.slice(),s=i-o){for(s>0?(o=i,r=l):(s=-s,r=a),r.reverse();s--;r.push(0));r.reverse()}for((s=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=s),s=0;t;)s=(a[--t]=a[t]+l[t]+s)/c|0,a[t]=c===a[t]?0:a[t]%c;return s&&(a=[s].concat(a),++o),J(e,a,o)},C.precision=C.sd=function(e,t){var r,n,s,i=this;if(null!=e&&e!==!!e)return y(e,1,f),null==t?t=N:y(t,0,8),z(new $(i),e,t);if(!(r=i.c))return null;if(n=(s=r.length-1)*u+1,s=r[s]){for(;s%10==0;s/=10,n--);for(s=r[0];s>=10;s/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},C.shiftedBy=function(e){return y(e,-9007199254740991,l),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,n,s,i,o=this,a=o.c,c=o.s,u=o.e,l=M+4,h=new $("0.5");if(1!==c||!a||!a[0])return new $(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+W(o)))||c==1/0?(((t=m(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),n=new $(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new $(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(i=n,n=h.times(i.plus(r(o,i,l,1))),m(i.c).slice(0,c)===(t=m(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(n,n.e+M+2,1),e=!n.times(n).eq(o));break}if(!s&&(z(i,i.e+M+2,0),i.times(i).eq(o))){n=i;break}l+=4,c+=4,s=1}return z(n,n.e+M+1,N,e)},C.toExponential=function(e,t){return null!=e&&(y(e,0,f),e++),G(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(y(e,0,f),e=e+this.e+1),G(this,e,t)},C.toFormat=function(e,t,r){var n,s=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=H;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=s.toFixed(e,t),s.c){var i,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",h=a[0],d=a[1],f=s.s<0,p=f?h.slice(1):h,m=p.length;if(u&&(i=c,c=u,u=i,m-=i),c>0&&m>0){for(i=m%c||c,h=p.substr(0,i);i<m;i+=c)h+=l+p.substr(i,c);u>0&&(h+=l+p.slice(i)),f&&(h="-"+h)}n=d?h+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):h}return(r.prefix||"")+n+(r.suffix||"")},C.toFraction=function(e){var t,n,s,i,a,c,l,d,f,p,g,y,w=this,b=w.c;if(null!=e&&(!(l=new $(e)).isInteger()&&(l.c||1!==l.s)||l.lt(j)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+W(l));if(!b)return new $(w);for(t=new $(j),f=n=new $(j),s=d=new $(j),y=m(b),a=t.e=y.length-w.e-1,t.c[0]=h[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?a>0?t:f:l,c=R,R=1/0,l=new $(y),d.c[0]=0;p=r(l,t,0,1),1!=(i=n.plus(p.times(s))).comparedTo(e);)n=s,s=i,f=d.plus(p.times(i=f)),d=i,t=l.minus(p.times(i=t)),l=i;return i=r(e.minus(n),s,0,1),d=d.plus(i.times(f)),n=n.plus(i.times(s)),d.s=f.s=w.s,g=r(f,s,a*=2,N).minus(w).abs().comparedTo(r(d,n,a,N).minus(w).abs())<1?[f,s]:[d,n],R=c,g},C.toNumber=function(){return+W(this)},C.toPrecision=function(e,t){return null!=e&&y(e,1,f),G(this,e,t,2)},C.toString=function(e){var t,r=this,n=r.s,s=r.e;return null===s?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=s<=O||s>=L?b(m(r.c),s):v(m(r.c),s,"0"):10===e&&V?t=v(m((r=z(new $(r),M+s+1,N)).c),r.e,"0"):(y(e,2,F.length,"Base"),t=_(v(m(r.c),s,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return W(this)},C._isBigNumber=!0,null!=t&&$.set(t),$}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[146,{"../../../shared/constants/transaction":4336,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");const i="sentEther";var o={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=s.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=s.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}};r.default=o}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[147,{lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[148,{"../../../shared/constants/hardware-wallets":4320,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/hardware-wallets");var i={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?s.LedgerTransportTypes.webhid:s.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?s.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[149,{"../../../shared/constants/network":4324,"bignumber.js":2222,lodash:3617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/network");const a=e=>new i.default(e||"0x0",16).gt(0);var c={version:67,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},l=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},h=o.TEST_CHAINS.includes(null==u?void 0:u.chainId),d=Object.values(c).some((({chainId:e})=>o.TEST_CHAINS.includes(e))),f=o.TEST_CHAINS.some((e=>Object.values(l[e]||{}).some(a))),p=h||d||f,m={...e,PreferencesController:{...s,preferences:{...i,showTestNetworks:p}}};return m}(t.data);return t.data=r,t}};r.default=c}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[15,{"../../../../shared/constants/network":4324,"@ethersproject/providers":503,"ethereum-ens-network-map":2753},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@ethersproject/providers"),i=(n=e("ethereum-ens-network-map"))&&n.__esModule?n:{default:n},o=e("../../../../shared/constants/network");r.default=class{static getNetworkEnsSupport(e){return Boolean(i.default[e])}constructor({network:e,provider:t}={}){const r=o.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP[e],n=i.default[e],a=new s.Web3Provider(t,{chainId:parseInt(e,10),name:r,ensAddress:n});this._ethProvider=a}lookup(e){return this._ethProvider.resolveName(e)}reverse(e){return this._ethProvider.lookupAddress(e)}}}}},{package:"$root$",file:"app/scripts/controllers/ens/ens.js"}]],[],{});