LavaPack.loadBundle([[5399,{"../../../../shared/constants/metametrics":4323,"../../../../shared/constants/swaps":4331,"../../../../shared/lib/swaps-utils":4341,"../../../../shared/lib/token-util.ts":4343,"../../../../shared/lib/transactions-controller-utils":4344,"../../../../shared/modules/conversion.utils":4350,"../../../../shared/modules/string-utils":4363,"../../../../shared/modules/swaps.utils":4364,"../../../components/component-library":4792,"../../../components/component-library/banner-alert":4755,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../contexts/i18n":5029,"../../../contexts/metametrics":5030,"../../../ducks/metamask/metamask":5044,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/design-system":5052,"../../../helpers/constants/routes":5057,"../../../helpers/utils/util":5093,"../../../hooks/useEqualityCheck":5113,"../../../hooks/useEthFiatAmount":5114,"../../../hooks/usePrevious":5120,"../../../hooks/useTokenFiatAmount":5132,"../../../hooks/useTokenTracker":5133,"../../../hooks/useTokensToSearch":5134,"../../../selectors":5449,"../../../store/actions":5456,"../import-token":5388,"../list-with-search/list-with-search":5390,"../selected-token/selected-token":5417,"../swaps-banner-alert/swaps-banner-alert":5428,"../swaps-footer":5429,"../swaps.util":5431,"../transaction-settings/transaction-settings":5432,"./quotes-loading-animation":5400,"./review-quote":5401,"./smart-transactions-popover":5402,"@metamask/etherscan-link":1274,"bignumber.js":2222,classnames:2376,lodash:3617,"prop-types":3766,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Z;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=Y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=Q(e("bignumber.js")),o=Q(e("prop-types")),s=e("react-redux"),i=e("lodash"),l=e("react-router-dom"),u=e("@metamask/etherscan-link"),c=Q(e("classnames")),d=e("../../../contexts/metametrics"),p=e("../../../hooks/useTokensToSearch"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../contexts/i18n"),g=e("../../../ducks/metamask/metamask"),T=Q(e("../../../components/ui/box")),h=e("../../../helpers/constants/design-system"),E=e("../../../ducks/swaps/swaps"),_=e("../../../selectors"),S=e("../../../../shared/modules/conversion.utils"),v=e("../../../helpers/utils/util"),y=e("../../../hooks/usePrevious"),w=e("../../../hooks/useTokenTracker"),b=e("../../../hooks/useTokenFiatAmount"),k=e("../../../hooks/useEthFiatAmount"),A=e("../../../../shared/modules/swaps.utils"),I=e("../../../../shared/constants/metametrics"),C=e("../../../../shared/constants/swaps"),N=e("../../../store/actions"),O=e("../swaps.util"),P=e("../../../../shared/lib/token-util.ts"),R=e("../../../../shared/modules/string-utils"),M=e("../../../../shared/lib/transactions-controller-utils"),x=e("../../../../shared/lib/swaps-utils"),D=e("../../../components/component-library"),L=e("../../../components/component-library/text/deprecated"),F=e("../../../components/component-library/banner-alert"),B=e("../../../helpers/constants/routes"),j=Q(e("../import-token")),q=Q(e("../transaction-settings/transaction-settings")),W=Q(e("../swaps-banner-alert/swaps-banner-alert")),U=Q(e("../swaps-footer")),G=Q(e("../selected-token/selected-token")),H=Q(e("../list-with-search/list-with-search")),V=Q(e("./smart-transactions-popover")),K=Q(e("./quotes-loading-animation")),$=Q(e("./review-quote"));function Q(e){return e&&e.__esModule?e:{default:e}}function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Y=function(e){return e?a:t})(e)}const X=15;let z;function Z({ethBalance:e,selectedAccountAddress:t,shuffledTokensList:a}){const o=(0,n.useContext)(f.I18nContext),Q=(0,s.useDispatch)(),Y=(0,l.useHistory)(),Z=(0,n.useContext)(d.MetaMetricsContext),[J,ee]=(0,n.useState)(undefined),[te,ae]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(),[oe,se]=(0,n.useState)(!1),ie=()=>se(!1),[le,ue]=(0,n.useState)(!1),ce=()=>ue(!1),[de,pe]=(0,n.useState)(!1),[me,fe]=(0,n.useState)(null),[ge,Te]=(0,n.useState)(""),[he,Ee]=(0,n.useState)(""),[_e,Se]=(0,n.useState)(0),[ve,ye]=(0,n.useState)(!1),[we,be]=(0,n.useState)(!1),ke=(0,s.useSelector)(E.getIsFeatureFlagLoaded),Ae=(0,s.useSelector)(E.getBalanceError),Ie=(0,s.useSelector)(E.getFetchParams,i.isEqual),{sourceTokenInfo:Ce={},destinationTokenInfo:Ne={}}=(null==Ie?void 0:Ie.metaData)||{},Oe=(0,s.useSelector)(g.getTokens,i.isEqual),Pe=(0,s.useSelector)(E.getTopAssets,i.isEqual),Re=(0,s.useSelector)(E.getFromToken,i.isEqual),Me=(0,s.useSelector)(E.getFromTokenInputValue),xe=(0,s.useSelector)(E.getFromTokenError),De=(0,s.useSelector)(E.getMaxSlippage),Le=(0,s.useSelector)(E.getToToken,i.isEqual)||Ne,Fe=(0,s.useSelector)(_.getSwapsDefaultToken,i.isEqual),Be=(0,s.useSelector)(_.getCurrentChainId),je=(0,s.useSelector)(_.getRpcPrefsForCurrentProvider,s.shallowEqual),qe=(0,s.useSelector)(_.getTokenList,i.isEqual),We=(0,s.useSelector)(E.getQuotes,i.isEqual),Ue=(0,s.useSelector)(E.getLatestAddedTokenTo,i.isEqual),Ge=Object.keys(We).length,He=Ge>0,Ve=(0,s.useSelector)(E.getSwapsErrorKey),Ke=(0,s.useSelector)(E.getAggregatorMetadata,s.shallowEqual),$e=(0,s.useSelector)(E.getTransactionSettingsOpened,s.shallowEqual),Qe=Ke?Object.keys(Ke).length:0,Ye=(0,s.useSelector)(_.getTokenExchangeRates,i.isEqual),Xe=(0,s.useSelector)(g.getConversionRate),ze=(0,s.useSelector)(_.isHardwareWallet),Ze=(0,s.useSelector)(_.getHardwareWalletType),Je=(0,s.useSelector)(E.getSmartTransactionsOptInStatus),et=(0,s.useSelector)(E.getSmartTransactionsEnabled),tt=(0,s.useSelector)(E.getCurrentSmartTransactionsEnabled),at=tt&&Je,nt=Je!==undefined,rt=(0,s.useSelector)(E.getCurrentSmartTransactionsError),ot=(0,s.useSelector)(_.getCurrentCurrency),st=(0,s.useSelector)(E.getFetchingQuotes),it=!st&&He,lt=et&&!nt,ut=(0,A.isSwapsDefaultTokenSymbol)(null==Ce?void 0:Ce.symbol,Be)?Fe:Ce,{tokensWithBalances:ct}=(0,w.useTokenTracker)(Oe),dt=!(0,A.isSwapsDefaultTokenSymbol)(null==Re?void 0:Re.symbol,Be)&&null!=Re&&Re.balance?[Re]:[],pt=(0,i.uniqBy)([...ct,...Oe,...dt],"address"),mt=(0,m.useEqualityCheck)(pt),ft=(0,p.getRenderableTokenData)(Re||ut,Ye,Xe,ot,Be,qe),gt=(0,p.useTokensToSearch)({usersTokens:mt,topTokens:Pe,shuffledTokensList:a,tokenBucketPriority:C.TokenBucketPriority.owned}),Tt=(0,p.useTokensToSearch)({usersTokens:mt,topTokens:Pe,shuffledTokensList:a,tokenBucketPriority:C.TokenBucketPriority.top}),ht=gt.find((({address:e})=>(0,R.isEqualCaseInsensitive)(e,null==Le?void 0:Le.address)))||Le,Et=(null==ht?void 0:ht.address)&&!(0,A.isSwapsDefaultTokenAddress)(null==ht?void 0:ht.address,Be),_t=Number((null==ht?void 0:ht.occurances)||(null==ht?void 0:ht.occurrences)||0),{address:St,symbol:vt,string:yt,decimals:wt,balance:bt}=ft||{},{address:kt}=ht||{},At=bt&&(0,M.calcTokenAmount)(bt,wt).toString(10),It=(0,y.usePrevious)(At),Ct=(0,b.useTokenFiatAmount)(St,Me||0,vt,{showFiat:!0},!0),Nt=(0,k.useEthFiatAmount)(Me||0,{showFiat:!0},!0),Ot=(0,A.isSwapsDefaultTokenSymbol)(vt,Be)?Nt:Ct,Pt=(0,n.useCallback)(((e,t)=>{Q((0,E.setFromTokenInputValue)(e));const a=new r.default(e||0).gt(t||0);Ae!==a&&Q((0,E.setBalanceError)(a)),Q((0,E.setFromTokenError)(Re&&(0,O.countDecimals)(e)>Re.decimals?"tooManyDecimals":null))}),[Q,Re,Ae]);(0,n.useEffect)((()=>{let e;if(!ve)return void Se(0);e=it?20:500+Math.floor(1500*Math.random());const t=setTimeout((()=>{_e<Qe?Se(_e+1):_e===Qe&&it&&(async()=>{await Q((0,N.setBackgroundSwapRouteState)("")),ye(!1),Ve!==C.ERROR_FETCHING_QUOTES&&Ve!==C.QUOTES_NOT_AVAILABLE_ERROR||Q((0,N.setSwapsErrorKey)(C.QUOTES_NOT_AVAILABLE_ERROR))})()}),e);return function(){clearTimeout(t)}}),[st,_e,it,Ge,Q,Y,Ve,Qe,ve]);const Rt=e=>{null!=e&&e.address&&!Ot&&null!==J?(0,O.fetchTokenPrice)(e.address).then((e=>{null!==e&&e!==undefined&&ee(e)})):ee(null),null!=e&&e.address&&!mt.find((t=>(0,R.isEqualCaseInsensitive)(t.address,e.address)))&&(0,P.fetchTokenBalance)(e.address,t,global.ethereumProvider).then((t=>{if(null!=t&&t.balance){const a=t.balance.toString(10),n=(0,M.calcTokenAmount)(a,e.decimals);Q((0,E.setSwapsFromToken)({...e,string:n.toString(10),balance:a}))}})),Q((0,E.setSwapsFromToken)(e)),Pt(Me,e.string,e.decimals)},Mt=(0,u.getTokenTrackerLink)(ht.address,Be,null,null,{blockExplorerUrl:C.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[Be]??null}),xt=je.blockExplorerUrl?(0,v.getURLHostName)(Mt):o("etherscan"),{address:Dt}=Le||{},Lt=(0,n.useCallback)((e=>{Ue&&e.address!==Dt&&Q((0,N.ignoreTokens)({tokensToIgnore:Dt,dontShowLoadingIndicator:!0})),Q((0,E.setSwapToToken)(e)),ae(!1)}),[Q,Ue,Dt]),Ft=ct.find((e=>(0,R.isEqualCaseInsensitive)(e.address,null==Re?void 0:Re.address))),Bt=(0,y.usePrevious)(Ft);(0,n.useEffect)((()=>{const e=!(0,A.isSwapsDefaultTokenAddress)(null==Ft?void 0:Ft.address,Be),t=(0,R.isEqualCaseInsensitive)(null==Ft?void 0:Ft.address,null==Bt?void 0:Bt.address),a=(null==Ft?void 0:Ft.balance)!==(null==Bt?void 0:Bt.balance);e&&t&&a&&Q((0,E.setSwapsFromToken)({...Re,balance:null==Ft?void 0:Ft.balance,string:null==Ft?void 0:Ft.string}))}),[Q,Ft,Bt,Re,Be]),(0,n.useEffect)((()=>{(0,A.isSwapsDefaultTokenAddress)(null==Re?void 0:Re.address,Be)&&(null==Re?void 0:Re.balance)!==(0,S.hexToDecimal)(e)&&Q((0,E.setSwapsFromToken)({...Re,balance:(0,S.hexToDecimal)(e),string:(0,S.getValueFromWeiHex)({value:e,numberOfDecimals:4,toDenomination:"ETH"})}))}),[Q,Re,e,Be]),(0,n.useEffect)((()=>{null!=Re&&Re.symbol||null!=ut&&ut.symbol||Q((0,E.setSwapsFromToken)(Fe))}),[]),(0,n.useEffect)((()=>{It!==At&&Pt(Me,At)}),[Pt,It,Me,At]);const jt=(0,n.useCallback)((()=>{Z({event:"Prepare Swap Page Loaded",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{is_hardware_wallet:ze,hardware_wallet_type:Ze,stx_enabled:et,current_stx_enabled:tt,stx_user_opt_in:Je}})}),[Z,ze,Ze,et,tt,Je]);(0,n.useEffect)((()=>{Q((0,N.resetSwapsPostFetchState)()),Q((0,E.setReviewSwapClickedTimestamp)()),jt()}),[Q,jt]);const qt=()=>n.default.createElement("a",{className:"prepare-swap-page__token-etherscan-link",key:"prepare-swap-page-etherscan-link",onClick:()=>{Z({event:I.MetaMetricsEventName.ExternalLinkClicked,category:I.MetaMetricsEventCategory.Swaps,properties:{link_type:I.MetaMetricsEventLinkType.TokenTracker,location:"Swaps Confirmation",url_domain:(0,v.getURLHostName)(Mt)}}),global.platform.openTab({url:Mt})},target:"_blank",rel:"noopener noreferrer"},xt),Wt=`${o("balance")}: ${yt||"0"}`,Ut=`${o("balance")}: ${(null==ht?void 0:ht.string)||"0"}`,Gt=(0,x.shouldEnableDirectWrapping)(Be,St,ht.address),Ht=xe||!ke||!Number(Me)||!(null!=ht&&ht.address)||!St||Number(De)<0||Number(De)>X||Et&&_t<2&&!te;let Vt;(0,n.useEffect)((()=>{Q((0,N.clearSwapsQuotes)()),Q((0,N.stopPollingForQuotes)());return z=setTimeout((()=>{z=null,Ht||(at&&(0,N.clearSmartTransactionFees)(),(async()=>{ye(!0),await Q((0,E.fetchQuotesAndSetQuoteState)(Y,Me,De,Z,!0))})())}),1e3),()=>clearTimeout(z)}),[Q,Y,De,Z,Ht,Me,St,kt,Je,at]),Vt=Ve&&Ve===C.QUOTES_NOT_AVAILABLE_ERROR?o("swapQuotesNotAvailableErrorTitle"):Ht?null!=ht&&ht.address&&St?o("swapEnterAmount"):o("swapSelectToken"):o("swapFetchingQuotes");const Kt=(0,n.useCallback)((e=>(0,R.isEqualCaseInsensitive)(e.address,St)),[St]),$t=(0,n.useCallback)((e=>(0,R.isEqualCaseInsensitive)(e.address,null==ht?void 0:ht.address)),[null==ht?void 0:ht.address]),Qt=!Ve&&!Ht&&He,Yt=!Ve&&!Ht&&!He,Xt=!xe&&Ae&&vt,zt=1===_t;(0,n.useEffect)((()=>{Ve===C.QUOTES_EXPIRED_ERROR&&Y.push(B.SWAPS_NOTIFICATION_ROUTE)}),[Ve,Y]),(0,n.useEffect)((()=>{Yt&&re("")}),[Yt]);const Zt={onImportTokenCloseClick:()=>{pe(!1)},onImportTokenClick:()=>{Z({event:"Token Imported",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{symbol:null==me?void 0:me.symbol,address:null==me?void 0:me.address,chain_id:Be,is_hardware_wallet:ze,hardware_wallet_type:Ze,stx_enabled:et,current_stx_enabled:tt,stx_user_opt_in:Je}}),null==Lt||Lt(me),fe(null)},setIsImportTokenModalOpen:pe,tokenForImport:me};let Jt,ea,ta;ne&&!Ht&&(Jt=(0,O.formatSwapsValueForDisplay)(ne),ea=(0,O.getClassNameForCharLength)(Jt,"prepare-swap-page__receive-amount")),Me&&(ta=(0,O.getClassNameForCharLength)(Me,"prepare-swap-page__from-token-amount"));const aa=vt&&!(0,A.isSwapsDefaultTokenSymbol)(vt,Be)&&bt>0;return n.default.createElement("div",{className:"prepare-swap-page"},n.default.createElement("div",{className:"prepare-swap-page__content"},me&&de&&n.default.createElement(j.default,Zt),n.default.createElement(D.Modal,{onClose:ie,isOpen:oe,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(D.ModalOverlay,null),n.default.createElement(D.ModalContent,null,n.default.createElement(D.ModalHeader,{onClose:ie},o("swapSwapTo")),n.default.createElement(T.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:h.DISPLAY.FLEX},n.default.createElement(H.default,{selectedItem:ht,itemsToSearch:Tt,onClickItem:e=>{null==Lt||Lt(e),ie()},maxListItems:30,searchQuery:he,setSearchQuery:Ee,hideItemIf:Kt,shouldSearchForImports:!0,onOpenImportTokenModalClick:e=>{fe(e),pe(!0),ie(),Ee("")}})))),n.default.createElement(D.Modal,{onClose:ce,isOpen:le,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(D.ModalOverlay,null),n.default.createElement(D.ModalContent,null,n.default.createElement(D.ModalHeader,{onClose:ce},o("swapSwapFrom")),n.default.createElement(T.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:h.DISPLAY.FLEX},n.default.createElement(H.default,{selectedItem:ft,itemsToSearch:gt,onClickItem:e=>{null==Rt||Rt(e),ce()},maxListItems:30,searchQuery:ge,setSearchQuery:Te,hideItemIf:$t})))),lt&&n.default.createElement(V.default,{onEnableSmartTransactionsClick:()=>(0,N.setSmartTransactionsOptInStatus)(!0,Je),onCloseSmartTransactionsOptInPopover:e=>{null==e||e.preventDefault(),(0,N.setSmartTransactionsOptInStatus)(!1,Je)}}),n.default.createElement("div",{className:"prepare-swap-page__swap-from-content"},n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.spaceBetween,alignItems:h.AlignItems.center},n.default.createElement(G.default,{onClick:()=>ue(!0),onClose:ce,selectedToken:ft,testId:"prepare-swap-page-swap-from"}),n.default.createElement(T.default,{display:h.DISPLAY.FLEX,alignItems:h.AlignItems.center},n.default.createElement(D.TextField,{className:(0,c.default)("prepare-swap-page__from-token-amount",{[ta]:ta}),size:h.Size.SM,placeholder:"0",onChange:e=>{e.stopPropagation();const t="."===e.target.value?"0.":e.target.value;""===t||/^(\.\d+|\d+(\.\d+)?|\d+\.)$/u.test(t)?Pt(t,At):Pt(Me||"",At)},value:Me,truncate:!1,testId:"prepare-swap-page-from-token-amount"}))),n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.spaceBetween,alignItems:h.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},vt&&Wt,aa&&n.default.createElement("div",{className:"prepare-swap-page__max-balance","data-testid":"prepare-swap-page-max-balance",onClick:()=>Pt(At||"0",At)},o("max"))),Me&&Ot&&n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.flexEnd,alignItems:h.AlignItems.flexEnd},n.default.createElement(L.Text,{variant:h.TextVariant.bodySm,color:h.TextColor.textAlternative},Ot))),Xt&&n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:h.TextVariant.bodySmBold,color:h.TextColor.textAlternative,marginTop:0},o("swapsNotEnoughToken",[vt]))),xe&&n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:h.TextVariant.bodySmBold,color:h.TextColor.textAlternative,marginTop:0},o("swapTooManyDecimalsError",[vt,wt]))),n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.center,height:0},n.default.createElement("div",{className:(0,c.default)("prepare-swap-page__switch-tokens",{"prepare-swap-page__switch-tokens--rotate":we,"prepare-swap-page__switch-tokens--disabled":Yt}),"data-testid":"prepare-swap-page-switch-tokens",onClick:()=>{Yt||(Lt(ft),Rt(ht),be(!we))},title:o("swapSwapSwitch")},n.default.createElement(D.Icon,{name:D.IconName.Arrow2Down,size:D.IconSize.Lg})))),n.default.createElement("div",{className:"prepare-swap-page__swap-to-content"},n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.spaceBetween,alignItems:h.AlignItems.center},n.default.createElement(G.default,{onClick:()=>se(!0),onClose:ie,selectedToken:ht,testId:"prepare-swap-page-swap-to"}),n.default.createElement(T.default,{display:h.DISPLAY.FLEX,alignItems:h.AlignItems.center,marginLeft:2,className:"prepare-swap-page__receive-amount-container"},n.default.createElement(L.Text,{as:"h6","data-testid":"prepare-swap-page-receive-amount",className:(0,c.default)("prepare-swap-page__receive-amount",{[ea]:ea})},Jt))),n.default.createElement(T.default,{display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.spaceBetween,alignItems:h.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},(null==ht?void 0:ht.string)&&Ut))),!Qt&&Et&&_t<2&&n.default.createElement(T.default,{display:h.DISPLAY.FLEX,marginTop:2},n.default.createElement(F.BannerAlert,{severity:zt?h.SEVERITIES.WARNING:h.SEVERITIES.DANGER,title:o(zt?"swapTokenVerifiedOn1SourceTitle":"swapTokenAddedManuallyTitle"),width:h.BLOCK_SIZES.FULL},n.default.createElement(T.default,null,n.default.createElement(L.Text,{variant:h.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},zt?o("swapTokenVerifiedOn1SourceDescription",[null==ht?void 0:ht.symbol,n.default.createElement(qt,{key:"block-explorer-link"})]):o("swapTokenAddedManuallyDescription",[n.default.createElement(qt,{key:"block-explorer-link"})])),!te&&n.default.createElement(D.ButtonLink,{size:h.Size.INHERIT,textProps:{variant:h.TextVariant.bodyMd,alignItems:h.AlignItems.flexStart},onClick:e=>{e.preventDefault(),ae(!0)}},o("swapContinueSwapping"))))),Ve&&n.default.createElement(T.default,{display:h.DISPLAY.FLEX,marginTop:2},n.default.createElement(W.default,{swapsErrorKey:Ve})),$e&&(et||!et&&!Gt)&&n.default.createElement(q.default,{onSelect:e=>{Q((0,E.setMaxSlippage)(e))},maxAllowedSlippage:X,currentSlippage:De,smartTransactionsEnabled:et,smartTransactionsOptInStatus:Je,setSmartTransactionsOptInStatus:N.setSmartTransactionsOptInStatus,currentSmartTransactionsError:rt,isDirectWrappingEnabled:Gt,onModalClose:()=>{Q((0,E.setTransactionSettingsOpened)(!1))}}),Yt&&n.default.createElement(K.default,{quoteCount:_e,numberOfAggregators:Qe}),Qt&&n.default.createElement($.default,{setReceiveToAmount:re})),!He&&n.default.createElement(U.default,{submitText:Vt,disabled:!0,hideCancel:!0,showTermsOfService:!0}))}Z.propTypes={ethBalance:o.default.string,selectedAccountAddress:o.default.string,shuffledTokensList:o.default.array}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/prepare-swap-page.js"}],[5400,{"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,"../mascot-background-animation/mascot-background-animation":5396,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=e("../../../contexts/i18n"),s=c(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library/text/deprecated"),u=c(e("../mascot-background-animation/mascot-background-animation"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){const{quoteCount:t,numberOfAggregators:a}=e,r=(0,n.useContext)(o.I18nContext);return n.default.createElement(s.default,{marginTop:4,display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,flexDirection:i.FLEX_DIRECTION.COLUMN},n.default.createElement(s.default,{display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},n.default.createElement(l.Text,{variant:i.TextVariant.bodyMd,as:"h6",color:i.TextColor.textAlternative,marginLeft:1,marginRight:1},r("swapFetchingQuote")),n.default.createElement(l.Text,{variant:i.TextVariant.bodyMdBold,as:"h6",color:i.TextColor.textAlternative},r("swapQuoteNofM",[Math.min(t+1,a),a]))),n.default.createElement(u.default,null))}p.propTypes={quoteCount:r.default.number.isRequired,numberOfAggregators:r.default.number.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/quotes-loading-animation.js"}],[5401,{"../../../../app/scripts/lib/util":82,"../../../../shared/constants/gas":4319,"../../../../shared/constants/metametrics":4323,"../../../../shared/constants/network":4324,"../../../../shared/constants/swaps":4331,"../../../../shared/lib/metamask-controller-utils":4339,"../../../../shared/lib/swaps-utils":4341,"../../../../shared/lib/transactions-controller-utils":4344,"../../../../shared/modules/conversion.utils":4350,"../../../../shared/modules/string-utils":4363,"../../../../shared/modules/transaction.utils":4365,"../../../components/component-library":4792,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../components/ui/info-tooltip":4946,"../../../contexts/i18n":5029,"../../../contexts/metametrics":5030,"../../../ducks/metamask/metamask":5044,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/design-system":5052,"../../../helpers/constants/routes":5057,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":5086,"../../../hooks/gasFeeInput/useGasFeeInputs":5099,"../../../hooks/useEqualityCheck":5113,"../../../hooks/useEthFiatAmount":5114,"../../../hooks/usePrevious":5120,"../../../hooks/useTokenTracker":5133,"../../../selectors":5449,"../../../store/actionConstants":5455,"../../../store/actions":5456,"../../confirm-approve/confirm-approve.util":5156,"../countdown-timer":5376,"../exchange-rate-display":5384,"../select-quote-popover":5410,"../swaps-footer":5429,"../swaps.util":5431,"./view-quote-price-difference":5403,"@sentry/browser":1752,"bignumber.js":2222,classnames:2376,lodash:3617,"prop-types":3766,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Z;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=Y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=Q(e("bignumber.js")),i=e("lodash"),l=Q(e("classnames")),u=e("@sentry/browser"),c=Q(e("prop-types")),d=e("../../../contexts/i18n"),p=Q(e("../select-quote-popover")),m=e("../../../hooks/useEthFiatAmount"),f=e("../../../hooks/useEqualityCheck"),g=e("../../../hooks/usePrevious"),T=e("../../../hooks/gasFeeInput/useGasFeeInputs"),h=e("../../../contexts/metametrics"),E=e("../../../ducks/swaps/swaps"),_=e("../../../selectors"),S=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../store/actionConstants"),w=e("../../../helpers/constants/routes"),b=e("../../../../shared/constants/network"),k=e("../../../../shared/modules/conversion.utils"),A=e("../../confirm-approve/confirm-approve.util"),I=e("../swaps.util"),C=e("../../../hooks/useTokenTracker"),N=e("../../../../shared/constants/swaps"),O=e("../../../../shared/constants/gas"),P=Q(e("../countdown-timer")),R=Q(e("../swaps-footer")),M=Q(e("../../../components/ui/box")),x=e("../../../helpers/constants/design-system"),D=e("../../../components/component-library"),L=e("../../../components/component-library/text/deprecated"),F=e("../../../../shared/constants/metametrics"),B=e("../../../../shared/modules/string-utils"),j=e("../../../../shared/modules/transaction.utils"),q=e("../../../../shared/lib/metamask-controller-utils"),W=e("../../../../shared/lib/transactions-controller-utils"),U=e("../../../../app/scripts/lib/util"),G=e("../../../../shared/lib/swaps-utils"),H=Q(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),V=Q(e("../exchange-rate-display")),K=Q(e("../../../components/ui/info-tooltip")),$=Q(e("./view-quote-price-difference"));function Q(e){return e&&e.__esModule?e:{default:e}}function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Y=function(e){return e?a:t})(e)}let X;const z="https://community.metamask.io/t/what-is-gas-why-do-transactions-take-so-long/3172";function Z({setReceiveToAmount:e}){var t,a,c,Q,Y,Z;const J=(0,o.useHistory)(),ee=(0,r.useDispatch)(),te=(0,n.useContext)(d.I18nContext),ae=(0,n.useContext)(h.MetaMetricsContext),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(!1),[ue]=(0,n.useState)(!1),[ce,de]=(0,n.useState)(null),[pe,me]=(0,n.useState)(null),[fe,ge]=(0,n.useState)(null),[Te]=(0,n.useState)(Date.now()),[he,Ee]=(0,n.useState)(!1),_e=[O.GasRecommendations.high,O.GasRecommendations.medium],Se=(0,r.useSelector)(E.getBackgroundSwapRouteState),ve=(0,r.useSelector)(E.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(ve).length?"awaiting"===Se&&J.push(w.AWAITING_SWAP_ROUTE):J.push(w.PREPARE_SWAP_ROUTE)}),[J,ve,Se]);const ye=(0,r.useSelector)(E.getQuotesLastFetched),we=(0,r.useSelector)(E.getUsedSwapsGasPrice),be=(0,r.useSelector)(E.getCustomSwapsGas),ke=(0,r.useSelector)(E.getCustomMaxFeePerGas),Ae=(0,r.useSelector)(E.getCustomMaxPriorityFeePerGas),Ie=(0,r.useSelector)(E.getSwapsUserFeeLevel),Ce=(0,r.useSelector)(_.getTokenExchangeRates,i.isEqual),Ne=(0,f.useEqualityCheck)(Ce),{balance:Oe}=(0,r.useSelector)(_.getSelectedAccount,r.shallowEqual),Pe=(0,r.useSelector)(_.conversionRateSelector),Re=(0,r.useSelector)(_.getUSDConversionRate),Me=(0,r.useSelector)(_.getIsMultiLayerFeeNetwork),xe=(0,r.useSelector)(_.getCurrentCurrency),De=(0,r.useSelector)(S.getTokens,i.isEqual),Le=(0,r.useSelector)(_.checkNetworkAndAccountSupports1559),Fe=(0,r.useSelector)(E.getBalanceError),Be=(0,r.useSelector)(E.getFetchParams,i.isEqual),je=(0,r.useSelector)(E.getApproveTxParams,r.shallowEqual),qe=(0,r.useSelector)(E.getSelectedQuote,i.isEqual),We=(0,r.useSelector)(E.getTopQuote,i.isEqual),Ue=qe||We,Ge=(null==Ue||null===(t=Ue.trade)||void 0===t?void 0:t.value)??"0x0",He=(0,r.useSelector)(E.getSwapsQuoteRefreshTime),Ve=(0,r.useSelector)(_.getSwapsDefaultToken,i.isEqual),Ke=(0,r.useSelector)(_.getCurrentChainId),$e=(0,r.useSelector)(S.getNativeCurrency),Qe=(0,r.useSelector)(E.getReviewSwapClickedTimestamp),Ye=(0,r.useSelector)(E.getSmartTransactionsOptInStatus),Xe=(0,r.useSelector)(E.getSmartTransactionsEnabled),ze=(0,r.useSelector)(E.getSwapsSTXLoading),Ze=(0,r.useSelector)(E.getCurrentSmartTransactionsError),Je=(0,r.useSelector)(E.getSmartTransactionsError),et=(0,r.useSelector)(E.getCurrentSmartTransactionsEnabled),tt=(0,r.useSelector)(E.getSmartTransactionFees,i.isEqual),at=(0,r.useSelector)(E.getSwapsNetworkConfig,r.shallowEqual),nt=Ue.trade,rt=et&&Ye;let ot;Le&&(ot=(0,T.useGasFeeInputs)(O.GasRecommendations.high,{userFeeLevel:Ie||O.GasRecommendations.high}));const st=null==Be?void 0:Be.sourceToken,it={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},lt=(null==Ue?void 0:Ue.gasEstimateWithRefund)||`0x${(0,k.decimalToHex)((null==Ue?void 0:Ue.averageGas)||0)}`,ut=(null==Ue?void 0:Ue.gasEstimate)||"0x0",ct=new s.default(ut,16).times((null==Ue?void 0:Ue.gasMultiplier)||E.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),dt=null!=Ue&&Ue.gasEstimate?ct:`0x${(0,k.decimalToHex)((null==Ue?void 0:Ue.maxGas)||0)}`,pt=be||dt;let mt,ft,gt;if(Le){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=ot;mt=ke||(0,k.decGWEIToHexWEI)(e),ft=Ae||(0,k.decGWEIToHexWEI)(t),gt=(0,k.addHexes)((0,k.decGWEIToHexWEI)(a),ft)}let Tt=(0,W.calcGasTotal)(pt,mt||we);null!==pe&&(Tt=(0,k.sumHexes)(Tt||"0x0",pe||"0x0"));const{tokensWithBalances:ht}=(0,C.useTokenTracker)(De,!0),Et=st===Ve.address?Ve:ht.find((({address:e})=>(0,B.isEqualCaseInsensitive)(e,st))),_t=Et||Ue.sourceTokenInfo,St=(null==ht?void 0:ht.length)&&(0,W.calcTokenAmount)(_t.balance||"0x0",_t.decimals).toFixed(9),vt=ht&&Et===undefined,yt=(0,j.parseStandardTokenTransactionData)(null==je?void 0:je.data),wt=yt&&(0,q.getTokenValueParam)(yt),bt=wt&&(null==_t?void 0:_t.decimals)!==undefined&&(0,W.calcTokenAmount)(wt,_t.decimals).toFixed(9),kt=null==je?void 0:je.gas,At=(0,n.useMemo)((()=>(0,I.quotesToRenderableData)({quotes:ve,gasPrice:Le?gt:we,conversionRate:Pe,currentCurrency:xe,approveGas:kt,tokenConversionRates:Ne,chainId:Ke,smartTransactionEstimatedGas:Xe&&Ye&&(null==tt?void 0:tt.tradeTxFees),nativeCurrencySymbol:$e,multiLayerL1ApprovalFeeTotal:fe})),[ve,we,gt,Le,Pe,xe,kt,Ne,Ke,null==tt?void 0:tt.tradeTxFees,$e,Xe,Ye,fe]),It=At.find((e=>e.aggId===Ue.aggregator)),{destinationTokenDecimals:Ct,destinationTokenSymbol:Nt,destinationTokenValue:Ot,sourceTokenDecimals:Pt,sourceTokenSymbol:Rt,sourceTokenValue:Mt}=It;let{feeInFiat:xt,feeInEth:Dt,rawEthFee:Lt,feeInUsd:Ft}=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:lt,approveGas:kt,gasPrice:Le?gt:we,currentCurrency:xe,conversionRate:Pe,USDConversionRate:Re,tradeValue:Ge,sourceSymbol:Rt,sourceAmount:Ue.sourceAmount,chainId:Ke,nativeCurrencySymbol:$e,multiLayerL1FeeTotal:pe});it.reg_tx_fee_in_usd=Number(Ft),it.reg_tx_fee_in_eth=Number(Lt);const Bt=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:pt,approveGas:kt,gasPrice:mt||we,currentCurrency:xe,conversionRate:Pe,USDConversionRate:Re,tradeValue:Ge,sourceSymbol:Rt,sourceAmount:Ue.sourceAmount,chainId:Ke,nativeCurrencySymbol:$e,multiLayerL1FeeTotal:pe});let{feeInFiat:jt,feeInEth:qt,rawEthFee:Wt,feeInUsd:Ut}=Bt;if(it.reg_tx_max_fee_in_usd=Number(Ut),it.reg_tx_max_fee_in_eth=Number(Wt),rt&&null!=tt&&tt.tradeTxFees){var Gt;const e=(null==tt?void 0:tt.tradeTxFees.feeEstimate)+((null==tt||null===(Gt=tt.approvalTxFees)||void 0===Gt?void 0:Gt.feeEstimate)||0),t=e*at.stxMaxFeeMultiplier;({feeInFiat:xt,feeInEth:Dt,rawEthFee:Lt,feeInUsd:Ft}=(0,I.getFeeForSmartTransaction)({chainId:Ke,currentCurrency:xe,conversionRate:Pe,USDConversionRate:Re,nativeCurrencySymbol:$e,feeInWeiDec:e})),it.stx_fee_in_usd=Number(Ft),it.stx_fee_in_eth=Number(Lt),it.estimated_gas=null==tt?void 0:tt.tradeTxFees.gasLimit,({feeInFiat:jt,feeInEth:qt,rawEthFee:Wt,feeInUsd:Ut}=(0,I.getFeeForSmartTransaction)({chainId:Ke,currentCurrency:xe,conversionRate:Pe,USDConversionRate:Re,nativeCurrencySymbol:$e,feeInWeiDec:t})),it.stx_max_fee_in_usd=Number(Ut),it.stx_max_fee_in_eth=Number(Wt)}const Ht=new s.default(Ue.sourceAmount),Vt=new s.default(Ue.trade.value||0,10).plus(new s.default(Tt,16)),Kt=((null==ht?void 0:ht.length)||Fe)&&Ht.gt(new s.default(_t.balance||"0x0")),$t=Vt.gt(new s.default(Oe||"0x0")),Qt=Kt?(0,W.toPrecisionWithoutTrailingZeros)((0,W.calcTokenAmount)(Ht,_t.decimals).minus(St).toString(10),6):null,Yt=$t?(0,W.toPrecisionWithoutTrailingZeros)(Vt.minus(Oe,16).div("1000000000000000000",10).toString(10),6):null;let Xt;rt&&null!=Je&&Je.balanceNeededWei&&(Xt=(0,k.decWEIToDecETH)(Je.balanceNeededWei-Je.currentBalanceWei));const zt=(0,r.useSelector)(E.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{rt?Kt?ee((0,E.setBalanceError)(!0)):Fe&&!Kt&&ee((0,E.setBalanceError)(!1)):Kt||$t?ee((0,E.setBalanceError)(!0)):!Fe||Kt||$t||ee((0,E.setBalanceError)(!1))}),[Kt,$t,ee,rt]),(0,n.useEffect)((()=>{const e=Date.now()-ye;e>He&&!ne?(re(!0),ee((0,v.safeRefetchQuotes)())):e>He&&(ee((0,v.setSwapsErrorKey)(N.QUOTES_EXPIRED_ERROR)),J.push(w.SWAPS_NOTIFICATION_ROUTE))}),[ye,ne,ee,J,He]),(0,n.useEffect)((()=>{!ce&&bt&&de(bt)}),[ce,bt]);const Zt=(Fe||Qt||!rt&&Yt||rt&&Xt)&&!ue,Jt=(0,r.useSelector)(_.isHardwareWallet),ea=(0,r.useSelector)(_.getHardwareWalletType),ta=Object.values(ve).length,aa=(0,n.useRef)(),na=(0,n.useMemo)((()=>({token_from:Rt,token_from_amount:Mt,token_to:Nt,token_to_amount:Ot,request_type:null==Be?void 0:Be.balanceError,slippage:null==Be?void 0:Be.slippage,custom_slippage:2!==(null==Be?void 0:Be.slippage),response_time:null==Be?void 0:Be.responseTime,best_quote_source:null==We?void 0:We.aggregator,available_quotes:ta,is_hardware_wallet:Jt,hardware_wallet_type:ea,stx_enabled:Xe,current_stx_enabled:et,stx_user_opt_in:Ye})),[Rt,Mt,Nt,Ot,null==Be?void 0:Be.balanceError,null==Be?void 0:Be.slippage,null==Be?void 0:Be.responseTime,null==We?void 0:We.aggregator,ta,Jt,ea,Xe,et,Ye]),ra=(0,n.useCallback)((()=>{ae({event:"Best Quote Reviewed",category:F.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...na,network_fees:xt}})}),[ae,na,xt]),oa=(0,n.useCallback)((()=>{ae({event:"Review Quote Component Loaded",category:F.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...na,response_time:Te-Qe}})}),[ae,na,Te,Qe]);(0,n.useEffect)((()=>{!aa.current&&[Rt,Mt,Nt,Ot,Be,We,ta,xt].every((e=>null!==e&&e!==undefined))&&(aa.current=!0,ra())}),[Be,We,ta,xt,Nt,Ot,Rt,Mt,ra]);const sa=Ue.fee,ia=()=>{ae({event:"Edit Spend Limit Opened",category:F.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...na,custom_spend_limit_set:ce===bt,custom_spend_limit_amount:ce===bt?null:bt}}),ee((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:_t.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?ce:e,a=(0,A.getCustomTxParamsData)(je.data,{customPermissionAmount:t,decimals:_t.decimals});null!=t&&t.length&&je.data!==a&&ee((0,v.setCustomApproveTxData)(a))},tokenAmount:ce,customTokenAmount:ce===bt?null:bt,tokenBalance:St,tokenSymbol:_t.symbol,requiredMinimum:(0,W.calcTokenAmount)(Ue.sourceAmount,_t.decimals)}))},la=vt?te("swapTokenBalanceUnavailable",[Rt]):te("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1"},Qt||Xt||Yt),Qt&&Rt!==Ve.symbol?Rt:Ve.symbol]),ua=null==Ue||null===(a=Ue.priceSlippage)||void 0===a?void 0:a.bucket,ca=(0,g.usePrevious)(ua);(0,n.useEffect)((()=>{he&&ca===O.GasRecommendations.medium&&ua===O.GasRecommendations.high&&Ee(!1)}),[ua,he,ca]);let da=null;const pa=(0,m.useEthFiatAmount)((null==Ue||null===(c=Ue.priceSlippage)||void 0===c?void 0:c.sourceAmountInETH)||0,{showFiat:!0}),ma=(0,m.useEthFiatAmount)((null==Ue||null===(Q=Ue.priceSlippage)||void 0===Q?void 0:Q.destinationAmountInETH)||0,{showFiat:!0}),fa=!pa||!ma||Boolean(null==Ue||null===(Y=Ue.priceSlippage)||void 0===Y?void 0:Y.calculationError);let ga=0;null!=Ue&&null!==(Z=Ue.priceSlippage)&&void 0!==Z&&Z.ratio&&(ga=parseFloat(new s.default(Ue.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const Ta=!vt&&!Zt&&Ue&&(_e.includes(ua)||fa);Ta&&(da=n.default.createElement($.default,{usedQuote:Ue,sourceTokenValue:Mt,destinationTokenValue:Ot,priceSlippageFromSource:pa,priceSlippageFromDestination:ma,priceDifferencePercentage:ga,priceSlippageUnknownFiatValue:fa,onAcknowledgementClick:()=>{Ee(!0)},acknowledged:he}));const ha=Zt||Ta,Ea=Boolean(oe||Fe||vt||Ta&&!he||Le&&gt===undefined||!Le&&(null===we||we===undefined)||et&&(Ze||Je)||et&&Ye&&!(null!=tt&&tt.tradeTxFees));(0,n.useEffect)((()=>{if(rt&&!Kt){const e={from:nt.from,to:nt.to,value:nt.value,data:nt.data,gas:nt.gas,chainId:Ke};X=setInterval((()=>{ze||ee((0,E.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:je,fallbackOnNotEnoughFunds:!1}))}),at.stxGetTransactionsRefreshTime),ee((0,E.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:je,fallbackOnNotEnoughFunds:!1}))}else X&&clearInterval(X);return()=>clearInterval(X)}),[ee,rt,nt.data,nt.from,nt.value,nt.gas,nt.to,Ke,at.stxGetTransactionsRefreshTime,Kt]),(0,n.useEffect)((()=>{ee((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),Qe&&oa()}),[ee,oa,Qe]),(0,n.useEffect)((()=>{!et&&Ze&&oe&&se(!1)}),[et,Ze,oe]),(0,n.useEffect)((()=>{if(!Me||null==Ue||!Ue.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";je&&(e=await(0,H.default)({txParams:{...je,gasPrice:(0,U.addHexPrefix)(je.gasPrice),value:"0x0"},chainId:Ke}),ge(e));const t=(0,k.sumHexes)(Ue.multiLayerL1TradeFeeTotal,e);me(t)}catch(e){(0,u.captureException)(e),me(null),ge(null)}})()}),[nt,je,Me,Ke,Ue]),(0,n.useEffect)((()=>{rt&&ee({type:y.SET_SMART_TRANSACTIONS_ERROR,payload:null})}),[rt,ee]);const _a=(0,G.calcTokenValue)(Ot,Ct),Sa=(0,W.calcTokenAmount)(_a,Ct),va=(0,I.formatSwapsValueForDisplay)(Sa),ya=va.match(/\d+/gu).join("").length;let wa=va;ya>20&&(wa=`${va.slice(0,20)}...`),(0,n.useEffect)((()=>{e(wa)}),[wa,e]);const ba=!je||Fe&&!ue,ka=n.default.createElement("span",{key:"fee-card-approve-symbol",className:"fee-card__bold"},te("enableToken",[Rt]));return n.default.createElement("div",{className:"review-quote"},n.default.createElement("div",{className:"review-quote__content"},ie&&n.default.createElement(p.default,{quoteDataRows:At,onClose:()=>le(!1),onSubmit:e=>ee((0,E.swapsQuoteSelected)(e)),swapToSymbol:Nt,initialAggId:Ue.aggregator,onQuoteDetailsIsOpened:()=>{ae({event:"Quote Details Opened",category:F.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...na,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==We?void 0:We.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==We?void 0:We.aggregator)?null:null==Ue?void 0:Ue.aggregator}})},hideEstimatedGasFee:Xe&&Ye}),ha&&n.default.createElement(n.default.Fragment,null,da,(Zt||vt)&&n.default.createElement(M.default,{display:x.DISPLAY.FLEX,marginTop:2},n.default.createElement(D.BannerAlert,{severity:x.SEVERITIES.INFO,title:te("notEnoughBalance")},n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},la)))),n.default.createElement("div",{className:"review-quote__countdown-timer-container"},n.default.createElement(P.default,{timeStarted:ye,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(M.default,{marginTop:1,marginBottom:0,display:x.DISPLAY.FLEX,flexDirection:x.FLEX_DIRECTION.COLUMN,className:"review-quote__overview"},n.default.createElement(M.default,{display:x.DISPLAY.FLEX,justifyContent:x.JustifyContent.spaceBetween,alignItems:x.AlignItems.center},n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd,marginRight:1,color:x.TextColor.textAlternative},te("quoteRate")),n.default.createElement(V.default,{primaryTokenValue:(0,G.calcTokenValue)(Mt,Pt),primaryTokenDecimals:Pt,primaryTokenSymbol:Rt,secondaryTokenValue:_a,secondaryTokenDecimals:Ct,secondaryTokenSymbol:Nt,boldSymbols:!1,className:"main-quote-summary__exchange-rate-display",showIconForSwappingTokens:!1})),n.default.createElement(M.default,{display:x.DISPLAY.FLEX,justifyContent:x.JustifyContent.spaceBetween,alignItems:x.AlignItems.stretch},n.default.createElement(M.default,{display:x.DISPLAY.FLEX,alignItems:x.AlignItems.center,width:x.FRACTIONS.SIX_TWELFTHS},n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd,as:"h6",color:x.TextColor.textAlternative,marginRight:1},te("transactionDetailGasHeading")),n.default.createElement(K.default,{position:"left",contentText:n.default.createElement(n.default.Fragment,null,n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesSummary",[(()=>{switch(Ke){case b.CHAIN_IDS.MAINNET:return te("networkNameEthereum");case b.CHAIN_IDS.BSC:return te("networkNameBSC");case b.CHAIN_IDS.POLYGON:return te("networkNamePolygon");case b.CHAIN_IDS.LOCALHOST:return te("networkNameTestnet");case b.CHAIN_IDS.GOERLI:return te("networkNameGoerli");case b.CHAIN_IDS.AVALANCHE:return te("networkNameAvalanche");case b.CHAIN_IDS.OPTIMISM:return te("networkNameOptimism");case b.CHAIN_IDS.ARBITRUM:return te("networkNameArbitrum");default:throw new Error("This network is not supported for token swaps")}})()])),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesDetails")),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},n.default.createElement("a",{className:"fee-card__link",onClick:()=>{ae({event:'Clicked "Gas Fees: Learn More" Link',category:F.MetaMetricsEventCategory.Swaps}),global.platform.openTab({url:z})},target:"_blank",rel:"noopener noreferrer"},te("swapGasFeesLearnMore"))))})),n.default.createElement(M.default,{display:x.DISPLAY.FLEX,alignItems:x.AlignItems.flexEnd,width:x.FRACTIONS.SIX_TWELFTHS},n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd,as:"h6",color:x.TextColor.textAlternative,width:x.FRACTIONS.EIGHT_TWELFTHS,textAlign:x.TEXT_ALIGN.RIGHT,paddingRight:1},Dt),n.default.createElement(L.Text,{variant:x.TextVariant.bodyMdBold,as:"h6",color:x.TextColor.textAlternative,"data-testid":"review-quote-gas-fee-in-fiat",width:x.FRACTIONS.FOUR_TWELFTHS,textAlign:x.TEXT_ALIGN.RIGHT},` ${xt}`))),(jt||qt)&&n.default.createElement(M.default,{display:x.DISPLAY.FLEX},n.default.createElement(M.default,{display:x.DISPLAY.FLEX,width:x.FRACTIONS.SIX_TWELFTHS}),n.default.createElement(M.default,{display:x.DISPLAY.FLEX,justifyContent:x.JustifyContent.flexEnd,width:x.FRACTIONS.SIX_TWELFTHS},n.default.createElement(L.Text,{variant:x.TextVariant.bodySm,color:x.TextColor.textAlternative,width:x.FRACTIONS.EIGHT_TWELFTHS,paddingRight:1,textAlign:x.TEXT_ALIGN.RIGHT},`${te("maxFee")}: `),n.default.createElement(L.Text,{variant:x.TextVariant.bodySm,color:x.TextColor.textAlternative,width:x.FRACTIONS.FOUR_TWELFTHS,textAlign:x.TEXT_ALIGN.RIGHT},jt||qt))),!ba&&n.default.createElement(M.default,{display:x.DISPLAY.FLEX,justifyContent:x.JustifyContent.spaceBetween},n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd,as:"h6",color:x.TextColor.textAlternative,marginRight:1},te("swapEnableTokenForSwapping",[ka])),n.default.createElement(L.Text,{variant:x.TextVariant.bodyMd},n.default.createElement(D.ButtonLink,{onClick:()=>ia(),size:x.Size.inherit,className:"review-quote__edit-limit"},te("swapEditLimit")))),n.default.createElement(M.default,{display:x.DISPLAY.FLEX,marginTop:3,justifyContent:x.JustifyContent.center,alignItems:x.AlignItems.center},n.default.createElement(L.Text,{variant:x.TextVariant.bodySm,color:x.TextColor.textDefault},te("swapIncludesMetaMaskFeeViewAllQuotes",[sa,n.default.createElement(D.ButtonLink,{key:"view-all-quotes","data-testid":"review-quote-view-all-quotes",onClick:()=>{ae({event:"All Available Quotes Opened",category:F.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...na,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==We?void 0:We.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==We?void 0:We.aggregator)?null:null==Ue?void 0:Ue.aggregator}}),le(!0)},size:x.Size.inherit},te("viewAllQuotes"))]))))),n.default.createElement(R.default,{onSubmit:()=>{se(!0),Fe?zt.symbol===Ve.symbol?J.push(w.DEFAULT_ROUTE):J.push(`${w.ASSET_ROUTE}/${zt.address}`):rt&&null!=tt&&tt.tradeTxFees?ee((0,E.signAndSendSwapsSmartTransaction)({unsignedTransaction:nt,trackEvent:ae,history:J,additionalTrackingParams:it})):ee((0,E.signAndSendTransactions)(J,ae,it))},submitText:te(rt&&ze?"preparingSwap":"swap"),hideCancel:!0,disabled:Ea,className:(0,l.default)("review-quote__footer",{"review-quote__thin-swaps-footer":ha}),showTopBorder:!0,showTermsOfService:!0}))}Z.propTypes={setReceiveToAmount:c.default.func.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/review-quote.js"}],[5402,{"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../components/ui/button":4893,"../../../components/ui/popover":4980,"../../../components/ui/typography":5021,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,"../popover-custom-background/popover-custom-background":5398,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=m(e("prop-types")),o=e("../../../contexts/i18n"),s=m(e("../../../components/ui/button")),i=m(e("../../../components/ui/box")),l=m(e("../../../components/ui/popover")),u=m(e("../../../components/ui/typography")),c=e("../../../helpers/constants/design-system"),d=e("../../../components/component-library/text/deprecated"),p=m(e("../popover-custom-background/popover-custom-background"));function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g({onEnableSmartTransactionsClick:e,onCloseSmartTransactionsOptInPopover:t}){const a=(0,n.useContext)(o.I18nContext);return n.default.createElement(l.default,{title:a("smartSwapsAreHere"),footer:n.default.createElement(n.default.Fragment,null,n.default.createElement(s.default,{type:"primary",onClick:e},a("enableSmartSwaps")),n.default.createElement(i.default,{marginTop:1},n.default.createElement(d.Text,{variant:c.TextVariant.bodyMd,as:"h6"},n.default.createElement(s.default,{type:"link",onClick:t,className:"smart-transactions-popover__no-thanks-link"},a("noThanksVariant2"))))),footerClassName:"smart-transactions-popover__footer",className:"smart-transactions-popover",CustomBackground:()=>n.default.createElement(p.default,{onClose:t})},n.default.createElement(i.default,{paddingRight:6,paddingLeft:6,paddingTop:0,paddingBottom:0,display:c.DISPLAY.FLEX,className:"smart-transactions-popover__content"},n.default.createElement(i.default,{marginTop:0,marginBottom:4,display:c.DISPLAY.FLEX,flexDirection:c.FLEX_DIRECTION.COLUMN},n.default.createElement("img",{src:"./images/logo/smart-transactions-header.png",alt:a("swapSwapSwitch")})),n.default.createElement(u.default,{variant:c.TypographyVariant.H7,marginTop:0},a("smartSwapsDescription")),n.default.createElement(u.default,{as:"ul",variant:c.TypographyVariant.H7,fontWeight:c.FONT_WEIGHT.BOLD,marginTop:3},n.default.createElement("li",null,a("stxBenefit1")),n.default.createElement("li",null,a("stxBenefit2")),n.default.createElement("li",null,a("stxBenefit3")),n.default.createElement("li",null,a("stxBenefit4"),n.default.createElement(u.default,{as:"span",fontWeight:c.FONT_WEIGHT.NORMAL,variant:c.TypographyVariant.H7}," *"))),n.default.createElement(u.default,{variant:c.TypographyVariant.H8,color:c.TextColor.textAlternative,boxProps:{marginTop:3}},a("smartSwapsSubDescription")," ",n.default.createElement(u.default,{as:"span",fontWeight:c.FONT_WEIGHT.BOLD,variant:c.TypographyVariant.H8,color:c.TextColor.textAlternative},a("stxYouCanOptOut")," "))))}g.propTypes={onEnableSmartTransactionsClick:r.default.func.isRequired,onCloseSmartTransactionsOptInPopover:r.default.func.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/smart-transactions-popover.js"}],[5403,{"../../../../shared/constants/gas":4319,"../../../components/component-library":4792,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=m;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=d(e("prop-types")),o=e("../../../contexts/i18n"),s=d(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../../shared/constants/gas"),u=e("../../../components/component-library"),c=e("../../../components/component-library/text/deprecated");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:d,acknowledged:p,priceSlippageFromSource:m,priceSlippageFromDestination:f,priceDifferencePercentage:g,priceSlippageUnknownFiatValue:T}=e,h=(0,n.useContext)(o.I18nContext);let E=h("swapPriceUnavailableTitle"),_=h("swapPriceUnavailableDescription"),S=l.GasRecommendations.high;T||(E=h("swapPriceDifferenceTitle",[g]),_=h("swapPriceDifference",[a,t.sourceTokenInfo.symbol,m,r,t.destinationTokenInfo.symbol,f]),S=t.priceSlippage.bucket);const v=S===l.GasRecommendations.high?i.SEVERITIES.DANGER:i.SEVERITIES.WARNING;return n.default.createElement(s.default,{display:i.DISPLAY.FLEX,marginTop:2},n.default.createElement(u.BannerAlert,{title:E,severity:v,width:i.BLOCK_SIZES.FULL,"data-testid":"mm-banner-alert"},n.default.createElement(s.default,null,n.default.createElement(c.Text,{variant:i.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},_),!p&&n.default.createElement(u.ButtonLink,{size:i.Size.INHERIT,textProps:{variant:i.TextVariant.bodyMd,alignItems:i.AlignItems.flexStart},onClick:d},h("swapAnyway")))))}m.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/view-quote-price-difference.js"}],[5404,{"./searchable-item-list":5409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./searchable-item-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/index.js"}],[5405,{"./item-list.component":5406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./item-list.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/index.js"}],[5406,{"../../../../../shared/constants/metametrics":4323,"../../../../../shared/constants/swaps":4331,"../../../../components/ui/actionable-message/actionable-message":4885,"../../../../components/ui/button":4893,"../../../../components/ui/identicon":4945,"../../../../components/ui/url-icon":5026,"../../../../contexts/i18n":5029,"../../../../contexts/metametrics":5030,"../../../../helpers/utils/util":5093,"../../../../selectors":5449,classnames:2376,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=h(e("prop-types")),s=h(e("classnames")),i=h(e("../../../../components/ui/identicon")),l=h(e("../../../../components/ui/url-icon")),u=h(e("../../../../components/ui/button")),c=h(e("../../../../components/ui/actionable-message/actionable-message")),d=e("../../../../contexts/i18n"),p=e("../../../../selectors"),m=e("../../../../../shared/constants/metametrics"),f=e("../../../../../shared/constants/swaps"),g=e("../../../../helpers/utils/util"),T=e("../../../../contexts/metametrics");function h(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function _({results:e=[],onClickItem:t,onOpenImportTokenModalClick:a,Placeholder:o,listTitle:h,maxListItems:E=6,searchQuery:_="",containerRef:S,hideRightLabels:v,hideItemIf:y,listContainerClassName:w}){const b=(0,n.useContext)(d.I18nContext),k=(0,r.useSelector)(p.getCurrentChainId),A=(0,r.useSelector)(p.getRpcPrefsForCurrentProvider).blockExplorerUrl??f.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[k]??null,I=(0,r.useSelector)(p.getUseCurrencyRateCheck),C=(0,g.getURLHostName)(A),N=(0,n.useContext)(T.MetaMetricsContext),O=1===e.length&&e[0].notImported,P=o?n.default.createElement(o,{searchQuery:_}):null;return 0===e.length?P:n.default.createElement("div",{className:"searchable-item-list"},h?n.default.createElement("div",{className:"searchable-item-list__title"},h):null,n.default.createElement("div",{className:(0,s.default)("searchable-item-list__list-container",w),ref:S,"data-testid":"searchable-item-list-list-container"},e.slice(0,E).map(((e,r)=>{if(null!=y&&y(e))return null;const o=()=>{e.notImported?a(e):null==t||t(e)},{iconUrl:c,identiconAddress:d,selected:p,disabled:m,primaryLabel:f,secondaryLabel:g,rightPrimaryLabel:T,rightSecondaryLabel:h,IconComponent:E}=e;return n.default.createElement("div",{tabIndex:"0",className:(0,s.default)("searchable-item-list__item",{"searchable-item-list__item--selected":p,"searchable-item-list__item--disabled":m}),"data-testid":"searchable-item-list__item",onClick:o,onKeyUp:e=>"Enter"===e.key&&o(),key:`searchable-item-list-item-${r}`},c||f?n.default.createElement(l.default,{url:c,name:f}):null,c||f||!d?null:n.default.createElement("div",{className:"searchable-item-list__identicon"},n.default.createElement(i.default,{address:d,diameter:24})),E?n.default.createElement(E,null):null,n.default.createElement("div",{className:"searchable-item-list__labels"},n.default.createElement("div",{className:"searchable-item-list__item-labels"},f?n.default.createElement("span",{className:"searchable-item-list__primary-label","data-testid":"searchable-item-list-primary-label"},f):null,g?n.default.createElement("span",{className:"searchable-item-list__secondary-label"},g):null),v||!T&&!h?null:n.default.createElement("div",{className:"searchable-item-list__right-labels"},T?n.default.createElement("span",{className:"searchable-item-list__right-primary-label"},T):null,h&&I?n.default.createElement("span",{className:"searchable-item-list__right-secondary-label"},h):null)),e.notImported&&n.default.createElement(u.default,{type:"primary",onClick:o,"data-testid":"searchable-item-list-import-button"},b("import")))})),!O&&A&&n.default.createElement("div",{tabIndex:"0",className:"searchable-item-list__item searchable-item-list__item--add-token",key:"searchable-item-list-item-last"},n.default.createElement(c.default,{message:b("addTokenByContractAddress",[n.default.createElement("a",{key:"searchable-item-list__etherscan-link",onClick:()=>{N({event:"Clicked Block Explorer Link",category:m.MetaMetricsEventCategory.Swaps,properties:{link_type:"Token Tracker",action:"Verify Contract Address",block_explorer_domain:C}}),global.platform.openTab({url:A})},target:"_blank",rel:"noopener noreferrer"},C)])}))))}_.propTypes={results:o.default.arrayOf(o.default.shape({iconUrl:o.default.string,selected:o.default.bool,disabled:o.default.bool,primaryLabel:o.default.string,secondaryLabel:o.default.string,rightPrimaryLabel:o.default.string,rightSecondaryLabel:o.default.string})),onClickItem:o.default.func,onOpenImportTokenModalClick:o.default.func,Placeholder:o.default.func,listTitle:o.default.string,maxListItems:o.default.number,searchQuery:o.default.string,containerRef:o.default.shape({current:o.default.instanceOf(window.Element)}),hideRightLabels:o.default.bool,hideItemIf:o.default.func,listContainerClassName:o.default.string}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/item-list.component.js"}],[5407,{"./list-item-search.component":5408},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./list-item-search.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/index.js"}],[5408,{"../../../../../shared/modules/hexstring-utils":4354,"../../../../components/ui/icon/search-icon":4939,"../../../../components/ui/text-field":5006,"../../../../hooks/usePrevious":5120,"../../../../selectors/selectors":5452,"../../swaps.util":5431,"@material-ui/core/InputAdornment":725,"fuse.js":3058,loglevel:3629,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=g(e("prop-types")),s=g(e("fuse.js")),i=g(e("loglevel")),l=g(e("@material-ui/core/InputAdornment")),u=g(e("../../../../components/ui/text-field")),c=e("../../../../hooks/usePrevious"),d=e("../../../../../shared/modules/hexstring-utils"),p=e("../../swaps.util"),m=e("../../../../selectors/selectors"),f=g(e("../../../../components/ui/icon/search-icon"));function g(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}const h=()=>n.default.createElement(l.default,{position:"start",style:{marginRight:"12px"}},n.default.createElement(f.default,{size:20,color:"var(--color-icon-muted)"}));let E;function _({onSearch:e,error:t,listToSearch:a=[],fuseSearchKeys:o,searchPlaceholderText:l,defaultToAll:f,shouldSearchForImports:g,searchQuery:T,setSearchQuery:_}){const S=(0,n.useRef)(),v=(0,r.useSelector)(m.getCurrentChainId),y=async t=>{_(t),E&&clearTimeout(E),E=setTimeout((async()=>{E=null;const n=t.trim(),r=(0,d.isValidHexAddress)(n),o=S.current.search(t),s=f&&""===t?a:o;g&&0===s.length&&r?await(async t=>{try{const a=await(0,p.fetchToken)(t,v);if(a)return a.primaryLabel=a.symbol,a.secondaryLabel=a.name,a.notImported=!0,void e({searchQuery:t,results:[a]})}catch(e){i.default.error("Token not found, show 0 results.",e)}e({searchQuery:t,results:[]})})(n):e({searchQuery:t,results:s})}),350)};(0,n.useEffect)((()=>()=>clearTimeout(E)),[]),(0,n.useEffect)((()=>{S.current||(S.current=new s.default(a,{shouldSort:!0,threshold:.45,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:o}))}),[o,a]);const w=(0,c.usePrevious)(a??[]);return(0,n.useEffect)((()=>{if(S.current&&T&&w!==a){S.current.setCollection(a);const t=S.current.search(T);e({searchQuery:T,results:t})}}),[a,T,e,w]),n.default.createElement(u.default,{"data-testid":"search-list-items",className:"searchable-item-list__search",placeholder:l,type:"text",value:T,onChange:e=>y(e.target.value),error:t,fullWidth:!0,startAdornment:h(),autoComplete:"off",autoFocus:!0})}_.propTypes={onSearch:o.default.func,error:o.default.string,listToSearch:o.default.array.isRequired,fuseSearchKeys:o.default.arrayOf(o.default.object).isRequired,searchPlaceholderText:o.default.string,defaultToAll:o.default.bool,shouldSearchForImports:o.default.bool,searchQuery:o.default.string,setSearchQuery:o.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/list-item-search.component.js"}],[5409,{"./item-list":5405,"./list-item-search":5407,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=i(e("prop-types")),o=i(e("./item-list")),s=i(e("./list-item-search"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u({className:e,defaultToAll:t,fuseSearchKeys:a,itemSelectorError:r,itemsToSearch:i=[],listTitle:l,maxListItems:u,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,searchPlaceholderText:m,hideRightLabels:f,hideItemIf:g,listContainerClassName:T,shouldSearchForImports:h,searchQuery:E,setSearchQuery:_}){const S=(0,n.useRef)(),v=(0,n.useMemo)((()=>t?i:[]),[t,i]),[y,w]=(0,n.useState)(v);return(0,n.useEffect)((()=>{E||w(v)}),[v.length,E]),n.default.createElement("div",{className:e},n.default.createElement(s.default,{listToSearch:i,fuseSearchKeys:a,onSearch:({searchQuery:e="",results:t=[]})=>{_(e),w(t)},error:r,searchPlaceholderText:m,defaultToAll:t,shouldSearchForImports:h,searchQuery:E,setSearchQuery:_}),n.default.createElement(o.default,{searchQuery:E,results:y,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,listTitle:l,maxListItems:u,containerRef:S,hideRightLabels:f,hideItemIf:g,listContainerClassName:T}))}u.propTypes={itemSelectorError:r.default.string,itemsToSearch:r.default.array,onClickItem:r.default.func,onOpenImportTokenModalClick:r.default.func,Placeholder:r.default.func,className:r.default.string,searchPlaceholderText:r.default.string,fuseSearchKeys:r.default.arrayOf(r.default.shape({name:r.default.string,weight:r.default.number})),listTitle:r.default.string,defaultToAll:r.default.bool,maxListItems:r.default.number,hideRightLabels:r.default.bool,hideItemIf:r.default.func,listContainerClassName:r.default.string,shouldSearchForImports:r.default.bool,searchQuery:r.default.string,setSearchQuery:r.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/searchable-item-list.js"}],[5410,{"./select-quote-popover":5414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./select-quote-popover"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/index.js"}],[5411,{"./quote-details":5412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./quote-details"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/index.js"}],[5412,{"../../../../components/ui/info-tooltip":4946,"../../../../contexts/i18n":5029,"../../../../selectors":5449,"../../exchange-rate-display":5384,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=c(e("prop-types")),s=e("../../../../contexts/i18n"),i=c(e("../../../../components/ui/info-tooltip")),l=c(e("../../exchange-rate-display")),u=e("../../../../selectors");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=({slippage:e,sourceTokenValue:t,sourceTokenSymbol:a,destinationTokenValue:o,destinationTokenSymbol:c,liquiditySourceKey:d,minimumAmountReceived:p,feeInEth:m,networkFees:f,metaMaskFee:g,hideEstimatedGasFee:T})=>{const h=(0,n.useContext)(s.I18nContext),E=(0,r.useSelector)(u.getUseCurrencyRateCheck);return n.default.createElement("div",{className:"quote-details"},n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},h("swapRate")),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement(l.default,{primaryTokenValue:t,primaryTokenDecimals:1,primaryTokenSymbol:a,secondaryTokenValue:o,secondaryTokenDecimals:1,secondaryTokenSymbol:c}))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},h("swapMaxSlippage"),n.default.createElement(i.default,{position:"bottom",contentText:h("swapSlippageTooltip")})),n.default.createElement("div",{className:"quote-details__detail-content"},`${e}%`)),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},h("swapAmountReceived"),n.default.createElement(i.default,{position:"bottom",contentText:h("swapAmountReceivedInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,p),n.default.createElement("span",{className:"quote-details__bold"},` ${c}`))),!T&&n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},h("swapEstimatedNetworkFees"),n.default.createElement(i.default,{position:"bottom",contentText:h("swapEstimatedNetworkFeesInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,m),n.default.createElement("span",{className:"quote-details__light-grey"},E&&` (${f})`))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},h("swapSource"),n.default.createElement(i.default,{position:"bottom",contentText:h("swapSourceInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},h(d))),n.default.createElement("div",{className:"quote-details__row quote-details__row--high"},n.default.createElement("div",{className:"quote-details__detail-header"},n.default.createElement("img",{src:"./images/logo/metamask-fox.svg",className:"quote-details__metafox-logo",alt:""}),h("swapMetaMaskFee")),n.default.createElement("div",{className:"quote-details__detail-content"},h("swapMetaMaskFeeDescription",[g]))))};p.propTypes={slippage:o.default.number.isRequired,sourceTokenValue:o.default.string.isRequired,sourceTokenSymbol:o.default.string.isRequired,destinationTokenValue:o.default.string.isRequired,destinationTokenSymbol:o.default.string.isRequired,liquiditySourceKey:o.default.string.isRequired,minimumAmountReceived:o.default.string.isRequired,feeInEth:o.default.string.isRequired,networkFees:o.default.string.isRequired,metaMaskFee:o.default.number.isRequired,hideEstimatedGasFee:o.default.bool};var m=p;a.default=m}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/quote-details.js"}],[5413,{"prop-types":3766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=void 0;var n,r=(n=e("prop-types"))&&n.__esModule?n:{default:n};const o=r.default.shape({aggId:r.default.string.isRequired,amountReceiving:r.default.string.isRequired,destinationTokenDecimals:r.default.number.isRequired,destinationTokenSymbol:r.default.string.isRequired,destinationTokenValue:r.default.string.isRequired,isBestQuote:r.default.bool,networkFees:r.default.string.isRequired,quoteSource:r.default.string.isRequired,rawNetworkFees:r.default.string.isRequired,slippage:r.default.number.isRequired,sourceTokenDecimals:r.default.number.isRequired,sourceTokenSymbol:r.default.string.isRequired,sourceTokenValue:r.default.string.isRequired});a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=o}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover-constants.js"}],[5414,{"../../../components/ui/button":4893,"../../../components/ui/popover":4980,"../../../contexts/i18n":5029,"./quote-details":5411,"./select-quote-popover-constants":5413,"./sort-list":5415,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=d(e("prop-types")),o=e("../../../contexts/i18n"),s=d(e("../../../components/ui/popover")),i=d(e("../../../components/ui/button")),l=d(e("./quote-details")),u=d(e("./sort-list")),c=e("./select-quote-popover-constants");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}const f=({quoteDataRows:e=[],onClose:t=null,onSubmit:a=null,swapToSymbol:r,initialAggId:c,onQuoteDetailsIsOpened:d,hideEstimatedGasFee:p})=>{const f=(0,n.useContext)(o.I18nContext),[g,T]=(0,n.useState)(1),[h,E]=(0,n.useState)(null),[_,S]=(0,n.useState)(c),[v,y]=(0,n.useState)("sortList"),[w,b]=(0,n.useState)(null),k=(0,n.useCallback)((()=>{a(_),t()}),[_,t,a]),A=(0,n.useCallback)((()=>{b(null),y("sortList")}),[]),I=(0,n.useCallback)((e=>S(e)),[S]),C=(0,n.useCallback)((t=>{const a=e.find((e=>e.aggId===t));y("quoteDetails"),d(),b(a)}),[e,d]),N=(0,n.useCallback)((()=>n.default.createElement("div",{className:"select-quote-popover__popover-bg",onClick:t})),[t]),O=n.default.createElement(n.default.Fragment,null,n.default.createElement(i.default,{type:"secondary",className:"page-container__footer-button select-quote-popover__button",onClick:t},f("close")),n.default.createElement(i.default,{type:"primary",className:"page-container__footer-button select-quote-popover__button",onClick:k},f("swapSelect")));return n.default.createElement("div",{className:"select-quote-popover"},n.default.createElement(s.default,{title:f("quoteDetails"===v?"swapSelectAQuote":"swapQuoteDetails"),subtitle:"sortList"===v?f("swapSelectQuotePopoverDescription"):null,onClose:t,CustomBackground:N,className:"select-quote-popover__popover-wrap",footerClassName:"swaps__footer",footer:"quoteDetails"===v?null:O,onBack:"quoteDetails"===v?A:null},"sortList"===v&&n.default.createElement(u.default,{quoteDataRows:e,selectedAggId:_,onSelect:I,onCaretClick:C,swapToSymbol:r,sortDirection:g,setSortDirection:T,sortColumn:h,setSortColumn:E,hideEstimatedGasFee:p}),"quoteDetails"===v&&w&&n.default.createElement(l.default,m({},w,{hideEstimatedGasFee:p}))))};f.propTypes={onClose:r.default.func,onSubmit:r.default.func,swapToSymbol:r.default.string,quoteDataRows:r.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE),initialAggId:r.default.string,onQuoteDetailsIsOpened:r.default.func,hideEstimatedGasFee:r.default.bool.isRequired};var g=f;a.default=g}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover.js"}],[5415,{"./sort-list":5416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./sort-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/index.js"}],[5416,{"../../../../components/ui/icon/sun-check-icon.component":4940,"../../../../components/ui/info-tooltip":4946,"../../../../contexts/i18n":5029,"../../../../selectors":5449,"../select-quote-popover-constants":5413,"bignumber.js":2222,classnames:2376,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=T;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=m(e("prop-types")),s=m(e("classnames")),i=m(e("bignumber.js")),l=m(e("../../../../components/ui/icon/sun-check-icon.component")),u=e("../../../../contexts/i18n"),c=e("../select-quote-popover-constants"),d=m(e("../../../../components/ui/info-tooltip")),p=e("../../../../selectors");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}const g=()=>n.default.createElement("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M0.7948 4.96973C0.365112 4.96973 0.150269 5.47754 0.462769 5.77051L2.78699 8.09473C2.96277 8.29004 3.25574 8.29004 3.45105 8.09473L5.77527 5.77051C6.06824 5.47754 5.85339 4.96973 5.44324 4.96973H0.7948ZM5.77527 2.91895L3.45105 0.594727C3.25574 0.418945 2.96277 0.418945 2.78699 0.594727L0.462769 2.91895C0.150269 3.23145 0.365112 3.71973 0.7948 3.71973H5.44324C5.85339 3.71973 6.06824 3.23145 5.77527 2.91895Z",fill:"var(--color-primary-default)"}));function T({quoteDataRows:e,selectedAggId:t,onSelect:a,onCaretClick:o,swapToSymbol:c,sortDirection:m,setSortDirection:f,sortColumn:T=null,setSortColumn:h,hideEstimatedGasFee:E}){const _=(0,n.useContext)(u.I18nContext),[S,v]=(0,n.useState)(!1),y=(0,r.useSelector)(p.getUseCurrencyRateCheck),w=e=>{e===T?f(-1*m):h(e)},b=(0,n.useMemo)((()=>[...e].sort(((e,t)=>{if(null===T&&e.isBestQuote)return-1;if(null===T&&t.isBestQuote)return 1;if(null===T){const a=new i.default(e.destinationTokenValue).toString(16),n=new i.default(t.destinationTokenValue).toString(16);return a[a.length-1]<n[n.length-1]?-1:1}return"quoteSource"===T?e[T]>t[T]?-1*m:m:new i.default(e[T]).gt(t[T])?-1*m:m}))),[e,T,m]),k=b.findIndex((({aggId:e})=>t===e));return n.default.createElement("div",{className:"select-quote-popover__sort-list"},n.default.createElement("div",{className:"select-quote-popover__column-headers"},n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__receiving","data-testid":"select-quote-popover__receiving",onClick:()=>w("destinationTokenValue")},n.default.createElement("span",{className:"select-quote-popover__receiving-symbol"},c),n.default.createElement("div",{className:"select-quote-popover__receiving-label"},n.default.createElement("span",null,_("swapReceiving")),n.default.createElement(d.default,{position:"bottom",contentText:_("swapReceivingInfoTooltip")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__network-fees select-quote-popover__network-fees-header","data-testid":"select-quote-popover__network-fees-header",onClick:()=>w("rawNetworkFees")},!E&&y&&n.default.createElement(n.default.Fragment,null,n.default.createElement("span",null,_("swapEstimatedNetworkFees")),n.default.createElement(d.default,{position:"bottom",contentText:_("swapEstimatedNetworkFeesInfo")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__quote-source","data-testid":"select-quote-popover__quote-source",onClick:()=>w("quoteSource")},_("swapQuoteSource"),n.default.createElement("div",{className:"select-quote-popover__quote-source-toggle"},n.default.createElement(g,null)))),b.map((({destinationTokenValue:e,networkFees:t,isBestQuote:r,quoteSource:i,aggId:u},c)=>n.default.createElement("div",{className:(0,s.default)("select-quote-popover__row",{"select-quote-popover__row--selected":k===c,"select-quote-popover__row--no-hover":S}),onClick:()=>a(u),key:`select-quote-popover-row-${c}`,"data-testid":`select-quote-popover-row-${c}`},n.default.createElement("div",{className:"select-quote-popover__receiving"},n.default.createElement("div",{className:"select-quote-popover__receiving-value"},r&&n.default.createElement(l.default,{reverseColors:k!==c}),n.default.createElement("div",{className:"select-quote-popover__receiving-value-text",title:e},e)),"RFQ"===i&&n.default.createElement("span",{className:"select-quote-popover__zero-slippage"},_("swapZeroSlippage"))),n.default.createElement("div",{className:"select-quote-popover__network-fees"},!E&&y&&t),n.default.createElement("div",{className:"select-quote-popover__quote-source"},n.default.createElement("div",{className:(0,s.default)("select-quote-popover__quote-source-label",{"select-quote-popover__quote-source-label--green":"AGG"===i,"select-quote-popover__quote-source-label--orange":"RFQ"===i,"select-quote-popover__quote-source-label--blue":"DEX"===i})},i)),n.default.createElement("div",{className:"select-quote-popover__caret-right","data-testid":`select-quote-popover__caret-right-${c}`,onClick:e=>{e.stopPropagation(),o(u)},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},n.default.createElement("i",{className:"fa fa-angle-up"}))))))}T.propTypes={selectedAggId:o.default.string.isRequired,onSelect:o.default.func.isRequired,onCaretClick:o.default.func.isRequired,swapToSymbol:o.default.string.isRequired,quoteDataRows:o.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE).isRequired,sortDirection:o.default.number.isRequired,setSortDirection:o.default.func.isRequired,sortColumn:o.default.string,setSortColumn:o.default.func.isRequired,hideEstimatedGasFee:o.default.bool.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/sort-list.js"}],[5417,{"../../../components/component-library":4792,"../../../components/ui/url-icon":5026,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,classnames:2376,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=c(e("classnames")),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=c(e("../../../components/ui/url-icon")),u=e("../../../contexts/i18n");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({onClick:e,onClose:t,selectedToken:a,testId:r}){const c=(0,n.useContext)(u.I18nContext),d=(null==a?void 0:a.iconUrl)&&(null==a?void 0:a.symbol);return n.default.createElement("div",{className:(0,o.default)("dropdown-search-list","dropdown-search-list__selector-closed-container","dropdown-input-pair__selector--closed"),"data-testid":"dropdown-search-list",tabIndex:"0",onClick:e,onKeyUp:a=>{"Escape"===a.key?t():"Enter"===a.key&&e(a)}},n.default.createElement("div",{className:"dropdown-search-list__selector-closed"},d&&n.default.createElement(l.default,{url:a.iconUrl,className:"dropdown-search-list__selector-closed-icon",name:null==a?void 0:a.symbol}),n.default.createElement("div",{className:(0,o.default)("dropdown-search-list__labels",{"dropdown-search-list__labels--with-icon":d})},n.default.createElement("div",{className:"dropdown-search-list__item-labels"},n.default.createElement("span",{"data-testid":r,className:(0,o.default)("dropdown-search-list__closed-primary-label",{"dropdown-search-list__select-default":!(null!=a&&a.symbol)})},(null==a?void 0:a.symbol)||c("swapSelectAToken"))))),n.default.createElement(s.Icon,{name:s.IconName.ArrowDown,size:s.IconSize.Xs,marginRight:3,color:i.IconColor.iconAlternative}))}p.propTypes={onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,selectedToken:r.default.object.isRequired,testId:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/selected-token/selected-token.js"}],[5418,{"./slippage-buttons":5419},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./slippage-buttons"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/index.js"}],[5419,{"../../../../shared/constants/swaps":4331,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../components/ui/button":4893,"../../../components/ui/button-group":4891,"../../../components/ui/info-tooltip":4946,"../../../components/ui/toggle-button":5010,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,"../swaps.util":5431,classnames:2376,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=E;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=T(e("prop-types")),o=T(e("classnames")),s=e("../../../contexts/i18n"),i=T(e("../../../components/ui/button-group")),l=T(e("../../../components/ui/button")),u=T(e("../../../components/ui/info-tooltip")),c=T(e("../../../components/ui/toggle-button")),d=T(e("../../../components/ui/box")),p=e("../../../helpers/constants/design-system"),m=e("../swaps.util"),f=e("../../../../shared/constants/swaps"),g=e("../../../components/component-library/text/deprecated");function T(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function E({onSelect:e,maxAllowedSlippage:t,currentSlippage:a,smartTransactionsEnabled:r,smartTransactionsOptInStatus:T,setSmartTransactionsOptInStatus:h,currentSmartTransactionsError:E,isDirectWrappingEnabled:_}){const S=(0,n.useContext)(s.I18nContext),[v,y]=(0,n.useState)((()=>"number"!=typeof a||Object.values(f.Slippage).includes(a)?"":a.toString())),[w,b]=(0,n.useState)(!1),[k,A]=(0,n.useState)((()=>a===f.Slippage.high?1:a===f.Slippage.default?0:"number"==typeof a?2:0)),[I,C]=(0,n.useState)((()=>a!==f.Slippage.default)),[N,O]=(0,n.useState)(null);let P="";v&&(Number(v)<0?P=S("swapSlippageNegative"):Number(v)>0&&Number(v)<=1?P=S("swapLowSlippageError"):Number(v)>=5&&Number(v)<=t?P=S("swapHighSlippageWarning"):Number(v)>t&&(P=S("swapsExcessiveSlippageWarning")));const R=v||S("swapCustom");return(0,n.useEffect)((()=>{N&&w&&window.document.activeElement!==N&&N.focus()}),[N,w]),n.default.createElement("div",{className:"slippage-buttons"},n.default.createElement("button",{onClick:()=>C(!I),className:(0,o.default)("slippage-buttons__header",{"slippage-buttons__header--open":I})},n.default.createElement("div",{className:"slippage-buttons__header-text"},S("swapsAdvancedOptions")),I?n.default.createElement("i",{className:"fa fa-angle-up"}):n.default.createElement("i",{className:"fa fa-angle-down"})),n.default.createElement("div",{className:"slippage-buttons__content"},I&&n.default.createElement(n.default.Fragment,null,!_&&n.default.createElement("div",{className:"slippage-buttons__dropdown-content"},n.default.createElement("div",{className:"slippage-buttons__buttons-prefix"},n.default.createElement("div",{className:"slippage-buttons__prefix-text"},S("swapsMaxSlippage")),n.default.createElement(u.default,{position:"top",contentText:S("swapSlippageTooltip")})),n.default.createElement(i.default,{defaultActiveButtonIndex:2!==k||v?k:1,variant:"radiogroup",newActiveButtonIndex:k,className:(0,o.default)("button-group","slippage-buttons__button-group")},n.default.createElement(l.default,{onClick:()=>{y(""),b(!1),A(0),e(f.Slippage.default)}},S("swapSlippagePercent",[f.Slippage.default])),n.default.createElement(l.default,{onClick:()=>{y(""),b(!1),A(1),e(f.Slippage.high)}},S("swapSlippagePercent",[f.Slippage.high])),n.default.createElement(l.default,{className:(0,o.default)("slippage-buttons__button-group-custom-button",{"radio-button--danger":P}),onClick:()=>{A(2),b(!0)}},w?n.default.createElement("div",{className:(0,o.default)("slippage-buttons__custom-input",{"slippage-buttons__custom-input--danger":P})},n.default.createElement("input",{"data-testid":"slippage-buttons__custom-slippage",onChange:t=>{const{value:a}=t.target;!isNaN(Number(a))&&(y(a),e(Number(a)))},type:"text",maxLength:"4",ref:O,onBlur:()=>{b(!1)},value:v||""})):R,(v||w)&&n.default.createElement("div",{className:"slippage-buttons__percentage-suffix"},"%")))),r&&n.default.createElement(d.default,{marginTop:2,display:p.Display.Flex},n.default.createElement(d.default,{display:p.Display.Flex,alignItems:p.AlignItems.center,paddingRight:3},n.default.createElement(g.Text,{variant:p.TextVariant.bodySm,as:"h6",paddingRight:2,fontWeight:p.FontWeight.Bold},S("smartSwap")),E?n.default.createElement(u.default,{position:"top",contentText:(0,m.getTranslatedStxErrorMessage)(E,S)}):n.default.createElement(u.default,{position:"top",contentText:S("stxTooltip")})),n.default.createElement(c.default,{value:T,onToggle:e=>{h(!e,e)},offLabel:S("off"),onLabel:S("on"),disabled:Boolean(E)}))),P&&n.default.createElement("div",{className:"slippage-buttons__error-text"},P)))}E.propTypes={onSelect:r.default.func.isRequired,maxAllowedSlippage:r.default.number.isRequired,currentSlippage:r.default.number,smartTransactionsEnabled:r.default.bool.isRequired,smartTransactionsOptInStatus:r.default.bool,setSmartTransactionsOptInStatus:r.default.func,currentSmartTransactionsError:r.default.string,isDirectWrappingEnabled:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/slippage-buttons.js"}],[5420,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M14.4946 6.14779C14.4863 5.93594 14.3991 5.69108 14.2539 5.53666L9.51334 0.49958C9.1921 0.21091 8.57613 0.0917437 8.21709 0.425509C7.86344 0.754237 7.87396 1.39178 8.22627 1.72181L11.5595 5.25889L1.1618 5.25889C0.670919 5.25889 0.272949 5.65687 0.272949 6.14779C0.272949 6.6387 0.670919 7.03668 1.1618 7.03668L11.5595 7.03668L8.22627 10.5738C7.92297 10.8776 7.86691 11.5376 8.21709 11.8701C8.56718 12.2025 9.20529 12.0963 9.51334 11.796L14.2539 6.75891C14.4161 6.58653 14.4952 6.38428 14.4946 6.14779Z",fill:"#D6D9DC"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/arrow-icon.js"}],[5421,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5805 6.55143C36.1394 8.11033 37.3994 9.91222 38.3237 11.8681C38.7066 12.6782 39.0318 13.5148 39.2968 14.3714L39.3242 14.4606C39.4816 14.9785 39.6171 15.5037 39.73 16.0347C40.6511 20.3654 40.0335 24.9029 37.9511 28.8509C35.6001 33.308 31.5749 36.6487 26.7609 38.138C24.3773 38.8754 21.8717 39.1361 19.3873 38.9052C16.9029 38.6743 14.4883 37.9563 12.2813 36.7922C10.2608 35.7264 8.52045 34.3588 7.08333 32.7636C5.61245 31.1448 4.43054 29.2824 3.59178 27.2574C3.32329 26.6092 2.89685 25.2767 2.89685 25.2767H6.89583C7.68667 27.4068 8.96033 29.362 10.6288 30.9609L10.6318 30.96C11.5096 31.8005 12.501 32.5516 13.595 33.1786C15.8742 34.483 18.4736 35.1864 21.1455 35.1864C25.1768 35.1864 29.0429 33.585 31.8935 30.7345C34.744 27.8839 36.3455 24.0177 36.3455 19.9865C36.3455 18.7267 36.1891 17.483 35.8871 16.2814C35.8206 16.017 35.7471 15.7546 35.6666 15.4945C34.4752 11.6432 31.8027 8.42306 28.237 6.54231C24.6713 4.66156 20.5045 4.27429 16.6533 5.46571C12.8837 6.63189 9.71868 9.21706 7.82253 12.6699L12.8961 15.307L3.28331 18.3447L0.245605 8.73191L4.45005 10.9171C6.81537 6.56278 10.7905 3.30177 15.5303 1.83546C17.3658 1.26761 19.2587 0.986653 21.1455 0.986694C26.1846 0.986694 31.0173 2.98824 34.5805 6.55143Z",fill:"var(--color-primary-default)"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1252 22.1036L14.7107 18.689L12.0926 21.3257L18.1252 27.3584L30.2322 15.2515L27.614 12.6148L18.1252 22.1036Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/canceled-icon.js"}],[5422,{"./smart-transaction-status":5424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./smart-transaction-status"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/index.js"}],[5423,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.6806 6.55143C36.2395 8.11033 37.4995 9.91222 38.4238 11.8681C38.8067 12.6782 39.1319 13.5148 39.3969 14.3714L39.4243 14.4606C39.5817 14.9785 39.7172 15.5037 39.8301 16.0347C40.7512 20.3654 40.1336 24.9029 38.0512 28.8509C35.7002 33.308 31.675 36.6487 26.861 38.138C24.4773 38.8754 21.9718 39.1361 19.4874 38.9052C17.003 38.6743 14.5884 37.9563 12.3814 36.7922C10.3609 35.7264 8.62055 34.3588 7.18343 32.7636C5.71254 31.1448 4.53064 29.2824 3.69188 27.2574C3.42339 26.6092 2.99695 25.2767 2.99695 25.2767H6.99592C7.78677 27.4068 9.06042 29.362 10.7289 30.9609L10.7319 30.96C11.6097 31.8005 12.6011 32.5516 13.6951 33.1786C15.9743 34.483 18.5737 35.1864 21.2456 35.1864C25.2769 35.1864 29.143 33.585 31.9936 30.7345C34.8441 27.8839 36.4456 24.0177 36.4456 19.9865C36.4456 18.7267 36.2892 17.483 35.9872 16.2814C35.9207 16.017 35.8471 15.7546 35.7667 15.4945C34.5753 11.6432 31.9028 8.42306 28.3371 6.54231C24.7714 4.66156 20.6046 4.27429 16.7534 5.46571C12.9838 6.63189 9.81878 9.21706 7.92263 12.6699L12.9962 15.307L3.3834 18.3447L0.345703 8.73191L4.55015 10.9171C6.91547 6.56278 10.8906 3.30177 15.6304 1.83546C17.4659 1.26761 19.3588 0.986653 21.2456 0.986694C26.2847 0.986694 31.1174 2.98824 34.6806 6.55143Z",fill:"#D73A49"}),r.default.createElement("path",{d:"M18.5849 19.9869L15.1454 23.4264L17.9845 26.2655L21.424 22.826L24.8635 26.2655L27.7026 23.4264L24.2631 19.9869L27.7026 16.5473L24.8635 13.7082L21.424 17.1478L17.9845 13.7082L15.1454 16.5473L18.5849 19.9869Z",fill:"#D73A49"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/reverted-icon.js"}],[5424,{"../../../../shared/constants/metametrics":4323,"../../../../shared/constants/swaps":4331,"../../../../shared/constants/transaction":4336,"../../../../shared/lib/transactions-controller-utils":4344,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../components/ui/url-icon":5026,"../../../contexts/i18n":5029,"../../../contexts/metametrics":5030,"../../../ducks/metamask/metamask":5044,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/design-system":5052,"../../../helpers/constants/routes":5057,"../../../selectors":5449,"../../../store/actions":5456,"../create-new-swap":5378,"../swaps-footer":5429,"../swaps.util":5431,"../view-on-block-explorer":5433,"./arrow-icon":5420,"./canceled-icon":5421,"./reverted-icon":5423,"./success-icon":5425,"./timer-icon":5426,"./unknown-icon":5427,"@metamask/etherscan-link":1274,lodash:3617,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,M,x,D,L,F,B,j,q;const[W,U]=(0,n.useState)(!1),G=(0,n.useContext)(l.I18nContext),H=(0,o.useHistory)(),V=(0,r.useDispatch)(),K=(0,r.useSelector)(u.getFetchParams,i.isEqual)||{},{destinationTokenInfo:$={},sourceTokenInfo:Q={}}=(null==K?void 0:K.metaData)||{},Y=(0,r.useSelector)(c.isHardwareWallet),X=(0,r.useSelector)(c.getHardwareWalletType),z=(0,r.useSelector)(u.getSelectedQuote,i.isEqual),Z=(0,r.useSelector)(u.getTopQuote,i.isEqual),J=z||Z,ee=(0,r.useSelector)(u.getCurrentSmartTransactions,i.isEqual),te=(0,r.useSelector)(u.getSmartTransactionsOptInStatus),ae=(0,r.useSelector)(c.getCurrentChainId),ne=(0,r.useSelector)(c.getRpcPrefsForCurrentProvider,r.shallowEqual),re=(0,r.useSelector)(u.getSwapsNetworkConfig,r.shallowEqual),oe=(0,r.useSelector)(u.getSmartTransactionsEnabled),se=(0,r.useSelector)(u.getCurrentSmartTransactionsEnabled),ie=ne.blockExplorerUrl??d.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[ae]??null,le=(0,r.useSelector)(p.getNativeCurrency),ue=(0,r.useSelector)(c.conversionRateSelector),ce=(0,r.useSelector)(c.getUSDConversionRate),de=(0,r.useSelector)(c.getCurrentCurrency);let pe,me,fe=S.SmartTransactionStatus.pending,ge={};if(ee&&ee.length>0){var Te,he,Ee,_e;ge=ee[ee.length-1],pe=null===(Te=ge)||void 0===Te?void 0:Te.uuid,fe=(null===(he=ge)||void 0===he?void 0:he.status)||S.SmartTransactionStatus.pending,me=null===(Ee=ge)||void 0===Ee||null===(_e=Ee.statusMetadata)||void 0===_e?void 0:_e.cancellationFeeWei}const[Se,ve]=(0,n.useState)(re.stxStatusDeadline),ye={needs_two_confirmations:!0,token_from:Q.symbol??(null===(e=ge)||void 0===e?void 0:e.sourceTokenSymbol),token_from_amount:(null==K?void 0:K.value)??(null===(t=ge)||void 0===t?void 0:t.swapTokenValue),token_to:$.symbol??(null===(a=ge)||void 0===a?void 0:a.destinationTokenSymbol),request_type:null!=K&&K.balanceError?"Quote":"Order",slippage:null==K?void 0:K.slippage,custom_slippage:2===(null==K?void 0:K.slippage),is_hardware_wallet:Y,hardware_wallet_type:X,stx_enabled:oe,current_stx_enabled:se,stx_user_opt_in:te};let we;var be;null!=J&&J.destinationAmount&&(we=(0,A.calcTokenAmount)(null==J?void 0:J.destinationAmount,$.decimals??(null===(be=ge)||void 0===be?void 0:be.destinationTokenDecimals)).toPrecision(8));const ke=(0,n.useContext)(w.MetaMetricsContext),Ae=fe===S.SmartTransactionStatus.pending,Ie=Ae||fe===S.SmartTransactionStatus.success,Ce=null===(M=ge)||void 0===M||null===(x=M.statusMetadata)||void 0===x?void 0:x.minedHash;(0,n.useEffect)((()=>{ke({event:"STX Status Page Loaded",category:_.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye})}),[]),(0,n.useEffect)((()=>{let e;if(Ae&&pe){const t=()=>{const t=Math.round((Date.now()-ge.time)/1e3);if(t>re.stxStatusDeadline)return ve(0),void clearInterval(e);ve(re.stxStatusDeadline-t)};e=setInterval(t,1e3),t()}return()=>clearInterval(e)}),[V,Ae,pe,ge.time,re.stxStatusDeadline]),(0,n.useEffect)((()=>{V((0,E.setBackgroundSwapRouteState)("smartTransactionStatus")),setTimeout((()=>{V((0,E.stopPollingForQuotes)())}),1e3)}),[V]);let Ne,Oe,Pe,Re,Me=G("stxPendingPrivatelySubmittingSwap");Ae&&(W?Me=G("stxTryingToCancel"):me>0&&(Me=G("stxPendingPubliclySubmittingSwap")));if(fe===S.SmartTransactionStatus.success){var xe,De;if(Me=G("stxSuccess"),$.symbol||null!==(xe=ge)&&void 0!==xe&&xe.destinationTokenSymbol)Ne=G("stxSuccessDescription",[$.symbol??(null===(De=ge)||void 0===De?void 0:De.destinationTokenSymbol)]);Pe=n.default.createElement(I.default,null)}else"cancelled_user_cancelled"===fe||(null===(D=ge)||void 0===D||null===(L=D.statusMetadata)||void 0===L?void 0:L.minedTx)===S.SmartTransactionStatus.cancelled?(Me=G("stxUserCancelled"),Ne=G("stxUserCancelledDescription"),Pe=n.default.createElement(N.default,null)):fe.startsWith("cancelled")||fe.includes("deadline_missed")?(Me=G("stxCancelled"),Ne=G("stxCancelledDescription"),Oe=G("stxCancelledSubDescription"),Pe=n.default.createElement(N.default,null)):"unknown"===fe?(Me=G("stxUnknown"),Ne=G("stxUnknownDescription"),Pe=n.default.createElement(O.default,null)):"reverted"===fe&&(Me=G("stxFailure"),Ne=G("stxFailureDescription",[n.default.createElement("a",{className:"smart-transaction-status__support-link",key:"smart-transaction-status-support-link",href:"https://support.metamask.io",target:"_blank",rel:"noopener noreferrer"},G("customerSupport"))]),Pe=n.default.createElement(C.default,null));Ce&&pe&&(Re=(0,s.getBlockExplorerLink)({hash:Ce,chainId:ae},{blockExplorerUrl:ie}));const Le=ge.cancellable&&!W,Fe=()=>{const{feeInFiat:e}=(0,y.getFeeForSmartTransaction)({chainId:ae,currentCurrency:de,conversionRate:ue,USDConversionRate:ce,nativeCurrencySymbol:le,feeInWeiDec:me||0});return n.default.createElement(g.default,{marginBottom:0},n.default.createElement("a",{className:"smart-transaction-status__cancel-swap-link",href:"#",onClick:e=>{null==e||e.preventDefault(),U(!0),ke({event:"Cancel STX",category:_.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye}),V((0,u.cancelSwapsSmartTransaction)(pe))}},G("attemptToCancelSwap",[e])))};return n.default.createElement("div",{className:"smart-transaction-status"},n.default.createElement(g.default,{paddingLeft:8,paddingRight:8,height:h.BLOCK_SIZES.FULL,justifyContent:h.JustifyContent.flexStart,display:h.DISPLAY.FLEX,className:"smart-transaction-status__content"},n.default.createElement(g.default,{marginTop:10,marginBottom:0,display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.center,alignItems:h.AlignItems.center},n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySm,as:"h6"},`${(null==K?void 0:K.value)&&Number(K.value).toFixed(5)} `),n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySmBold,as:"h6",marginLeft:1,marginRight:2},Q.symbol??(null===(F=ge)||void 0===F?void 0:F.sourceTokenSymbol)),Q.iconUrl?n.default.createElement(T.default,{url:Q.iconUrl,className:"main-quote-summary__icon",name:Q.symbol??(null===(B=ge)||void 0===B?void 0:B.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(g.default,{display:h.DISPLAY.BLOCK,marginLeft:2,marginRight:2},n.default.createElement(P.default,null)),$.iconUrl?n.default.createElement(T.default,{url:$.iconUrl,className:"main-quote-summary__icon",name:$.symbol??(null===(j=ge)||void 0===j?void 0:j.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySm,as:"h6",marginLeft:2},`~${we&&Number(we).toFixed(5)} `),n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySmBold,as:"h6",marginLeft:1},$.symbol??(null===(q=ge)||void 0===q?void 0:q.destinationTokenSymbol))),n.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--top"}),Pe&&n.default.createElement(g.default,{marginTop:3,marginBottom:2},Pe),Ae&&n.default.createElement(g.default,{marginTop:7,marginBottom:1,display:h.DISPLAY.FLEX,justifyContent:h.JustifyContent.center,alignItems:h.AlignItems.center},n.default.createElement(R.default,null),n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySm,as:"h6",marginLeft:1},`${G("stxSwapCompleteIn")} `),n.default.createElement(f.Text,{color:h.TextColor.textAlternative,variant:h.TextVariant.bodySmBold,as:"h6",marginLeft:1,className:"smart-transaction-status__remaining-time"},(0,y.showRemainingTimeInMinAndSec)(Se))),n.default.createElement(f.Text,{color:h.TextColor.textDefault,variant:h.TextVariant.headingSm,as:"h4",fontWeight:h.FontWeight.Bold},Me),Ae&&n.default.createElement("div",{className:"smart-transaction-status__loading-bar-container"},n.default.createElement("div",{className:"smart-transaction-status__loading-bar",style:{width:100/re.stxStatusDeadline*(re.stxStatusDeadline-Se)+"%"}})),Ne&&n.default.createElement(f.Text,{variant:h.TextVariant.bodySm,as:"h6",marginTop:Re&&1,color:h.TextColor.textAlternative},Ne),Re&&n.default.createElement(k.default,{blockExplorerUrl:Re,sensitiveTrackingProperties:ye}),n.default.createElement(g.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--bottom"}),Oe&&n.default.createElement(f.Text,{variant:h.TextVariant.bodySm,as:"h6",marginTop:8,color:h.TextColor.textAlternative},Oe)),Le&&pe&&Ae&&n.default.createElement(Fe,null),fe===S.SmartTransactionStatus.success?n.default.createElement(b.default,{sensitiveTrackingProperties:ye}):null,n.default.createElement(v.default,{onSubmit:async()=>{Ie?(await V((0,u.prepareToLeaveSwaps)()),H.push(m.DEFAULT_ROUTE)):H.push(m.BUILD_QUOTE_ROUTE)},onCancel:async()=>{await V((0,u.prepareToLeaveSwaps)()),H.push(m.DEFAULT_ROUTE)},submitText:G(Ie?"close":"tryAgain"),hideCancel:Ie,cancelText:G("close"),className:"smart-transaction-status__swaps-footer"}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/etherscan-link"),i=e("lodash"),l=e("../../../contexts/i18n"),u=e("../../../ducks/swaps/swaps"),c=e("../../../selectors"),d=e("../../../../shared/constants/swaps"),p=e("../../../ducks/metamask/metamask"),m=e("../../../helpers/constants/routes"),f=e("../../../components/component-library/text/deprecated"),g=M(e("../../../components/ui/box")),T=M(e("../../../components/ui/url-icon")),h=e("../../../helpers/constants/design-system"),E=e("../../../store/actions"),_=e("../../../../shared/constants/metametrics"),S=e("../../../../shared/constants/transaction"),v=M(e("../swaps-footer")),y=e("../swaps.util"),w=e("../../../contexts/metametrics"),b=M(e("../create-new-swap")),k=M(e("../view-on-block-explorer")),A=e("../../../../shared/lib/transactions-controller-utils"),I=M(e("./success-icon")),C=M(e("./reverted-icon")),N=M(e("./canceled-icon")),O=M(e("./unknown-icon")),P=M(e("./arrow-icon")),R=M(e("./timer-icon"));function M(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/smart-transaction-status.js"}],[5425,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5457 19.8983C34.5457 23.9296 32.9443 27.7958 30.0937 30.6463C27.2432 33.4969 23.377 35.0983 19.3457 35.0983C15.3144 35.0983 11.4482 33.4969 8.59768 30.6463C5.74713 27.7958 4.1457 23.9296 4.1457 19.8983C4.1457 15.867 5.74713 12.0008 8.59768 9.15029C11.4482 6.29974 15.3144 4.69832 19.3457 4.69832C20.7897 4.69832 22.1957 4.90732 23.5257 5.28732L26.5087 2.30432C24.3047 1.39232 21.8917 0.898315 19.3457 0.898315C16.8506 0.898315 14.3799 1.38977 12.0747 2.3446C9.76953 3.29944 7.67499 4.69897 5.91067 6.46329C2.34748 10.0265 0.345703 14.8592 0.345703 19.8983C0.345703 24.9374 2.34748 29.7702 5.91067 33.3333C7.67499 35.0977 9.76953 36.4972 12.0747 37.452C14.3799 38.4069 16.8506 38.8983 19.3457 38.8983C24.3848 38.8983 29.2175 36.8965 32.7807 33.3333C36.3439 29.7702 38.3457 24.9374 38.3457 19.8983H34.5457ZM11.5747 16.2503L8.8957 18.9483L17.4457 27.4983L36.4457 8.49832L33.7667 5.80032L17.4457 22.1213L11.5747 16.2503Z",fill:"#28A745"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/success-icon.js"}],[5426,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M7.36621 0.0810547C3.62012 0.0810547 0.584961 3.11621 0.584961 6.8623C0.584961 10.6084 3.62012 13.6436 7.36621 13.6436C11.1123 13.6436 14.1475 10.6084 14.1475 6.8623C14.1475 3.11621 11.1123 0.0810547 7.36621 0.0810547ZM7.36621 12.3311C4.33105 12.3311 1.89746 9.89746 1.89746 6.8623C1.89746 3.85449 4.33105 1.39355 7.36621 1.39355C10.374 1.39355 12.835 3.85449 12.835 6.8623C12.835 9.89746 10.374 12.3311 7.36621 12.3311ZM9.03418 9.4873C9.19824 9.59668 9.38965 9.56934 9.49902 9.40527L10.0186 8.72168C10.1279 8.55762 10.1006 8.36621 9.93652 8.25684L8.13184 6.91699V3.03418C8.13184 2.87012 7.96777 2.70605 7.80371 2.70605H6.92871C6.7373 2.70605 6.60059 2.87012 6.60059 3.03418V7.5459C6.60059 7.62793 6.62793 7.7373 6.70996 7.79199L9.03418 9.4873Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/timer-icon.js"}],[5427,{react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("circle",{cx:"19.1533",cy:"19.2715",r:"17.1",stroke:"var(--color-primary-default)",strokeWidth:"3.8"}),r.default.createElement("path",{d:"M16.712 21.5034C16.712 20.7834 16.88 20.1834 17.216 19.7034C17.568 19.2074 18.08 18.7274 18.752 18.2634C19.008 18.0874 19.264 17.9274 19.52 17.7834C19.776 17.6394 20 17.4874 20.192 17.3274C20.4 17.1514 20.56 16.9674 20.672 16.7754C20.8 16.5674 20.864 16.3194 20.864 16.0314C20.864 15.5354 20.688 15.1594 20.336 14.9034C20 14.6474 19.592 14.5194 19.112 14.5194C18.616 14.5194 18.16 14.6794 17.744 14.9994C17.344 15.3034 17.144 15.7674 17.144 16.3914H13.52C13.52 15.6394 13.664 14.9354 13.952 14.2794C14.24 13.6074 14.632 13.0314 15.128 12.5514C15.64 12.0554 16.232 11.6634 16.904 11.3754C17.592 11.0874 18.328 10.9434 19.112 10.9434C19.896 10.9434 20.616 11.0794 21.272 11.3514C21.944 11.6234 22.512 11.9834 22.976 12.4314C23.456 12.8794 23.824 13.3994 24.08 13.9914C24.352 14.5674 24.488 15.1754 24.488 15.8154C24.488 16.2314 24.456 16.6234 24.392 16.9914C24.344 17.3594 24.24 17.7114 24.08 18.0474C23.936 18.3834 23.728 18.7114 23.456 19.0314C23.184 19.3514 22.84 19.6634 22.424 19.9674C21.784 20.4474 21.272 20.8234 20.888 21.0954C20.52 21.3674 20.336 21.6474 20.336 21.9354V21.9594H16.712V21.5034ZM18.512 28.4634C18.16 28.4634 17.824 28.3994 17.504 28.2714C17.2 28.1274 16.928 27.9434 16.688 27.7194C16.464 27.4794 16.28 27.2074 16.136 26.9034C16.008 26.5834 15.944 26.2474 15.944 25.8954C15.944 25.5434 16.008 25.2154 16.136 24.9114C16.28 24.5914 16.464 24.3194 16.688 24.0954C16.928 23.8554 17.2 23.6714 17.504 23.5434C17.824 23.3994 18.16 23.3274 18.512 23.3274C18.864 23.3274 19.192 23.3994 19.496 23.5434C19.816 23.6714 20.088 23.8554 20.312 24.0954C20.552 24.3194 20.736 24.5914 20.864 24.9114C21.008 25.2154 21.08 25.5434 21.08 25.8954C21.08 26.2474 21.008 26.5834 20.864 26.9034C20.736 27.2074 20.552 27.4794 20.312 27.7194C20.088 27.9434 19.816 28.1274 19.496 28.2714C19.192 28.3994 18.864 28.4634 18.512 28.4634Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/unknown-icon.js"}],[5428,{"../../../../shared/constants/swaps":4331,"../../../components/component-library":4792,"../../../components/component-library/banner-alert":4755,"../../../components/component-library/text/deprecated":4826,"../../../components/ui/box":4889,"../../../contexts/i18n":5029,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/design-system":5052,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=T;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=f(e("prop-types")),s=e("../../../contexts/i18n"),i=e("../../../components/component-library/banner-alert"),l=f(e("../../../components/ui/box")),u=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),d=e("../../../components/component-library/text/deprecated"),p=e("../../../../shared/constants/swaps"),m=e("../../../ducks/swaps/swaps");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function T({swapsErrorKey:e}){const t=(0,n.useContext)(s.I18nContext),a=(0,r.useDispatch)();let o,f,g=u.SEVERITIES.DANGER;switch(e){case p.SLIPPAGE_OVER_LIMIT_ERROR:o=t("swapSlippageOverLimitTitle"),f=n.default.createElement(l.default,null,n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapSlippageOverLimitDescription")),n.default.createElement(c.ButtonLink,{size:u.Size.INHERIT,textProps:{variant:u.TextVariant.bodyMd,alignItems:u.AlignItems.flexStart},onClick:e=>{e.preventDefault(),a((0,m.setTransactionSettingsOpened)(!0))}},t("swapEditTransactionSettings")));break;case p.SLIPPAGE_VERY_HIGH_ERROR:g=u.SEVERITIES.WARNING,o=t("swapSlippageVeryHighTitle"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapSlippageVeryHighDescription"));break;case p.SLIPPAGE_TOO_LOW_ERROR:g=u.SEVERITIES.WARNING,o=t("swapSlippageTooLowTitle"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapSlippageTooLowDescription"));break;case p.SLIPPAGE_NEGATIVE_ERROR:o=t("swapSlippageNegativeTitle"),f=n.default.createElement(l.default,null,n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapSlippageNegativeDescription")),n.default.createElement(c.ButtonLink,{size:u.Size.INHERIT,textProps:{variant:u.TextVariant.bodyMd,alignItems:u.AlignItems.flexStart},onClick:e=>{e.preventDefault(),a((0,m.setTransactionSettingsOpened)(!0))}},t("swapEditTransactionSettings")));break;case p.QUOTES_NOT_AVAILABLE_ERROR:o=t("swapQuotesNotAvailableErrorTitle"),f=n.default.createElement(l.default,null,n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapQuotesNotAvailableDescription")),n.default.createElement(c.ButtonLink,{size:u.Size.INHERIT,textProps:{variant:u.TextVariant.bodyMd,alignItems:u.AlignItems.flexStart},as:"a",href:"https://support.metamask.io/hc/en-us/articles/4405093054363-User-Guide-Swaps",target:"_blank",rel:"noopener noreferrer"},t("swapLearnMore")));break;case p.ERROR_FETCHING_QUOTES:o=t("swapFetchingQuotesErrorTitle"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapFetchingQuotesErrorDescription"));break;case p.CONTRACT_DATA_DISABLED_ERROR:o=t("swapContractDataDisabledErrorTitle"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapContractDataDisabledErrorDescription"));break;case p.QUOTES_EXPIRED_ERROR:o=t("swapQuotesExpiredErrorTitle"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("swapQuotesExpiredErrorDescription"));break;case p.OFFLINE_FOR_MAINTENANCE:o=t("offlineForMaintenance"),f=n.default.createElement(d.Text,{variant:u.TextVariant.bodyMd,as:"h6"},t("metamaskSwapsOfflineDescription"));break;case p.SWAP_FAILED_ERROR:o=t("swapFailedErrorTitle")}return n.default.createElement(i.BannerAlert,{severity:g,title:o},f)}T.propTypes={swapsErrorKey:o.default.string}}}},{package:"$root$",file:"ui/pages/swaps/swaps-banner-alert/swaps-banner-alert.js"}],[5429,{"./swaps-footer":5430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./swaps-footer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/index.js"}],[5430,{"../../../components/ui/page-container/page-container-footer":4975,"../../../contexts/i18n":5029,classnames:2376,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=l(e("prop-types")),o=l(e("classnames")),s=e("../../../contexts/i18n"),i=l(e("../../../components/ui/page-container/page-container-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c({onCancel:e,hideCancel:t,onSubmit:a,submitText:r,disabled:l,showTermsOfService:u,showTopBorder:c,className:d="",cancelText:p}){const m=(0,n.useContext)(s.I18nContext);return n.default.createElement("div",{className:"swaps-footer"},n.default.createElement("div",{className:(0,o.default)("swaps-footer__buttons",d,{"swaps-footer__buttons--border":c})},n.default.createElement(i.default,{onCancel:e,hideCancel:t,cancelText:p||m("back"),onSubmit:a,submitText:r,footerClassName:(0,o.default)("swaps-footer__custom-page-container-footer-class",d),footerButtonClassName:(0,o.default)("swaps-footer__custom-page-container-footer-button-class",{"swaps-footer__custom-page-container-footer-button-class--single":t}),disabled:l})),u&&n.default.createElement("div",{className:"swaps-footer__bottom-text",onClick:()=>global.platform.openTab({url:"https://metamask.io/terms.html"})},m("termsOfService")))}c.propTypes={onCancel:r.default.func,hideCancel:r.default.bool,onSubmit:r.default.func.isRequired,submitText:r.default.string,disabled:r.default.bool,showTermsOfService:r.default.bool,showTopBorder:r.default.bool,className:r.default.string,cancelText:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/swaps-footer.js"}],[5431,{"../../../shared/constants/common":4318,"../../../shared/constants/network":4324,"../../../shared/constants/swaps":4331,"../../../shared/lib/fetch-with-cache":4338,"../../../shared/lib/swaps-utils":4341,"../../../shared/lib/transactions-controller-utils":4344,"../../../shared/modules/conversion.utils":4350,"../../../shared/modules/hexstring-utils":4354,"../../../shared/modules/swaps.utils":4364,"../../helpers/utils/confirm-tx.util":5075,"bignumber.js":2222},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.countDecimals=a.StxErrorTypes=void 0,a.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),a=await(0,u.default)(t,{method:"GET",headers:h},{cacheRefreshTime:g}),n={};for(const e in a)(0,p.validateData)(S,a[e],t)&&(n[e]=a[e]);return n},a.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,u.default)(`${e}/featureFlags`,{method:"GET",headers:h},{cacheRefreshTime:6e5})},a.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),a=await(0,u.default)(t,{method:"GET",headers:h},{cacheRefreshTime:3e4});if(!(0,p.validateData)(y,a,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:n,ProposeGasPrice:r,FastGasPrice:o}=a;return{safeLow:n,average:r,fast:o}},a.fetchToken=async function(e,t){const a=(0,p.getBaseApi)("token",t);return await(0,u.default)(`${a}?address=${e}`,{method:"GET",headers:h},{cacheRefreshTime:g})},a.fetchTokenPrice=async function(e){var t;const a=`contract_addresses=${e}&vs_currencies=eth`,n=await(0,u.default)(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${a}`,{method:"GET"},{cacheRefreshTime:6e4});return null==n||null===(t=n[e])||void 0===t?void 0:t.eth},a.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),a=await(0,u.default)(t,{method:"GET",headers:h},{cacheRefreshTime:g});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...a.filter((a=>(0,p.validateData)(E,a,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(a.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(a.address,e))))]},a.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),a=await(0,u.default)(t,{method:"GET",headers:h},{cacheRefreshTime:g})||[];return a.reduce(((e,a,n)=>(0,p.validateData)(_,a,t)?{...e,[a.address]:{index:String(n)}}:e),{})},a.formatSwapsValueForDisplay=k,a.getNetworkNameByChainId=a.getFeeForSmartTransaction=a.getClassNameForCharLength=void 0,a.getRenderableNetworkFeesForQuote=b,a.parseSmartTransactionsError=a.isContractAddressValid=a.getTranslatedStxErrorMessage=a.getSwapsLivenessForNetwork=void 0,a.quotesToRenderableData=function({quotes:e,gasPrice:t,conversionRate:a,currentCurrency:n,approveGas:o,tokenConversionRates:i,chainId:l,smartTransactionEstimatedGas:u,nativeCurrencySymbol:c,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:g=0,sourceTokenInfo:T,destinationTokenInfo:h,slippage:E,aggType:_,aggregator:S,gasEstimateWithRefund:v,averageGas:y,fee:A,trade:I,multiLayerL1TradeFeeTotal:C}=e;let N=null;null!==C&&null!==p?N=(0,m.sumHexes)(C||"0x0",p||"0x0"):null!==C&&(N=C);const O=(0,d.calcTokenAmount)(g,T.decimals).toString(10),P=(0,d.calcTokenAmount)(f,h.decimals).toPrecision(8);let R=null,M=null,x=null,D=null;({feeInFiat:R,feeInEth:M,rawNetworkFees:x,rawEthFee:D}=b({tradeGas:v||(0,m.decimalToHex)(y||8e5),approveGas:o,gasPrice:t,currentCurrency:n,conversionRate:a,tradeValue:I.value,sourceSymbol:T.symbol,sourceAmount:g,chainId:l,multiLayerL1FeeTotal:N})),u&&({feeInFiat:R,feeInEth:M}=w({chainId:l,currentCurrency:n,conversionRate:a,nativeCurrencySymbol:c,feeInWeiDec:u.feeEstimate}));const L=new r.BigNumber(100-E).div(100),F=new r.BigNumber(P).times(L).toFixed(6),B=i[h.address],j=(0,s.isSwapsDefaultTokenSymbol)(h.symbol,l)?(0,d.calcTokenAmount)(f,h.decimals).minus(D,10):new r.BigNumber(B||0,10).times((0,d.calcTokenAmount)(f,h.decimals),10).minus(D,10);let q,W=E;return"AGG"===_?q="swapAggregator":"RFQ"===_?(q="swapRequestForQuotation",W=0):q="DEX"===_?"swapDecentralizedExchange":"CONTRACT"===_?"swapDirectContract":"swapUnknown",{aggId:S,amountReceiving:`${P} ${h.symbol}`,destinationTokenDecimals:h.decimals,destinationTokenSymbol:h.symbol,destinationTokenValue:k(P),destinationIconUrl:h.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:q,feeInEth:M,detailedNetworkFees:`${M} (${R})`,networkFees:R,quoteSource:_,rawNetworkFees:x,slippage:W,sourceTokenDecimals:T.decimals,sourceTokenSymbol:T.symbol,sourceTokenValue:O,sourceTokenIconUrl:T.iconUrl,ethValueOfTrade:j,minimumAmountReceived:F,metaMaskFee:A}}))},a.showRemainingTimeInMinAndSec=void 0;var n,r=e("bignumber.js"),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),l=e("../../helpers/utils/confirm-tx.util"),u=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},c=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/constants/common");const g=3e5,T="usd",h={"X-Client-Id":o.SWAPS_CLIENT_ID},E=[{property:"address",type:"string",validator:e=>(0,c.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],_=E.slice(0,2),S=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],v=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),y=[{property:"SafeGasPrice",type:"string",validator:v},{property:"ProposeGasPrice",type:"string",validator:v},{property:"FastGasPrice",type:"string",validator:v}];const w=({chainId:e,currentCurrency:t,conversionRate:a,USDConversionRate:n,nativeCurrencySymbol:r,feeInWeiDec:s})=>{var i;const u=(0,m.decimalToHex)(s),c=(0,m.getValueFromWeiHex)({value:u,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:a,numberOfDecimals:2});let p;p=t===T?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:T,conversionRate:n,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,l.formatCurrency)(d,t),feeInEth:`${c} ${r||(null===(i=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:c}};function b({tradeGas:e,approveGas:t,gasPrice:a,currentCurrency:n,conversionRate:i,USDConversionRate:u,tradeValue:c,sourceSymbol:p,sourceAmount:g,chainId:h,nativeCurrencySymbol:E,multiLayerL1FeeTotal:_}){const S=new r.BigNumber(e||"0x0",16).plus(t||"0x0",16).toString(16);let v=(0,d.calcGasTotal)(S,a);null!==_&&(v=(0,m.sumHexes)(v||"0x0",_||"0x0"));const y=new r.BigNumber(c,16).minus((0,s.isSwapsDefaultTokenSymbol)(p,h)?g:0,10).toString(16),w=new r.BigNumber(v,16).plus(y,16).toString(16),b=(0,m.getValueFromWeiHex)({value:w,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),k=(0,m.getValueFromWeiHex)({value:w,toCurrency:n,conversionRate:i,numberOfDecimals:2}),A=(0,l.formatCurrency)(k,n);let I;I=n===T?k:(0,m.getValueFromWeiHex)({value:w,toCurrency:T,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:k,feeInUsd:I,rawEthFee:b,feeInFiat:A,feeInEth:`${b} ${E||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[h].symbol}`,nonGasFee:y}}function k(e){let t=(0,d.toPrecisionWithoutTrailingZeros)(e,12);return t.match(/e[+-]/u)&&(t=new r.BigNumber(t).toFixed()),t}a.getFeeForSmartTransaction=w;a.getClassNameForCharLength=(e,t)=>{let a;return a=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${a}`};a.isContractAddressValid=(e,t)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const A=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return o.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return o.ARBITRUM;default:return""}};a.getNetworkNameByChainId=A;a.getSwapsLivenessForNetwork=(e,t={})=>{const a=A(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[a])return{swapsFeatureIsLive:!1};return t[a].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[a].fallbackToV1}};a.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};a.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let I=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});a.StxErrorTypes=I;a.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case I.unavailable:case I.regularTxPending:return t("smartSwapsErrorUnavailable");case I.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};a.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[5432,{"../../../../shared/constants/swaps":4331,"../../../components/component-library":4792,"../../../components/ui/box":4889,"../../../components/ui/button":4893,"../../../components/ui/button-group":4891,"../../../components/ui/info-tooltip":4946,"../../../components/ui/toggle-button":5010,"../../../components/ui/typography":5021,"../../../contexts/i18n":5029,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/design-system":5052,"../../../store/actions":5456,"../swaps.util":5431,classnames:2376,"prop-types":3766,react:4043,"react-redux":4008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=S(e("prop-types")),s=S(e("classnames")),i=e("../../../contexts/i18n"),l=S(e("../../../components/ui/button-group")),u=S(e("../../../components/ui/button")),c=S(e("../../../components/ui/info-tooltip")),d=S(e("../../../components/ui/toggle-button")),p=S(e("../../../components/ui/box")),m=S(e("../../../components/ui/typography")),f=e("../../../helpers/constants/design-system"),g=e("../swaps.util"),T=e("../../../../shared/constants/swaps"),h=e("../../../components/component-library"),E=e("../../../store/actions"),_=e("../../../ducks/swaps/swaps");function S(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function y({onSelect:e,onModalClose:t,maxAllowedSlippage:a,currentSlippage:o,smartTransactionsEnabled:S,smartTransactionsOptInStatus:v,setSmartTransactionsOptInStatus:y,currentSmartTransactionsError:w,isDirectWrappingEnabled:b}){const k=(0,n.useContext)(i.I18nContext),A=(0,r.useDispatch)(),I=(0,r.useSelector)(_.getSwapsErrorKey),[C,N]=(0,n.useState)((()=>"number"!=typeof o||Object.values(T.Slippage).includes(o)?"":o.toString())),[O,P]=(0,n.useState)(!1),[R,M]=(0,n.useState)((()=>o===T.Slippage.high?1:o===T.Slippage.default?0:"number"==typeof o?2:0)),[x,D]=(0,n.useState)(null),[L,F]=(0,n.useState)(o),[B,j]=(0,n.useState)(v),q=L!==o||B!==v;let W="",U="",G=f.SEVERITIES.INFO;C&&(Number(C)<0?(G=f.SEVERITIES.DANGER,W=k("swapSlippageNegativeDescription"),U=k("swapSlippageNegativeTitle"),A((0,E.setSwapsErrorKey)(T.SLIPPAGE_NEGATIVE_ERROR))):Number(C)>0&&Number(C)<=1?(G=f.SEVERITIES.WARNING,W=k("swapSlippageTooLowDescription"),U=k("swapSlippageTooLowTitle")):Number(C)>=5&&Number(C)<=a?(G=f.SEVERITIES.WARNING,W=k("swapSlippageVeryHighDescription"),U=k("swapSlippageVeryHighTitle")):Number(C)>a?(G=f.SEVERITIES.DANGER,W=k("swapSlippageOverLimitDescription"),U=k("swapSlippageOverLimitTitle"),A((0,E.setSwapsErrorKey)(T.SLIPPAGE_OVER_LIMIT_ERROR))):0===Number(C)?(G=f.SEVERITIES.INFO,W=k("swapSlippageZeroDescription"),U=k("swapSlippageZeroTitle")):I&&A((0,E.setSwapsErrorKey)("")));const H=G===f.SEVERITIES.DANGER,V=C||k("swapCustom");return(0,n.useEffect)((()=>{x&&O&&window.document.activeElement!==x&&x.focus()}),[x,O]),(0,n.useEffect)((()=>{2!==R&&A((0,E.setSwapsErrorKey)(""))}),[A,R]),n.default.createElement(h.Modal,{onClose:t,isOpen:!0,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(h.ModalOverlay,null),n.default.createElement(h.ModalContent,null,n.default.createElement(h.ModalHeader,{onClose:t},k("transactionSettings")),n.default.createElement(p.default,{display:f.DISPLAY.FLEX,flexDirection:f.FlexDirection.Column,justifyContent:f.JustifyContent.spaceBetween,alignItems:f.AlignItems.stretch,className:"transaction-settings__content"},n.default.createElement(p.default,{marginTop:7,marginBottom:5},n.default.createElement(n.default.Fragment,null,S&&n.default.createElement(p.default,{marginTop:2,marginBottom:6,display:f.DISPLAY.FLEX,justifyContent:f.JustifyContent.spaceBetween},n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center,paddingRight:3},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},k("smartSwap")),w?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(w,k)}):n.default.createElement(c.default,{position:"top",contentText:k("stxTooltip"),iconFillColor:"var(--color-icon-muted)"})),n.default.createElement(d.default,{value:B,onToggle:e=>{j(!e,e)},offLabel:k("off"),onLabel:k("on"),disabled:Boolean(w)})),!b&&n.default.createElement(n.default.Fragment,null,n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},k("swapsMaxSlippage")),w?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(w,k)}):n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:k("swapSlippageTooltip")})),n.default.createElement(p.default,{display:f.DISPLAY.FLEX},n.default.createElement(l.default,{defaultActiveButtonIndex:2!==R||C?R:1,variant:"radiogroup",newActiveButtonIndex:R,className:(0,s.default)("button-group","transaction-settings__button-group")},n.default.createElement(u.default,{onClick:()=>{N(""),P(!1),M(0),F(T.Slippage.default)}},k("swapSlippagePercent",[T.Slippage.default])),n.default.createElement(u.default,{onClick:()=>{N(""),P(!1),M(1),F(T.Slippage.high)}},k("swapSlippagePercent",[T.Slippage.high])),n.default.createElement(u.default,{className:(0,s.default)("transaction-settings__button-group-custom-button",{"radio-button--danger":H}),onClick:()=>{M(2),P(!0)}},O?n.default.createElement("div",{className:(0,s.default)("transaction-settings__custom-input",{"transaction-settings__custom-input--danger":H})},n.default.createElement("input",{"data-testid":"transaction-settings-custom-slippage",onChange:e=>{const{value:t}=e.target;!isNaN(Number(t))&&(N(t),F(Number(t)))},type:"text",maxLength:"4",ref:D,onBlur:()=>{P(!1)},onKeyDown:e=>{"Enter"===e.key&&P(!1)},value:C||""})):V,(C||O)&&n.default.createElement("div",{className:"transaction-settings__percentage-suffix"},"%")))))),W&&n.default.createElement(p.default,{marginTop:5},n.default.createElement(h.BannerAlert,{severity:G,title:U},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,testId:"mm-banner-alert-notification-text"},W)))),n.default.createElement(p.default,{marginTop:5},n.default.createElement(h.ButtonPrimary,{onClick:()=>{L!==o&&e(L),B!==v&&y(B),t()},block:!0,disabled:!q,"data-testid":"update-transaction-settings-button"},k("update"))))))}y.propTypes={onSelect:o.default.func.isRequired,onModalClose:o.default.func.isRequired,maxAllowedSlippage:o.default.number.isRequired,currentSlippage:o.default.number,smartTransactionsEnabled:o.default.bool.isRequired,smartTransactionsOptInStatus:o.default.bool,setSmartTransactionsOptInStatus:o.default.func,currentSmartTransactionsError:o.default.string,isDirectWrappingEnabled:o.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/transaction-settings/transaction-settings.js"}],[5433,{"./view-on-block-explorer":5434},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-on-block-explorer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/index.js"}],[5434,{"../../../../shared/constants/metametrics":4323,"../../../components/ui/box":4889,"../../../contexts/i18n":5029,"../../../contexts/metametrics":5030,"../../../helpers/utils/util":5093,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=c(e("prop-types")),o=c(e("../../../components/ui/box")),s=e("../../../contexts/i18n"),i=e("../../../helpers/utils/util"),l=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({blockExplorerUrl:e,sensitiveTrackingProperties:t}){const a=(0,n.useContext)(s.I18nContext),r=(0,n.useContext)(l.MetaMetricsContext),c=(0,i.getURLHostName)(e);return n.default.createElement(o.default,{marginTop:6,className:"view-on-block-explorer"},n.default.createElement("button",{onClick:()=>{r({event:u.MetaMetricsEventName.ExternalLinkClicked,category:u.MetaMetricsEventCategory.Swaps,sensitiveProperties:t,properties:{link_type:u.MetaMetricsEventLinkType.TransactionBlockExplorer,location:"Swap Transaction",url_domain:c}}),global.platform.openTab({url:e})}},a("viewOnCustomBlockExplorer",[a("blockExplorerSwapAction"),c])))}p.propTypes={blockExplorerUrl:r.default.string.isRequired,sensitiveTrackingProperties:r.default.object.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/view-on-block-explorer.js"}],[5435,{"./view-quote":5437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-quote"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/index.js"}],[5436,{"../../../../shared/constants/gas":4319,"../../../components/component-library":4792,"../../../components/ui/actionable-message/actionable-message":4885,"../../../components/ui/box":4889,"../../../components/ui/tooltip":5017,"../../../contexts/i18n":5029,"../../../helpers/constants/design-system":5052,classnames:2376,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=m(e("prop-types")),o=m(e("classnames")),s=e("../../../contexts/i18n"),i=m(e("../../../components/ui/actionable-message/actionable-message")),l=m(e("../../../components/ui/tooltip")),u=m(e("../../../components/ui/box")),c=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/gas"),p=e("../../../components/component-library");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:m,acknowledged:f,priceSlippageFromSource:g,priceSlippageFromDestination:T,priceDifferencePercentage:h,priceSlippageUnknownFiatValue:E}=e,_=(0,n.useContext)(s.I18nContext);let S="",v="",y="",w="";return E?(S=_("swapPriceUnavailableTitle"),v=_("swapPriceUnavailableDescription"),y=d.GasRecommendations.high,w=_("tooltipApproveButton")):(S=_("swapPriceDifferenceTitle",[h]),v=_("swapPriceDifference",[a,t.sourceTokenInfo.symbol,g,r,t.destinationTokenInfo.symbol,T]),y=t.priceSlippage.bucket,w=_("tooltipApproveButton")),n.default.createElement("div",{className:(0,o.default)("view-quote__price-difference-warning-wrapper",y)},n.default.createElement(i.default,{message:n.default.createElement("div",{className:"view-quote__price-difference-warning-contents"},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-text"},n.default.createElement(u.default,{display:c.DISPLAY.FLEX,justifyContent:c.JustifyContent.spaceBetween,paddingBottom:2},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-title"},S),n.default.createElement(l.default,{position:"bottom",title:_("swapPriceImpactTooltip")},n.default.createElement(p.Icon,{name:p.IconName.Info}))),v,!f&&n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-actions"},n.default.createElement("button",{onClick:()=>{m()}},w))))}))}g.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote-price-difference.js"}],[5437,{"../../../../app/scripts/lib/util":82,"../../../../shared/constants/gas":4319,"../../../../shared/constants/metametrics":4323,"../../../../shared/constants/swaps":4331,"../../../../shared/lib/metamask-controller-utils":4339,"../../../../shared/lib/swaps-utils":4341,"../../../../shared/lib/transactions-controller-utils":4344,"../../../../shared/modules/conversion.utils":4350,"../../../../shared/modules/string-utils":4363,"../../../../shared/modules/transaction.utils":4365,"../../../components/ui/actionable-message/actionable-message":4885,"../../../components/ui/box":4889,"../../../components/ui/pulse-loader":4982,"../../../contexts/i18n":5029,"../../../contexts/metametrics":5030,"../../../ducks/metamask/metamask":5044,"../../../ducks/swaps/swaps":5048,"../../../helpers/constants/routes":5057,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":5086,"../../../hooks/gasFeeInput/useGasFeeInputs":5099,"../../../hooks/useEqualityCheck":5113,"../../../hooks/useEthFiatAmount":5114,"../../../hooks/usePrevious":5120,"../../../hooks/useTokenTracker":5133,"../../../selectors":5449,"../../../store/actionConstants":5455,"../../../store/actions":5456,"../../confirm-approve/confirm-approve.util":5156,"../countdown-timer":5376,"../fee-card":5386,"../main-quote-summary":5394,"../select-quote-popover":5410,"../swaps-footer":5429,"../swaps.util":5431,"./view-quote-price-difference":5436,"@sentry/browser":1752,"bignumber.js":2222,classnames:2376,lodash:3617,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,V,K,Q;const Y=(0,o.useHistory)(),X=(0,r.useDispatch)(),z=(0,n.useContext)(c.I18nContext),Z=(0,n.useContext)(T.MetaMetricsContext),[J,ee]=(0,n.useState)(!1),[te,ae]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(null),[ue,ce]=(0,n.useState)(null),[de,pe]=(0,n.useState)(null),[me]=(0,n.useState)(Date.now()),[fe,ge]=(0,n.useState)(!1),Te=[O.GasRecommendations.high,O.GasRecommendations.medium],he=(0,r.useSelector)(E.getBackgroundSwapRouteState),Ee=(0,r.useSelector)(E.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(Ee).length?"awaiting"===he&&Y.push(w.AWAITING_SWAP_ROUTE):Y.push(w.BUILD_QUOTE_ROUTE)}),[Y,Ee,he]);const _e=(0,r.useSelector)(E.getQuotesLastFetched),Se=(0,r.useSelector)(E.getUsedSwapsGasPrice),ve=(0,r.useSelector)(E.getCustomSwapsGas),ye=(0,r.useSelector)(E.getCustomMaxFeePerGas),we=(0,r.useSelector)(E.getCustomMaxPriorityFeePerGas),be=(0,r.useSelector)(E.getSwapsUserFeeLevel),ke=(0,r.useSelector)(_.getTokenExchangeRates,i.isEqual),Ae=(0,m.useEqualityCheck)(ke),{balance:Ie}=(0,r.useSelector)(_.getSelectedAccount,r.shallowEqual),Ce=(0,r.useSelector)(_.conversionRateSelector),Ne=(0,r.useSelector)(_.getUSDConversionRate),Oe=(0,r.useSelector)(_.getIsMultiLayerFeeNetwork),Pe=(0,r.useSelector)(_.getCurrentCurrency),Re=(0,r.useSelector)(S.getTokens,i.isEqual),Me=(0,r.useSelector)(_.checkNetworkAndAccountSupports1559),xe=(0,r.useSelector)(E.getBalanceError),De=(0,r.useSelector)(E.getFetchParams,i.isEqual),Le=(0,r.useSelector)(E.getApproveTxParams,r.shallowEqual),Fe=(0,r.useSelector)(E.getSelectedQuote,i.isEqual),Be=(0,r.useSelector)(E.getTopQuote,i.isEqual),je=Fe||Be,qe=(null==je||null===(e=je.trade)||void 0===e?void 0:e.value)??"0x0",We=(0,r.useSelector)(E.getSwapsQuoteRefreshTime),Ue=(0,r.useSelector)(_.getSwapsDefaultToken,i.isEqual),Ge=(0,r.useSelector)(_.getCurrentChainId),He=(0,r.useSelector)(S.getNativeCurrency),Ve=(0,r.useSelector)(E.getReviewSwapClickedTimestamp),Ke=(0,r.useSelector)(E.getSmartTransactionsOptInStatus),$e=(0,r.useSelector)(E.getSmartTransactionsEnabled),Qe=(0,r.useSelector)(E.getSwapsSTXLoading),Ye=(0,r.useSelector)(E.getCurrentSmartTransactionsError),Xe=(0,r.useSelector)(E.getSmartTransactionsError),ze=(0,r.useSelector)(E.getSmartTransactionFees,i.isEqual),Ze=(0,r.useSelector)(E.getCurrentSmartTransactionsEnabled),Je=(0,r.useSelector)(E.getSwapsNetworkConfig,r.shallowEqual),et=je.trade,tt=Ze&&Ke;let at;Me&&(at=(0,g.useGasFeeInputs)(O.GasRecommendations.high,{userFeeLevel:be||O.GasRecommendations.high}));const nt=null==De?void 0:De.sourceToken,rt={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},ot=(null==je?void 0:je.gasEstimateWithRefund)||`0x${(0,G.decimalToHex)((null==je?void 0:je.averageGas)||0)}`,st=(null==je?void 0:je.gasEstimate)||"0x0",it=new s.default(st,16).times((null==je?void 0:je.gasMultiplier)||E.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),lt=null!=je&&je.gasEstimate?it:`0x${(0,G.decimalToHex)((null==je?void 0:je.maxGas)||0)}`,ut=ve||lt;let ct,dt,pt;if(Me){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=at;ct=ye||(0,G.decGWEIToHexWEI)(e),dt=we||(0,G.decGWEIToHexWEI)(t),pt=(0,G.addHexes)((0,G.decGWEIToHexWEI)(a),dt)}let mt=(0,j.calcGasTotal)(ut,ct||Se);null!==ue&&(mt=(0,G.sumHexes)(mt||"0x0",ue||"0x0"));const{tokensWithBalances:ft}=(0,C.useTokenTracker)(Re,!0),gt=nt===Ue.address?Ue:ft.find((({address:e})=>(0,L.isEqualCaseInsensitive)(e,nt))),Tt=gt||je.sourceTokenInfo,ht=(null==ft?void 0:ft.length)&&(0,j.calcTokenAmount)(Tt.balance||"0x0",Tt.decimals).toFixed(9),Et=ft&&gt===undefined,_t=(0,F.parseStandardTokenTransactionData)(null==Le?void 0:Le.data),St=_t&&(0,B.getTokenValueParam)(_t),vt=St&&(null==Tt?void 0:Tt.decimals)!==undefined&&(0,j.calcTokenAmount)(St,Tt.decimals).toFixed(9),yt=null==Le?void 0:Le.gas,wt=(0,n.useMemo)((()=>(0,I.quotesToRenderableData)({quotes:Ee,gasPrice:Me?pt:Se,conversionRate:Ce,currentCurrency:Pe,approveGas:yt,tokenConversionRates:Ae,chainId:Ge,smartTransactionEstimatedGas:$e&&Ke&&(null==ze?void 0:ze.tradeTxFees),nativeCurrencySymbol:He,multiLayerL1ApprovalFeeTotal:de})),[Ee,Se,pt,Me,Ce,Pe,yt,Ae,Ge,null==ze?void 0:ze.tradeTxFees,He,$e,Ke,de]),bt=wt.find((e=>e.aggId===je.aggregator)),{destinationTokenDecimals:kt,destinationTokenSymbol:At,destinationTokenValue:It,destinationIconUrl:Ct,sourceTokenDecimals:Nt,sourceTokenSymbol:Ot,sourceTokenValue:Pt,sourceTokenIconUrl:Rt}=bt;let{feeInFiat:Mt,feeInEth:xt,rawEthFee:Dt,feeInUsd:Lt}=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ot,approveGas:yt,gasPrice:Me?pt:Se,currentCurrency:Pe,conversionRate:Ce,USDConversionRate:Ne,tradeValue:qe,sourceSymbol:Ot,sourceAmount:je.sourceAmount,chainId:Ge,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});rt.reg_tx_fee_in_usd=Number(Lt),rt.reg_tx_fee_in_eth=Number(Dt);const Ft=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ut,approveGas:yt,gasPrice:ct||Se,currentCurrency:Pe,conversionRate:Ce,USDConversionRate:Ne,tradeValue:qe,sourceSymbol:Ot,sourceAmount:je.sourceAmount,chainId:Ge,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});let{feeInFiat:Bt,feeInEth:jt,rawEthFee:qt,feeInUsd:Wt}=Ft;if(rt.reg_tx_max_fee_in_usd=Number(Wt),rt.reg_tx_max_fee_in_eth=Number(qt),Ze&&Ke&&null!=ze&&ze.tradeTxFees){var Ut;const e=(null==ze?void 0:ze.tradeTxFees.feeEstimate)+((null==ze||null===(Ut=ze.approvalTxFees)||void 0===Ut?void 0:Ut.feeEstimate)||0),t=e*Je.stxMaxFeeMultiplier;({feeInFiat:Mt,feeInEth:xt,rawEthFee:Dt,feeInUsd:Lt}=(0,I.getFeeForSmartTransaction)({chainId:Ge,currentCurrency:Pe,conversionRate:Ce,USDConversionRate:Ne,nativeCurrencySymbol:He,feeInWeiDec:e})),rt.stx_fee_in_usd=Number(Lt),rt.stx_fee_in_eth=Number(Dt),rt.estimated_gas=null==ze?void 0:ze.tradeTxFees.gasLimit,({feeInFiat:Bt,feeInEth:jt,rawEthFee:qt,feeInUsd:Wt}=(0,I.getFeeForSmartTransaction)({chainId:Ge,currentCurrency:Pe,conversionRate:Ce,USDConversionRate:Ne,nativeCurrencySymbol:He,feeInWeiDec:t})),rt.stx_max_fee_in_usd=Number(Wt),rt.stx_max_fee_in_eth=Number(qt)}const Gt=new s.default(je.sourceAmount),Ht=new s.default(je.trade.value||0,10).plus(new s.default(mt,16)),Vt=((null==ft?void 0:ft.length)||xe)&&Gt.gt(new s.default(Tt.balance||"0x0")),Kt=Ht.gt(new s.default(Ie||"0x0")),$t=Vt?(0,j.toPrecisionWithoutTrailingZeros)((0,j.calcTokenAmount)(Gt,Tt.decimals).minus(ht).toString(10),6):null,Qt=Kt?(0,j.toPrecisionWithoutTrailingZeros)(Ht.minus(Ie,16).div("1000000000000000000",10).toString(10),6):null;let Yt;tt&&null!=Xe&&Xe.balanceNeededWei&&(Yt=(0,G.decWEIToDecETH)(Xe.balanceNeededWei-Xe.currentBalanceWei));const Xt=(0,r.useSelector)(E.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{tt?Vt?X((0,E.setBalanceError)(!0)):xe&&!Vt&&X((0,E.setBalanceError)(!1)):Vt||Kt?X((0,E.setBalanceError)(!0)):!xe||Vt||Kt||X((0,E.setBalanceError)(!1))}),[Vt,Kt,xe,X,tt]),(0,n.useEffect)((()=>{const e=Date.now()-_e;e>We&&!J?(ee(!0),X((0,v.safeRefetchQuotes)())):e>We&&(X((0,v.setSwapsErrorKey)(N.QUOTES_EXPIRED_ERROR)),Y.push(w.SWAPS_ERROR_ROUTE))}),[_e,J,X,Y,We]),(0,n.useEffect)((()=>{!ie&&vt&&le(vt)}),[ie,vt]);const zt=(!Ze||!Ke)&&Qt,Zt=tt&&Yt,Jt=(xe||$t||zt||Zt)&&!oe,ea=(0,r.useSelector)(_.isHardwareWallet),ta=(0,r.useSelector)(_.getHardwareWalletType),aa=Object.values(Ee).length,na=(0,n.useRef)(),ra=(0,n.useMemo)((()=>({token_from:Ot,token_from_amount:Pt,token_to:At,token_to_amount:It,request_type:null==De?void 0:De.balanceError,slippage:null==De?void 0:De.slippage,custom_slippage:2!==(null==De?void 0:De.slippage),response_time:null==De?void 0:De.responseTime,best_quote_source:null==Be?void 0:Be.aggregator,available_quotes:aa,is_hardware_wallet:ea,hardware_wallet_type:ta,stx_enabled:$e,current_stx_enabled:Ze,stx_user_opt_in:Ke})),[Ot,Pt,At,It,null==De?void 0:De.balanceError,null==De?void 0:De.slippage,null==De?void 0:De.responseTime,null==Be?void 0:Be.aggregator,aa,ea,ta,$e,Ze,Ke]),oa=()=>{Z({event:"Edit Spend Limit Opened",category:D.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,custom_spend_limit_set:ie===vt,custom_spend_limit_amount:ie===vt?null:vt}})},sa=(0,n.useCallback)((()=>{Z({event:"Best Quote Reviewed",category:D.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,network_fees:Mt}})}),[Z,ra,Mt]),ia=(0,n.useCallback)((()=>{Z({event:"View Quote Page Loaded",category:D.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,response_time:me-Ve}})}),[Z,ra,me,Ve]);(0,n.useEffect)((()=>{!na.current&&[Ot,Pt,At,It,De,Be,aa,Mt].every((e=>null!==e&&e!==undefined))&&(na.current=!0,sa())}),[De,Be,aa,Mt,At,It,Ot,Pt,sa]);const la=je.fee,ua=Et?z("swapTokenBalanceUnavailable",[Ot]):z("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1",className:"view-quote__bold"},$t||Yt||Qt),$t&&Ot!==Ue.symbol?Ot:Ue.symbol]),ca=null==je||null===(t=je.priceSlippage)||void 0===t?void 0:t.bucket,da=(0,f.usePrevious)(ca);(0,n.useEffect)((()=>{fe&&da===O.GasRecommendations.medium&&ca===O.GasRecommendations.high&&ge(!1)}),[ca,fe,da]);let pa=null;const ma=(0,p.useEthFiatAmount)((null==je||null===(a=je.priceSlippage)||void 0===a?void 0:a.sourceAmountInETH)||0,{showFiat:!0}),fa=(0,p.useEthFiatAmount)((null==je||null===(V=je.priceSlippage)||void 0===V?void 0:V.destinationAmountInETH)||0,{showFiat:!0}),ga=!ma||!fa||Boolean(null==je||null===(K=je.priceSlippage)||void 0===K?void 0:K.calculationError);let Ta=0;null!=je&&null!==(Q=je.priceSlippage)&&void 0!==Q&&Q.ratio&&(Ta=parseFloat(new s.default(je.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const ha=!Et&&!Jt&&je&&(Te.includes(ca)||ga);ha&&(pa=n.default.createElement(H.default,{usedQuote:je,sourceTokenValue:Pt,destinationTokenValue:It,priceSlippageFromSource:ma,priceSlippageFromDestination:fa,priceDifferencePercentage:Ta,priceSlippageUnknownFiatValue:ga,onAcknowledgementClick:()=>{ge(!0)},acknowledged:fe}));const Ea=ha&&!fe,_a=Jt||ha,Sa=Boolean(te||xe||Et||Ea||Me&&pt===undefined||!Me&&(null===Se||Se===undefined)||Ze&&(Ye||Xe)||Ze&&Ke&&!(null!=ze&&ze.tradeTxFees));return(0,n.useEffect)((()=>{if(Ze&&Ke&&!Vt){const e={from:et.from,to:et.to,value:et.value,data:et.data,gas:et.gas,chainId:Ge};$=setInterval((()=>{Qe||X((0,E.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}),Je.stxGetTransactionsRefreshTime),X((0,E.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}else $&&clearInterval($);return()=>clearInterval($)}),[X,Ze,Ke,et.data,et.from,et.value,et.gas,et.to,Ge,Je.stxGetTransactionsRefreshTime,Vt]),(0,n.useEffect)((()=>{X((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),Ve&&ia()}),[X,ia,Ve]),(0,n.useEffect)((()=>{!Ze&&Ye&&te&&ae(!1)}),[Ze,Ye,te]),(0,n.useEffect)((()=>{if(!Oe||null==je||!je.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";Le&&(e=await(0,U.default)(Ge,{txParams:{...Le,gasPrice:(0,q.addHexPrefix)(Le.gasPrice),value:"0x0"}}),pe(e));const t=(0,G.sumHexes)(je.multiLayerL1TradeFeeTotal,e);ce(t)}catch(e){(0,u.captureException)(e),ce(null),pe(null)}})()}),[et,Le,Oe,Ge,je]),(0,n.useEffect)((()=>{tt&&X({type:y.SET_SMART_TRANSACTIONS_ERROR,payload:null})}),[tt,X]),n.default.createElement("div",{className:"view-quote"},n.default.createElement("div",{className:(0,l.default)("view-quote__content",{"view-quote__content_modal":Ea})},ne&&n.default.createElement(d.default,{quoteDataRows:wt,onClose:()=>re(!1),onSubmit:e=>X((0,E.swapsQuoteSelected)(e)),swapToSymbol:At,initialAggId:je.aggregator,onQuoteDetailsIsOpened:()=>{Z({event:"Quote Details Opened",category:D.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==je?void 0:je.aggregator)!==(null==Be?void 0:Be.aggregator),other_quote_selected_source:(null==je?void 0:je.aggregator)===(null==Be?void 0:Be.aggregator)?null:null==je?void 0:je.aggregator}})},hideEstimatedGasFee:$e&&Ke}),n.default.createElement("div",{className:(0,l.default)("view-quote__warning-wrapper",{"view-quote__warning-wrapper--thin":!_a})},pa,(Jt||Et)&&n.default.createElement(A.default,{message:ua,onClose:()=>se(!0)})),n.default.createElement("div",{className:"view-quote__countdown-timer-container"},n.default.createElement(P.default,{timeStarted:_e,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(b.default,{sourceValue:(0,W.calcTokenValue)(Pt,Nt),sourceDecimals:Nt,sourceSymbol:Ot,destinationValue:(0,W.calcTokenValue)(It,kt),destinationDecimals:kt,destinationSymbol:At,sourceIconUrl:Rt,destinationIconUrl:Ct}),Ze&&Ke&&!(null!=ze&&ze.tradeTxFees)&&!Jt&&n.default.createElement(x.default,{marginTop:0,marginBottom:10},n.default.createElement(M.default,null)),(!Ze||!Ke||(null==ze?void 0:ze.tradeTxFees))&&n.default.createElement("div",{className:(0,l.default)("view-quote__fee-card-container",{"view-quote__fee-card-container--three-rows":Le&&(!xe||oe)})},n.default.createElement(h.default,{primaryFee:{fee:xt,maxFee:jt},secondaryFee:{fee:Mt,maxFee:Bt},hideTokenApprovalRow:!Le||xe&&!oe,tokenApprovalSourceTokenSymbol:Ot,onTokenApprovalClick:()=>{oa(),X((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:Tt.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?ie:e,a=(0,k.getCustomTxParamsData)(Le.data,{customPermissionAmount:t,decimals:Tt.decimals});null!=t&&t.length&&Le.data!==a&&X((0,v.setCustomApproveTxData)(a))},tokenAmount:ie,customTokenAmount:ie===vt?null:vt,tokenBalance:ht,tokenSymbol:Tt.symbol,requiredMinimum:(0,j.calcTokenAmount)(je.sourceAmount,Tt.decimals)}))},metaMaskFee:String(la),numberOfQuotes:Object.values(Ee).length,onQuotesClick:()=>{Z({event:"All Available Quotes Opened",category:D.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==je?void 0:je.aggregator)!==(null==Be?void 0:Be.aggregator),other_quote_selected_source:(null==je?void 0:je.aggregator)===(null==Be?void 0:Be.aggregator)?null:null==je?void 0:je.aggregator}}),re(!0)},chainId:Ge,maxPriorityFeePerGasDecGWEI:(0,G.hexWEIToDecGWEI)(dt),maxFeePerGasDecGWEI:(0,G.hexWEIToDecGWEI)(ct)}))),n.default.createElement(R.default,{onSubmit:()=>{ae(!0),xe?Xt.symbol===Ue.symbol?Y.push(w.DEFAULT_ROUTE):Y.push(`${w.ASSET_ROUTE}/${Xt.address}`):Ze&&Ke&&null!=ze&&ze.tradeTxFees?X((0,E.signAndSendSwapsSmartTransaction)({unsignedTransaction:et,trackEvent:Z,history:Y,additionalTrackingParams:rt})):X((0,E.signAndSendTransactions)(Y,Z,rt))},submitText:z(Ze&&Ke&&Qe?"preparingSwap":"swap"),hideCancel:!0,disabled:Sa,className:_a?"view-quote__thin-swaps-footer":"",showTopBorder:!0}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=K(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=V(e("bignumber.js")),i=e("lodash"),l=V(e("classnames")),u=e("@sentry/browser"),c=e("../../../contexts/i18n"),d=V(e("../select-quote-popover")),p=e("../../../hooks/useEthFiatAmount"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../hooks/usePrevious"),g=e("../../../hooks/gasFeeInput/useGasFeeInputs"),T=e("../../../contexts/metametrics"),h=V(e("../fee-card")),E=e("../../../ducks/swaps/swaps"),_=e("../../../selectors"),S=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../store/actionConstants"),w=e("../../../helpers/constants/routes"),b=V(e("../main-quote-summary")),k=e("../../confirm-approve/confirm-approve.util"),A=V(e("../../../components/ui/actionable-message/actionable-message")),I=e("../swaps.util"),C=e("../../../hooks/useTokenTracker"),N=e("../../../../shared/constants/swaps"),O=e("../../../../shared/constants/gas"),P=V(e("../countdown-timer")),R=V(e("../swaps-footer")),M=V(e("../../../components/ui/pulse-loader")),x=V(e("../../../components/ui/box")),D=e("../../../../shared/constants/metametrics"),L=e("../../../../shared/modules/string-utils"),F=e("../../../../shared/modules/transaction.utils"),B=e("../../../../shared/lib/metamask-controller-utils"),j=e("../../../../shared/lib/transactions-controller-utils"),q=e("../../../../app/scripts/lib/util"),W=e("../../../../shared/lib/swaps-utils"),U=V(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),G=e("../../../../shared/modules/conversion.utils"),H=V(e("./view-quote-price-difference"));function V(e){return e&&e.__esModule?e:{default:e}}function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(K=function(e){return e?a:t})(e)}let $}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote.js"}],[5438,{"../../../shared/constants/network":4324,"../../../shared/constants/tokens":4335,"../../../shared/lib/transactions-controller-utils":4344,"../../../shared/modules/security-provider.utils":4361,"../../components/app/approve-content-card/approve-content-card":4401,"../../components/app/confirm-page-container":4429,"../../components/app/confirm-page-container/confirm-page-container-content":4423,"../../components/app/custom-nonce":4457,"../../components/app/custom-spending-cap/custom-spending-cap":4459,"../../components/app/ledger-instruction-field/ledger-instruction-field":4495,"../../components/app/modals/contract-details-modal/contract-details-modal":4524,"../../components/app/network-account-balance-header/network-account-balance-header":4563,"../../components/app/security-provider-banner-message/security-provider-banner-message":4601,"../../components/component-library":4792,"../../components/component-library/text/deprecated":4826,"../../components/ui/box/box":4888,"../../components/ui/button":4893,"../../components/ui/contract-token-values/contract-token-values":4905,"../../components/ui/dialog":4911,"../../components/ui/page-container":4973,"../../components/ui/review-spending-cap/review-spending-cap":4986,"../../components/ui/simulation-error-message":4992,"../../components/ui/url-icon/url-icon":5027,"../../contexts/gasFee":5028,"../../contexts/i18n":5029,"../../ducks/app/app":5036,"../../ducks/confirm-transaction/confirm-transaction.duck":5037,"../../ducks/history/history":5041,"../../helpers/constants/design-system":5052,"../../helpers/utils/util":5093,"../../hooks/useSimulationFailureWarning":5127,"../../selectors":5449,"../../store/actions":5456,"../confirm-approve/confirm-approve.util":5156,"bignumber.js":2222,"prop-types":3766,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=V;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=G(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=U(e("prop-types")),i=U(e("bignumber.js")),l=U(e("../../components/ui/box/box")),u=U(e("../../components/app/network-account-balance-header/network-account-balance-header")),c=U(e("../../components/ui/url-icon/url-icon")),d=e("../../helpers/constants/design-system"),p=e("../../contexts/i18n"),m=U(e("../../components/ui/contract-token-values/contract-token-values")),f=U(e("../../components/ui/button")),g=U(e("../../components/ui/review-spending-cap/review-spending-cap")),T=e("../../components/ui/page-container"),h=U(e("../../components/app/modals/contract-details-modal/contract-details-modal")),E=e("../../selectors"),_=e("../../../shared/constants/network"),S=e("../../store/actions"),v=e("../../ducks/confirm-transaction/confirm-transaction.duck"),y=e("../../ducks/history/history"),w=U(e("../../components/app/approve-content-card/approve-content-card")),b=U(e("../../components/app/custom-spending-cap/custom-spending-cap")),k=U(e("../../components/ui/dialog")),A=e("../../contexts/gasFee"),I=e("../confirm-approve/confirm-approve.util"),C=e("../../ducks/app/app"),N=e("../../helpers/utils/util"),O=e("../../../shared/lib/transactions-controller-utils"),P=e("../../../shared/constants/tokens"),R=e("../../../shared/modules/security-provider.utils"),M=e("../../components/app/confirm-page-container"),x=e("../../hooks/useSimulationFailureWarning"),D=U(e("../../components/ui/simulation-error-message")),L=U(e("../../components/app/ledger-instruction-field/ledger-instruction-field")),F=U(e("../../components/app/security-provider-banner-message/security-provider-banner-message")),B=e("../../components/component-library"),j=e("../../components/component-library/text/deprecated"),q=e("../../components/app/confirm-page-container/confirm-page-container-content"),W=U(e("../../components/app/custom-nonce"));function U(e){return e&&e.__esModule?e:{default:e}}function G(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(G=function(e){return e?a:t})(e)}const H=["portfolio.metamask.io"];function V({origin:e,siteImage:t,showCustomizeGasModal:a,useNonceField:s,currentCurrency:U,nativeCurrency:G,ethTransactionTotal:V,fiatTransactionTotal:K,hexTransactionTotal:$,hexMinimumTransactionFee:Q,txData:Y,isMultiLayerFeeNetwork:X,supportsEIP1559:z,userAddress:Z,tokenAddress:J,data:ee,isSetApproveForAll:te,isApprovalOrRejection:ae,decimals:ne,dappProposedTokenAmount:re,currentTokenBalance:oe,toAddress:se,tokenSymbol:ie,fromAddressIsLedger:le,warning:ue}){const ce=(0,n.useContext)(p.I18nContext),de=(0,r.useDispatch)(),pe=(0,o.useHistory)(),me=(0,r.useSelector)(y.getMostRecentOverviewPage),{hostname:fe}=new URL(e),ge=H.includes(fe),[Te,he]=(0,n.useState)(re),[Ee,_e]=(0,n.useState)(!1),[Se,ve]=(0,n.useState)(!1),[ye,we]=(0,n.useState)(!1),[be,ke]=(0,n.useState)("0"!==re&&!ge),[Ae,Ie]=(0,n.useState)(""),[Ce,Ne]=(0,n.useState)(!1),Oe=(0,x.useSimulationFailureWarning)(Ce),Pe=(0,r.useSelector)((e=>(0,E.getTargetAccountWithSendEtherInfo)(e,Z))),Re=(0,r.useSelector)(E.getNetworkIdentifier),Me=(0,r.useSelector)(E.getRpcPrefsForCurrentProvider),xe=(0,r.useSelector)(E.getUnapprovedTxCount),De=(0,r.useSelector)(E.getUnapprovedTransactions),Le=(0,r.useSelector)(E.getUseCurrencyRateCheck),Fe=(0,r.useSelector)(E.getNextSuggestedNonce),Be=(0,r.useSelector)(E.getCustomNonceValue),je=e=>e.replace(/,/gu,".");let qe=P.NUM_W_OPT_DECIMAL_COMMA_OR_DOT_REGEX.test(Te)?je(Te).toString():"0";const We=(0,O.calcTokenAmount)(P.MAX_TOKEN_ALLOWANCE_AMOUNT,ne);if(Te.length>1&&Number(Te)){new i.default(Te).greaterThan(We)&&(qe=0)}const Ue=qe?(0,I.getCustomTxParamsData)(ee,{customPermissionAmount:qe,decimals:ne}):null;let Ge={...Y};Ue&&(Ge={...Ge,txParams:{...Ge.txParams,data:Ue}});const He=(0,r.useSelector)((e=>(0,E.transactionFeeSelector)(e,Ge))),Ve=(0,r.useSelector)((e=>(0,E.getKnownMethodData)(e,ee))),{balanceError:Ke}=(0,A.useGasFeeContext)(),$e=be&&(""===Te||""!==Ae),Qe=!be&&Ke,Ye=_.NETWORK_TO_NAME_MAP[Ge.chainId]||Re,Xe=()=>{const{name:e}=Ve;var t;He.gasEstimationObject.baseFeePerGas&&(Ge.estimatedBaseFee=He.gasEstimationObject.baseFeePerGas),e&&(Ge.contractMethodName=e),re&&(Ge.dappProposedTokenAmount=re,Ge.originalApprovalAmount=re),Te?(Ge.customTokenAmount=Te,Ge.finalApprovalAmount=Te):re!==undefined&&(Ge.finalApprovalAmount=re),oe&&(Ge.currentTokenBalance=oe),de((0,S.updateCustomNonce)("")),de((0,S.updateAndApproveTx)((t=Ge,Be?{...t,customNonceValue:Be}:t))).then((()=>{de((0,v.clearConfirmTransaction)()),pe.push(me)}))},ze=()=>{we(!1),ke(!0)},Ze=()=>{de((0,S.getNextNonce)())};(0,n.useEffect)((()=>{Ze()}),[de]);const Je=e=>{de((0,S.updateCustomNonce)(e))},et=""===Te,tt=n.default.createElement(l.default,{marginTop:4,key:J},n.default.createElement(m.default,{tokenName:ie,address:J,chainId:Ge.chainId,rpcPrefs:Me}));return n.default.createElement(l.default,{className:"token-allowance-container page-container"},n.default.createElement(l.default,null,n.default.createElement(M.ConfirmPageContainerNavigation,null)),(0,R.isSuspiciousResponse)(null==Y?void 0:Y.securityProviderResponse)&&n.default.createElement(F.default,{securityProviderResponse:Y.securityProviderResponse}),n.default.createElement(l.default,{paddingLeft:4,paddingRight:4,alignItems:d.AlignItems.center,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.spaceBetween},n.default.createElement(l.default,null,!be&&n.default.createElement(f.default,{type:"inline",onClick:()=>ze()},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},"<"," ",ce("back")))),n.default.createElement(l.default,{textAlign:d.TextAlign.End},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},be?1:2," ",ce("ofTextNofM")," 2"))),n.default.createElement(u.default,{networkName:Ye,accountName:Pe.name,accountBalance:oe,tokenName:ie,accountAddress:Z,chainId:Ge.chainId}),ue&&n.default.createElement(l.default,{className:"token-allowance-container__custom-nonce-warning"},n.default.createElement(q.ConfirmPageContainerWarning,{warning:ue})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(l.default,{display:d.DISPLAY.FLEX,alignItems:d.AlignItems.center,marginTop:6,marginRight:12,marginBottom:8,marginLeft:12,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:2,borderColor:d.Color.borderMuted,borderStyle:d.BorderStyle.solid,borderWidth:1,className:"token-allowance-container__icon-display-content"},n.default.createElement(c.default,{className:"token-allowance-container__icon-display-content__siteimage-identicon",fallbackClassName:"token-allowance-container__icon-display-content__siteimage-identicon",name:e,url:t}),n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textAlternative,marginLeft:1},e))),n.default.createElement(l.default,{marginLeft:4,marginRight:4},n.default.createElement(j.Text,{variant:d.TextVariant.headingMd,align:d.TextAlign.Center},be?ce("spendingCapRequest",[tt]):n.default.createElement(l.default,null,ce("0"===Te||et?"revokeSpendingCap":"spendingCapRequest",[tt])))),n.default.createElement(l.default,{marginTop:1,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>_e(!0),className:"token-allowance-container__verify-link"},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.Color.primaryDefault},ce("verifyContractDetails")))),n.default.createElement(l.default,{margin:[4,4,3,4]},be?n.default.createElement(b.default,{txParams:null==Y?void 0:Y.txParams,tokenName:ie,currentTokenBalance:oe,dappProposedValue:re,siteOrigin:e,passTheErrorText:e=>Ie(e),decimals:ne,setInputChangeInProgress:ve,customSpendingCap:Te,setCustomSpendingCap:he}):n.default.createElement(g.default,{tokenName:ie,currentTokenBalance:oe,tokenValue:isNaN(parseFloat(Te))?re:je(Te),onEdit:()=>ze()})),!be&&Ke&&n.default.createElement(k.default,{type:"error",className:"send__error-dialog"},ce("insufficientFundsForGas")),!be&&n.default.createElement(l.default,{className:"token-allowance-container__card-wrapper"},Oe&&n.default.createElement(l.default,{paddingTop:0,paddingRight:4,paddingBottom:4,paddingLeft:4},n.default.createElement(D.default,{userAcknowledgedGasMissing:Ce,setUserAcknowledgedGasMissing:()=>Ne(!0)})),n.default.createElement(w.default,{symbol:n.default.createElement(B.Icon,{name:B.IconName.Tag}),title:ce("transactionFee"),showEdit:!0,showAdvanceGasFeeOptions:!0,onEditClick:a,renderTransactionDetailsContent:!0,noBorder:s||!ye,supportsEIP1559:z,isMultiLayerFeeNetwork:X,ethTransactionTotal:V,nativeCurrency:G,fullTxData:Ge,userAcknowledgedGasMissing:Ce,renderSimulationFailureWarning:Oe,hexTransactionTotal:$,hexMinimumTransactionFee:Q,fiatTransactionTotal:K,currentCurrency:U,useCurrencyRateCheck:Le})),s&&n.default.createElement(l.default,{marginTop:4,marginRight:4,marginLeft:4},n.default.createElement(W.default,{nextNonce:Fe,customNonceValue:Be,showCustomizeNonceModal:()=>((e,t,a,n,r)=>{de((0,S.showModal)({name:"CUSTOMIZE_NONCE",useNonceField:e,nextNonce:t,customNonceValue:a,updateCustomNonce:n,getNextNonce:r}))})(s,Fe,Be,Je,Ze)})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>we(!ye),className:"token-allowance-container__view-details"},n.default.createElement(j.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.primaryDefault,marginRight:1},ce("viewDetails")),ye?n.default.createElement("i",{className:"fa fa-sm fa-angle-up"}):n.default.createElement("i",{className:"fa fa-sm fa-angle-down"}))),ye?n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.COLUMN,alignItems:d.AlignItems.center,className:"token-allowance-container__full-tx-content"},n.default.createElement(l.default,{className:"token-allowance-container__data"},n.default.createElement(w.default,{symbol:n.default.createElement("i",{className:"fa fa-file"}),title:ce("data"),renderDataContent:!0,noBorder:!0,supportsEIP1559:z,isSetApproveForAll:te,fullTxData:Ge,userAcknowledgedGasMissing:Ce,renderSimulationFailureWarning:Oe,isApprovalOrRejection:ae,data:Ue||ee,useCurrencyRateCheck:Le,hexMinimumTransactionFee:Q}))):null,!be&&le&&n.default.createElement(l.default,{paddingLeft:2,paddingRight:2},n.default.createElement(L.default,{showDataInstruction:!0})),n.default.createElement(T.PageContainerFooter,{cancelText:ce("reject"),submitText:ce(be?"next":"approveButtonText"),onCancel:()=>(de((0,S.updateCustomNonce)("")),de((0,C.setCustomTokenAmount)("")),void de((0,S.cancelTx)(Ge)).then((()=>{de((0,v.clearConfirmTransaction)()),pe.push(me)}))),onSubmit:()=>be?(we(!1),void ke(!1)):Xe(),disabled:Se||$e||Qe},xe>1&&n.default.createElement(f.default,{type:"link",onClick:e=>{e.preventDefault(),de((0,S.showModal)({name:"REJECT_TRANSACTIONS",unapprovedTxCount:xe,onSubmit:async()=>{await de((0,S.cancelTxs)((0,N.valuesFor)(De))),de((0,v.clearConfirmTransaction)()),pe.push(me)}}))}},ce("rejectTxsN",[xe]))),Ee&&n.default.createElement(h.default,{tokenName:ie,onClose:()=>_e(!1),tokenAddress:J,toAddress:se,chainId:Ge.chainId,rpcPrefs:Me}))}V.propTypes={origin:s.default.string,siteImage:s.default.string,showCustomizeGasModal:s.default.func,useNonceField:s.default.bool,currentCurrency:s.default.string,nativeCurrency:s.default.string,ethTransactionTotal:s.default.string,fiatTransactionTotal:s.default.string,hexTransactionTotal:s.default.string,hexMinimumTransactionFee:s.default.string,txData:s.default.object,isMultiLayerFeeNetwork:s.default.bool,supportsEIP1559:s.default.bool,userAddress:s.default.string,tokenAddress:s.default.string,data:s.default.string,isSetApproveForAll:s.default.bool,isApprovalOrRejection:s.default.bool,decimals:s.default.string,dappProposedTokenAmount:s.default.string,currentTokenBalance:s.default.string,toAddress:s.default.string,tokenSymbol:s.default.string,fromAddressIsLedger:s.default.bool,warning:s.default.string}}}},{package:"$root$",file:"ui/pages/token-allowance/token-allowance.js"}],[5439,{"./token-details-page":5440},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./token-details-page"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/token-details/index.js"}],[5440,{"../../../shared/constants/network":4324,"../../../shared/modules/string-utils":4363,"../../components/component-library":4792,"../../components/component-library/text/deprecated":4826,"../../components/ui/box":4889,"../../components/ui/button":4893,"../../components/ui/identicon":4945,"../../components/ui/tooltip":5017,"../../contexts/i18n":5029,"../../ducks/metamask/metamask":5044,"../../helpers/constants/design-system":5052,"../../helpers/constants/routes":5057,"../../hooks/useCopyToClipboard":5109,"../../hooks/useTokenFiatAmount":5132,"../../hooks/useTokenTracker":5133,"../../selectors":5449,"../../store/actions":5456,react:4043,"react-redux":4008,"react-router-dom":4028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t;const a=(0,r.useDispatch)(),w=(0,o.useHistory)(),b=(0,n.useContext)(c.I18nContext),k=(0,r.useSelector)(s.getTokens),A=(0,r.useSelector)(i.getTokenList),{address:I}=(0,o.useParams)(),C=A[I.toLowerCase()],N=null==C||null===(e=C.aggregators)||void 0===e?void 0:e.join(", "),O=k.find((({address:e})=>(0,S.isEqualCaseInsensitive)(e,I))),{tokensWithBalances:P}=(0,d.useTokenTracker)([O]),R=null===(t=P[0])||void 0===t?void 0:t.string,M=(0,p.useTokenFiatAmount)(null==O?void 0:O.address,R,null==O?void 0:O.symbol),{nickname:x,type:D}=(0,r.useSelector)(s.getProviderConfig),[L,F]=(0,l.useCopyToClipboard)();if(!O)return n.default.createElement(o.Redirect,{to:{pathname:g.DEFAULT_ROUTE}});return n.default.createElement(E.default,{className:"page-container token-details"},n.default.createElement(E.default,{marginLeft:5,marginRight:6},n.default.createElement(y.Text,{fontWeight:_.FontWeight.Bold,margin:0,marginTop:4,variant:_.TextVariant.bodySm,as:"h6",color:_.TextColor.textDefault,className:"token-details__title"},b("tokenDetails"),n.default.createElement(h.default,{type:"link",onClick:()=>w.push(`${g.ASSET_ROUTE}/${O.address}`),className:"token-details__closeButton"})),n.default.createElement(E.default,{display:_.DISPLAY.FLEX,marginTop:4},n.default.createElement(y.Text,{align:_.TextAlign.Center,fontWeight:_.FontWeight.Bold,margin:0,marginRight:5,variant:_.TextVariant.headingSm,as:"h4",color:_.TextColor.textDefault,className:"token-details__token-value"},R||""),n.default.createElement(E.default,{marginTop:1},n.default.createElement(u.default,{diameter:32,address:O.address,image:C?C.iconUrl:O.image}))),n.default.createElement(y.Text,{margin:0,marginTop:4,variant:_.TextVariant.bodySm,as:"h6",color:_.TextColor.textAlternative},M||""),n.default.createElement(y.Text,{margin:0,marginTop:6,variant:_.TextVariant.bodyXs,as:"h6",color:_.TextColor.textAlternative,fontWeight:_.FontWeight.Bold},b("tokenContractAddress")),n.default.createElement(E.default,{display:_.DISPLAY.FLEX},n.default.createElement(y.Text,{variant:_.TextVariant.bodySm,as:"h6",margin:0,marginTop:2,color:_.TextColor.textDefault,overflowWrap:_.OverflowWrap.BreakWord,className:"token-details__token-address"},O.address),n.default.createElement(T.default,{position:"bottom",title:b(L?"copiedExclamation":"copyToClipboard"),containerClassName:"token-details__copy-icon"},n.default.createElement(v.ButtonIcon,{ariaLabel:"copy",name:L?v.IconName.CopySuccess:v.IconName.Copy,className:"token-details__copyIcon",onClick:()=>F(O.address),color:_.IconColor.primaryDefault,size:v.ButtonIconSize.Sm}))),n.default.createElement(y.Text,{variant:_.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:_.TextColor.textAlternative,fontWeight:_.FontWeight.Bold},b("tokenDecimalTitle")),n.default.createElement(y.Text,{variant:_.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:_.TextColor.textDefault},O.decimals),n.default.createElement(y.Text,{variant:_.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:_.TextColor.textAlternative,fontWeight:_.FontWeight.Bold},b("network")),n.default.createElement(y.Text,{variant:_.TextVariant.bodySm,as:"h6",margin:1,marginTop:0,color:_.TextColor.textDefault},D===f.NETWORK_TYPES.RPC?x??b("privateNetwork"):b(D)),N&&n.default.createElement(n.default.Fragment,null,n.default.createElement(y.Text,{variant:_.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:_.TextColor.textAlternative,fontWeight:_.FontWeight.Bold},b("tokenList")),n.default.createElement(y.Text,{variant:_.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:_.TextColor.textDefault},`${N}.`)),n.default.createElement(h.default,{type:"secondary",className:"token-details__hide-token-button",onClick:()=>{a((0,m.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:O,history:w}))}},n.default.createElement(y.Text,{variant:_.TextVariant.bodySm,as:"h6",color:_.TextColor.primaryDefault},b("hideToken")))))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../ducks/metamask/metamask"),i=e("../../selectors"),l=e("../../hooks/useCopyToClipboard"),u=w(e("../../components/ui/identicon")),c=e("../../contexts/i18n"),d=e("../../hooks/useTokenTracker"),p=e("../../hooks/useTokenFiatAmount"),m=e("../../store/actions"),f=e("../../../shared/constants/network"),g=e("../../helpers/constants/routes"),T=w(e("../../components/ui/tooltip")),h=w(e("../../components/ui/button")),E=w(e("../../components/ui/box")),_=e("../../helpers/constants/design-system"),S=e("../../../shared/modules/string-utils"),v=e("../../components/component-library"),y=e("../../components/component-library/text/deprecated");function w(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/token-details/token-details-page.js"}],[5441,{"./unlock-page.container":5443},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=((n=e("./unlock-page.container"))&&n.__esModule?n:{default:n}).default;a.default=r}}},{package:"$root$",file:"ui/pages/unlock-page/index.js"}],[5442,{"../../../shared/constants/metametrics":4323,"../../../shared/lib/ui-utils":4345,"../../components/ui/button":4893,"../../components/ui/mascot":4960,"../../components/ui/text-field":5006,"../../helpers/constants/routes":5057,"../../helpers/utils/build-types":5073,"./unlock-page.util":5444,events:2336,"prop-types":3766,react:4043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("events"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("react")),o=f(e("prop-types")),s=f(e("../../components/ui/button")),i=f(e("../../components/ui/text-field")),l=f(e("../../components/ui/mascot")),u=e("../../helpers/constants/routes"),c=e("../../../shared/constants/metametrics"),d=e("../../../shared/lib/ui-utils"),p=e("../../helpers/utils/build-types"),m=e("./unlock-page.util");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function T(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(a!==undefined){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends r.Component{constructor(...e){super(...e),T(this,"state",{password:"",error:null}),T(this,"submitting",!1),T(this,"failed_attempts",0),T(this,"animationEventEmitter",new n.EventEmitter),T(this,"handleSubmit",(async e=>{e.preventDefault(),e.stopPropagation();const{password:t}=this.state,{onSubmit:a,forceUpdateMetamaskState:n}=this.props;if(""!==t&&!this.submitting){this.setState({error:null}),this.submitting=!0;try{await a(t),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlocked,properties:{failed_attempts:this.failed_attempts}},{isNewVisit:!0})}catch({message:e}){this.failed_attempts+=1,"Incorrect password"===e&&(await n(),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlockedFailed,properties:{reason:"incorrect_password",failed_attempts:this.failed_attempts}})),this.setState({error:e}),this.submitting=!1}}}))}UNSAFE_componentWillMount(){const{isUnlocked:e,history:t}=this.props;e&&t.push(u.DEFAULT_ROUTE)}handleInputChange({target:e}){if(this.setState({password:e.value,error:null}),e.getBoundingClientRect){const t=e,a=t.getBoundingClientRect(),n=(0,m.getCaretCoordinates)(t,t.selectionEnd);this.animationEventEmitter.emit("point",{x:a.left+n.left-t.scrollLeft,y:a.top+n.top-t.scrollTop})}}renderSubmitButton(){return r.default.createElement(s.default,{type:"submit","data-testid":"unlock-submit",style:{backgroundColor:"var(--color-primary-default)",color:"var(--color-primary-inverse)",marginTop:"20px",height:"60px",fontWeight:"400",boxShadow:"none",borderRadius:"100px"},disabled:!this.state.password,variant:"contained",size:"large",onClick:this.handleSubmit},this.context.t("unlock"))}render(){const{password:e,error:t}=this.state,{t:a}=this.context,{onRestore:n}=this.props;return r.default.createElement("div",{className:"unlock-page__container"},r.default.createElement("div",{className:"unlock-page","data-testid":"unlock-page"},r.default.createElement("div",{className:"unlock-page__mascot-container"},r.default.createElement(l.default,{animationEventEmitter:this.animationEventEmitter,width:"120",height:"120"}),(0,p.isBeta)()?r.default.createElement("div",{className:"unlock-page__mascot-container__beta"},a("beta")):null),r.default.createElement("h1",{className:"unlock-page__title"},a("welcomeBack")),r.default.createElement("div",null,a("unlockMessage")),r.default.createElement("form",{className:"unlock-page__form",onSubmit:this.handleSubmit},r.default.createElement(i.default,{id:"password","data-testid":"unlock-password",label:a("password"),type:"password",value:e,onChange:e=>this.handleInputChange(e),error:t,autoFocus:!0,autoComplete:"current-password",theme:"material",fullWidth:!0})),this.renderSubmitButton(),r.default.createElement("div",{className:"unlock-page__links"},r.default.createElement(s.default,{type:"link",key:"import-account",className:"unlock-page__link",onClick:()=>n()},a("forgotPassword"))),r.default.createElement("div",{className:"unlock-page__support"},a("needHelp",[r.default.createElement("a",{href:d.SUPPORT_LINK,target:"_blank",rel:"noopener noreferrer",key:"need-help-link",onClick:()=>{this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.SupportLinkClicked,properties:{url:d.SUPPORT_LINK}},{contextPropsIntoEventProperties:[c.MetaMetricsContextProp.PageTitle]})}},a("needHelpLinkText"))]))))}}a.default=h,T(h,"contextTypes",{trackEvent:o.default.func,t:o.default.func}),T(h,"propTypes",{history:o.default.object.isRequired,isUnlocked:o.default.bool,onRestore:o.default.func,onSubmit:o.default.func,forceUpdateMetamaskState:o.default.func})}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.component.js"}],[5443,{"../../../app/scripts/lib/util":82,"../../../shared/constants/app":4316,"../../helpers/constants/routes":5057,"../../store/actions":5456,"./unlock-page.component":5442,"react-redux":4008,"react-router-dom":4028,redux:4076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,r=e("react-redux"),o=e("react-router-dom"),s=e("redux"),i=e("../../../app/scripts/lib/util"),l=e("../../../shared/constants/app"),u=e("../../helpers/constants/routes"),c=e("../../store/actions"),d=(n=e("./unlock-page.component"))&&n.__esModule?n:{default:n};var p=(0,s.compose)(o.withRouter,(0,r.connect)((e=>{const{metamask:{isUnlocked:t}}=e;return{isUnlocked:t}}),(e=>({tryUnlockMetamask:t=>e((0,c.tryUnlockMetamask)(t)),markPasswordForgotten:()=>e((0,c.markPasswordForgotten)()),forceUpdateMetamaskState:()=>(0,c.forceUpdateMetamaskState)(e)})),((e,t,a)=>{const{markPasswordForgotten:n,tryUnlockMetamask:r,...o}=t,{history:s,onSubmit:c,...d}=a;return{...e,...o,...d,onRestore:async()=>{await n(),s.push(u.RESTORE_VAULT_ROUTE),(0,i.getEnvironmentType)()===l.ENVIRONMENT_TYPE_POPUP&&global.platform.openExtensionInBrowser(u.RESTORE_VAULT_ROUTE)},onSubmit:c||(async e=>{await r(e),s.push(u.DEFAULT_ROUTE)}),history:s}})))(d.default);a.default=p}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.container.js"}],[5444,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getCaretCoordinates=function(e,t){const a=document.createElement("div");a.id="password-mirror-div",document.body.appendChild(a);const n=window.getComputedStyle(e);a.textContent=new Array(t+1).join("•");const r=document.createElement("span");r.textContent="•",a.appendChild(r);const o={top:r.offsetTop+parseInt(n.borderTopWidth,10),left:r.offsetLeft+parseInt(n.borderLeftWidth,10)};return document.body.removeChild(a),o}}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.util.js"}],[5445,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getApprovalFlows=function(e){return e.metamask.approvalFlows},a.getApprovalRequestsByType=void 0,a.hasPendingApprovals=function(e,t,a){const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));if(a)return n.some(a);return n.length>0};a.getApprovalRequestsByType=(e,t,a)=>{const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return a?n.filter(a):n}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[5446,{".":5449,"../../shared/constants/gas":4319,"../../shared/constants/transaction":4336,"../../shared/lib/transactions-controller-utils":4344,"../../shared/modules/conversion.utils":4350,"../../shared/modules/gas.utils":4353,"../../shared/modules/string-utils":4363,"../../shared/modules/transaction.utils":4365,"../ducks/metamask/metamask":5044,"../helpers/utils/confirm-tx.util":5075,"../helpers/utils/tx-helper":5092,"./custom-gas":5447,"./selectors":5452,reselect:4085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.unconfirmedTransactionsListSelector=a.unconfirmedTransactionsHashSelector=a.unconfirmedMessagesHashSelector=a.txDataSelector=a.transactionFeeSelector=a.tokenAddressSelector=a.sendTokenTokenAmountAndToAddressSelector=a.currentCurrencySelector=a.conversionRateSelector=a.contractExchangeRateSelector=void 0;var n,r=e("reselect"),o=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},s=e("../helpers/utils/confirm-tx.util"),i=e("../../shared/modules/transaction.utils"),l=e("../ducks/metamask/metamask"),u=e("../../shared/constants/transaction"),c=e("../../shared/constants/gas"),d=e("../../shared/modules/gas.utils"),p=e("../../shared/modules/string-utils"),m=e("../../shared/lib/transactions-controller-utils"),f=e("../../shared/modules/conversion.utils"),g=e("./custom-gas"),T=e("./selectors"),h=e(".");const E=e=>e.metamask.unapprovedTxs,_=e=>e.metamask.unapprovedMsgs,S=e=>e.metamask.unapprovedPersonalMsgs,v=e=>e.metamask.unapprovedDecryptMsgs,y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,w=e=>e.metamask.unapprovedTypedMessages,b=(0,r.createSelector)(E,_,S,v,y,w,T.deprecatedGetCurrentNetworkId,T.getCurrentChainId,((e={},t={},a={},n={},r={},s={},i,l)=>(0,o.default)(e,t,a,n,r,s,i,l)||[]));a.unconfirmedTransactionsListSelector=b;const k=(0,r.createSelector)(E,_,S,v,y,w,T.deprecatedGetCurrentNetworkId,T.getCurrentChainId,((e={},t={},a={},n={},r={},o={},s,l)=>({...Object.keys(e).reduce(((t,a)=>{const n={...t};return(0,i.transactionMatchesNetwork)(e[a],l,s)&&(n[a]=e[a]),n}),{}),...t,...a,...n,...r,...o})));a.unconfirmedTransactionsHashSelector=k;const A=(0,r.createSelector)(_,S,v,y,w,((e={},t={},a={},n={},r={})=>({...e,...t,...a,...n,...r})));a.unconfirmedMessagesHashSelector=A;const I=e=>e.metamask.currentCurrency;a.currentCurrencySelector=I;const C=e=>e.metamask.conversionRate;a.conversionRateSelector=C;const N=e=>e.confirmTransaction.txData;a.txDataSelector=N;const O=(0,r.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),P=(0,r.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),R=(0,r.createSelector)(N,(e=>e&&e.txParams||{})),M=(0,r.createSelector)(R,(e=>e&&e.to));a.tokenAddressSelector=M;const x=(0,r.createSelector)(P,O,((e,t)=>{let a="",n="0";if(e&&e.length){a=e._to;let r=e._value.toString();t&&(r=(0,m.calcTokenAmount)(r,t).toFixed()),n=(0,s.roundExponential)(r)}return{toAddress:a,tokenAmount:n}}));a.sendTokenTokenAmountAndToAddressSelector=x;const D=(0,r.createSelector)((e=>e.metamask.contractExchangeRates),M,((e,t)=>e[Object.keys(e).find((e=>(0,p.isEqualCaseInsensitive)(e,t)))]));a.contractExchangeRateSelector=D;a.transactionFeeSelector=function(e,t){var a,n,r,o;const i=I(e),p=C(e),m=(0,l.getNativeCurrency)(e),T=(0,l.getGasFeeEstimates)(e)||{},E=(0,l.getGasEstimateType)(e),_=(0,h.checkNetworkAndAccountSupports1559)(e),S={gasLimit:(null===(a=t.txParams)||void 0===a?void 0:a.gas)??"0x0"};if(_){var v;const{gasPrice:e="0"}=T,a=T[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===u.TransactionEnvelopeType.legacy){var y;S.gasPrice=(null===(y=t.txParams)||void 0===y?void 0:y.gasPrice)??(0,f.decGWEIToHexWEI)(e)}else{var w,b,k,A;const{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:r}=a;S.maxFeePerGas=null===(w=t.txParams)||void 0===w||!w.maxFeePerGas||t.userFeeLevel!==c.CUSTOM_GAS_ESTIMATE&&r?(0,f.decGWEIToHexWEI)(r||e):null===(b=t.txParams)||void 0===b?void 0:b.maxFeePerGas,S.maxPriorityFeePerGas=null===(k=t.txParams)||void 0===k||!k.maxPriorityFeePerGas||t.userFeeLevel!==c.CUSTOM_GAS_ESTIMATE&&n?n&&(0,f.decGWEIToHexWEI)(n)||S.maxFeePerGas:null===(A=t.txParams)||void 0===A?void 0:A.maxPriorityFeePerGas,S.baseFeePerGas=(0,f.decGWEIToHexWEI)(T.estimatedBaseFee)}}else switch(E){case c.GasEstimateTypes.none:S.gasPrice=(null===(n=t.txParams)||void 0===n?void 0:n.gasPrice)??"0x0";break;case c.GasEstimateTypes.ethGasPrice:S.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??(0,f.decGWEIToHexWEI)(T.gasPrice);break;case c.GasEstimateTypes.legacy:S.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,g.getAveragePriceEstimateInHexWEI)(e);case c.GasEstimateTypes.feeMarket:}const{txParams:{value:N="0x0"}={}}=t,O=(0,f.getValueFromWeiHex)({value:N,fromCurrency:m,toCurrency:i,conversionRate:p,numberOfDecimals:2}),P=(0,f.getValueFromWeiHex)({value:N,fromCurrency:m,toCurrency:m,conversionRate:p,numberOfDecimals:6}),R=(0,d.getMinimumGasTotalInHexWei)(S),M=(0,d.getMaximumGasTotalInHexWei)(S),x=(0,s.getTransactionFee)({value:R,fromCurrency:m,toCurrency:i,numberOfDecimals:2,conversionRate:p}),D=(0,s.getTransactionFee)({value:M,fromCurrency:m,toCurrency:i,numberOfDecimals:2,conversionRate:p}),L=(0,s.getTransactionFee)({value:R,fromCurrency:m,toCurrency:m,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:N,fiatTransactionAmount:O,ethTransactionAmount:P,hexMinimumTransactionFee:R,fiatMinimumTransactionFee:x,hexMaximumTransactionFee:M,fiatMaximumTransactionFee:D,ethTransactionFee:L,fiatTransactionTotal:(0,s.addFiat)(x,O),ethTransactionTotal:(0,s.addEth)(L,P),hexTransactionTotal:(0,f.sumHexes)(N,R),gasEstimationObject:S}}}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[5447,{".":5449,"../../app/scripts/lib/util":82,"../../shared/constants/common":4318,"../../shared/constants/gas":4319,"../../shared/lib/transactions-controller-utils":4344,"../../shared/modules/Numeric":4346,"../../shared/modules/conversion.utils":4350,"../ducks/metamask/metamask":5044,"../ducks/send":5046,"../helpers/utils/confirm-tx.util":5075,"../helpers/utils/formatters":5077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.basicPriceEstimateToETHTotal=E,a.getAverageEstimate=T,a.getAveragePriceEstimateInHexWEI=function(e){return S(T(e))},a.getBasicGasEstimateLoadingStatus=function(e){return!1===v(e)},a.getCustomGasLimit=function(e){return e.gas.customData.limit},a.getCustomGasPrice=f,a.getDefaultActiveButtonIndex=function(e,t,a){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,n.addHexPrefix)(t||a))},a.getFastPriceEstimate=h,a.getFastPriceEstimateInHexWEI=function(e){return S(h(e)||"0x0")},a.getGasPriceInHexWei=S,a.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},a.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},a.getIsGasEstimatesFetched=v,a.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.none},a.getRenderableConvertedCurrencyFee=function(e,t,a,n){const s=E(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,r.decEthToConvertedCurrency)(s,a,n);return(0,o.formatCurrency)(i,a)},a.getRenderableEthFee=function(e,t,a=9,n="ETH"){const r=E(new d.Numeric(e,10).toBase(16).toString(),t,a);return(0,s.formatETHFee)(r,n)},a.getSafeLowEstimate=g,a.isCustomPriceExcessive=function(e,t=!1){const a=t?(0,i.getGasPrice)(e):f(e),n=h(e);if(!a||!n)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*n),10)},a.isCustomPriceSafe=function(e){const t=g(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.isCustomPriceSafeForCustomNetwork=function(e){const t=T(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.priceEstimateToWei=_;var n=e("../../app/scripts/lib/util"),r=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/formatters"),i=e("../ducks/send"),l=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),c=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e(".");function f(e){return e.gas.customData.price}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function E(e,t,a=9){return new d.Numeric((0,c.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(a).toBase(10).toString()}function _(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function S(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,n.addHexPrefix)(_(t))}function v(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==l.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[5448,{"../helpers/constants/routes":5057},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getFirstTimeFlowType=void 0,a.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let a;a="create"===t?n.ONBOARDING_CREATE_PASSWORD_ROUTE:"import"===t?n.ONBOARDING_IMPORT_WITH_SRP_ROUTE:n.DEFAULT_ROUTE;return a},a.getOnboardingInitiator=void 0;var n=e("../helpers/constants/routes");a.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;a.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const a=Object.keys(t)[0];return{location:a,tabId:t[a]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[5449,{"./approvals":5445,"./confirm-transaction":5446,"./custom-gas":5447,"./first-time-flow":5448,"./metametrics":5450,"./permissions":5451,"./selectors":5452,"./transactions":5453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./confirm-transaction");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}));var r=e("./custom-gas");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===r[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===o[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./metametrics");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===s[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./permissions");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===i[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=e("./selectors");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===l[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===u[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=e("./approvals");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===c[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return c[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[5450,{reselect:4085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.selectMatchingFragment=a.selectFragments=a.selectFragmentBySuccessEvent=a.selectFragmentById=void 0;var n=e("reselect");const r=e=>e.metamask.fragments;a.selectFragments=r;const o=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined));a.selectFragmentBySuccessEvent=o;const s=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));a.selectFragmentById=s;const i=(0,n.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>t??e));a.selectMatchingFragment=i}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[5451,{".":5449,"../../shared/constants/permissions":4325,"./approvals":5445,"@metamask/controller-utils":1095,"@metamask/rpc-methods":1373},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.activeTabHasPermissions=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n;return Boolean(Object.keys((null===(t=r[a.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},a.getAccountToConnectToActiveTab=function(e){const t=(0,i.getSelectedAddress)(e),a=c(e),{metamask:{identities:n}}=e,r=Object.keys(n).length;if(a.length&&a.length!==r&&-1===a.findIndex((e=>e===t)))return n[t];return undefined},a.getAddressConnectedSubjectMap=function(e){const t=(0,i.getSubjectMetadata)(e),a=d(e),n={};return Object.keys(a).forEach((e=>{const{iconUrl:r,name:o}=t[e]||{};a[e].forEach((t=>{const a=o||e;n[t]=n[t]?{...n[t],[e]:{iconUrl:r,name:a}}:{[e]:{iconUrl:r,name:a}}}))})),n},a.getConnectedSubjectsForAllAddresses=function(e){const t=l(e),a=(0,i.getSubjectMetadata)(e),n={};return Object.entries(t).forEach((([e,t])=>{p(t).forEach((t=>{n[t]||(n[t]=[]),n[t].push(a[e]||{})}))})),n},a.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,a=l(e),n=(0,i.getSubjectMetadata)(e),r=[];return Object.entries(a).forEach((([e,a])=>{if(!p(a).includes(t))return;const{extensionId:o,name:s,iconUrl:i}=n[e]||{};r.push({extensionId:o,origin:e,name:s,iconUrl:i})})),r},a.getFirstPermissionRequest=function(e){const t=T(e);return t&&t[0]?t[0]:null},a.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=g(e))||void 0===t?void 0:t[0])??null},a.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,a)=>(t[a].eth_accounts&&(e[a]=JSON.parse(JSON.stringify(t[a].eth_accounts))),e)),{})},a.getOrderedConnectedAccountsForActiveTab=function(e){var t,a;const{activeTab:n,metamask:{permissionHistory:r}}=e,o=null===(t=r[n.origin])||void 0===t||null===(a=t.eth_accounts)||void 0===a?void 0:a.accounts,s=(0,i.getMetaMaskAccountsOrdered)(e),l=c(e);return s.filter((e=>l.includes(e.address))).map((e=>({...e,lastActive:null==o?void 0:o[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},a.getPermissionSubjects=l,a.getPermissions=function(e,t){var a;return null===(a=l(e)[t])||void 0===a?void 0:a.permissions},a.getPermissionsForActiveTab=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n,o=(null===(t=r[a.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(o).map((e=>({key:e,value:o[e]})))},a.getPermissionsRequests=T,a.getPermittedAccounts=u,a.getPermittedAccountsByOrigin=d,a.getPermittedAccountsForCurrentTab=c,a.getRequestState=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.requestState},a.getRequestType=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.type},a.getSnapInstallOrUpdateRequests=g,a.getSubjectsWithPermission=function(e,t){const a=l(e),n=[];return Object.entries(a).forEach((([a,{permissions:r}])=>{if(r[t]){const{extensionId:t,name:r,iconUrl:o}=(0,i.getTargetSubjectMetadata)(e,a)||{};n.push({extensionId:t,origin:a,name:r,iconUrl:o})}})),n},a.getSubjectsWithSnapPermission=function(e,t){const a=l(e);return Object.entries(a).filter((([e,{permissions:a}])=>{var n;return null===(n=a[r.WALLET_SNAP_PERMISSION_KEY])||void 0===n?void 0:n.caveats[0].value[t]})).map((([t,a])=>{const{extensionId:n,name:r,iconUrl:o}=(0,i.getTargetSubjectMetadata)(e,t)||{};return{extensionId:n,origin:t,name:r,iconUrl:o}}))};var n=e("@metamask/controller-utils"),r=e("@metamask/rpc-methods"),o=e("../../shared/constants/permissions"),s=e("./approvals"),i=e(".");function l(e){return e.metamask.subjects||{}}function u(e,t){return f(m(function(e,t){var a;return t&&(null===(a=e.metamask.subjects)||void 0===a?void 0:a[t])}(e,t)))}function c(e){return u(e,(0,i.getOriginOfCurrentTab)(e))}function d(e){const t=l(e);return Object.keys(t).reduce(((e,a)=>{const n=p(t[a]);return n.length>0&&(e[a]=n),e}),{})}function p(e){return f(m(e))}function m(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function f(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function g(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function T(e){var t;return null===(t=(0,s.getApprovalRequestsByType)(e,n.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[5452,{"../../app/scripts/lib/util":82,"../../shared/constants/app":4316,"../../shared/constants/bridge":4317,"../../shared/constants/hardware-wallets":4320,"../../shared/constants/keyring":4321,"../../shared/constants/labels":4322,"../../shared/constants/network":4324,"../../shared/constants/swaps":4331,"../../shared/constants/terms":4332,"../../shared/constants/time":4334,"../../shared/constants/tokens":4335,"../../shared/constants/transaction":4336,"../../shared/modules/conversion.utils":4350,"../../shared/modules/string-utils":4363,"../../shared/notifications":4367,"../ducks/app/app":5036,"../ducks/metamask/metamask":5044,"../helpers/constants/design-system":5052,"../helpers/constants/routes":5057,"../helpers/utils/util":5093,"../pages/confirmation/templates":5195,"./permissions":5451,"@metamask/controller-utils":1095,"@metamask/subject-metadata-controller":1637,lodash:3617,reselect:4085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.accountsWithSendEtherInfoSelector=Q,a.checkNetworkAndAccountSupports1559=function(e){return(0,S.isEIP1559Network)(e)},a.checkNetworkOrAccountNotSupports1559=function(e){return(0,S.isNotEIP1559Network)(e)},a.deprecatedGetCurrentNetworkId=M,a.doesAddressRequireLedgerHidConnection=function(e,t){const a=(0,S.isAddressLedger)(e,t),n=(0,S.getLedgerTransportType)(e)===u.LedgerTransportTypes.webhid,r=(0,v.getLedgerWebHidConnectedStatus)(e)!==u.WebHIDConnectedStatuses.connected,o=(0,v.getLedgerTransportStatus)(e)!==u.HardwareTransportStates.verified;return a&&n&&(r||o)},a.getAccountName=function(e,t){const a=Object.values(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:""},a.getAccountType=function(e){return R(O(e))},a.getAccountTypeForKeyring=R,a.getAccountsWithLabels=function(e){return U(e).map((({address:e,name:t,balance:a})=>({address:e,addressLabel:`${t.length<p.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,p.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,g.shortenAddress)(e)})`,label:t,balance:a})))},a.getAddressBook=K,a.getAddressBookEntry=$,a.getAddressBookEntryOrAccountName=function(e,t){const a=$(e,t)||Object.values(e.metamask.identities).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:t},a.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[N(e)]},a.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},a.getAllAccountsOnNetworkAreEmpty=function(e){const t=W(e)??{},a=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),n=0===F(e);return a&&n},a.getAllEnabledNetworks=function(e){const t=Ne(e),a=Oe(e);return te(e)?a:t},a.getAllNetworks=Oe,a.getAppIsLoading=function(e){return e.appState.isLoading},a.getBlockExplorerLinkText=function(e,t=!1){const a=Le(e),n=oe(e);let r={firstPart:"addBlockExplorer",secondPart:""};n.blockExplorerUrl?r=t?{firstPart:"blockExplorerView",secondPart:(0,g.getURLHostName)(n.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===a&&(r=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return r},a.getCurrentAccountWithSendEtherInfo=Y,a.getCurrentChainId=N,a.getCurrentCurrency=function(e){return e.metamask.currentCurrency},a.getCurrentEthBalance=X,a.getCurrentKeyring=O,a.getCurrentNetwork=function(e){const t=Oe(e),a=(0,S.getProviderConfig)(e),n="rpc"===a.type?e=>e.id===a.id:e=>e.id===a.type;return t.find(n)},a.getCurrentNetworkTransactionList=void 0,a.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},a.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},a.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},a.getDetectedTokensInCurrentNetwork=function(e){var t,a;const n=N(e),r=D(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(a=t[n])||void 0===a?void 0:a[r]},a.getDisabledRpcMethodPreferences=function(e){return e.metamask.disabledRpcMethodPreferences},a.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const a=$(e,t)||Object.values(e.metamask.identities).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return(null==a?void 0:a.name)||""},a.getFeatureFlags=function(e){return e.metamask.featureFlags},a.getFullTxData=void 0,a.getGasIsLoading=function(e){return e.appState.gasIsLoading},a.getHardwareWalletType=function(e){const t=O(e);return P(e)?t.type:undefined},a.getInfuraBlocked=function(e){return Boolean(e.metamask.infuraBlocked)},a.getInsightSnaps=void 0,a.getIpfsGateway=function(e){return e.metamask.ipfsGateway},a.getIsBase=Re,a.getIsBridgeChain=ie,a.getIsBridgeToken=void 0,a.getIsBuyableChain=function(e){const t=N(e);return Object.keys(l.BUYABLE_CHAINS_MAP).includes(t)},a.getIsCustomNetwork=Le,a.getIsDynamicTokenListAvailable=xe,a.getIsMainnet=Z,a.getIsMultiLayerFeeNetwork=function(e){return Me(e)},a.getIsNetworkUsed=function(e){const t=N(e),{usedNetworks:a}=e.metamask;return Boolean(a[t])},a.getIsNonStandardEthChain=function(e){return!(Z(e)||J(e))},a.getIsOpStack=Me,a.getIsOptimism=Pe,a.getIsSwapsChain=se,a.getIsTestnet=J,a.getIsTokenDetectionInactiveOnMainnet=De,a.getIsTokenDetectionSupported=function(e){const t=ke(e),a=xe(e);return t&&a},a.getIsTransactionSecurityCheckEnabled=function(e){return e.metamask.transactionSecurityCheckEnabled},a.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=ke(e),a=Z(e);return xe(e)&&!t&&!a},a.getKnownMethodData=function(e,t){if(!t)return null;const a=(0,i.addHexPrefix)(t).slice(0,10),{knownMethodData:n}=e.metamask;return n&&n[a]},a.getMemoizedMetadataContractName=a.getMemoizedMetaMaskIdentities=a.getMemoizedAddressBook=void 0,a.getMetaMaskAccountBalances=q,a.getMetaMaskAccountsOrdered=a.getMetaMaskAccountsConnected=a.getMetaMaskAccounts=void 0,a.getMetaMaskCachedBalances=W,a.getMetaMaskIdentities=j,a.getMetaMaskKeyrings=B,a.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},a.getMetadataContractName=function(e,t){const a=Ae(e),n=Object.values(a).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.name?n.name:""},a.getNativeCurrencyImage=function(e){var t;const a=null===(t=(0,S.getNativeCurrency)(e))||void 0===t?void 0:t.toUpperCase();return l.NATIVE_CURRENCY_TOKEN_IMAGE_MAP[a]},a.getNetworkConfigurations=Ie,a.getNetworkIdentifier=function(e){const{type:t,nickname:a,rpcUrl:n}=(0,S.getProviderConfig)(e);return a||n||t},a.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},a.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},a.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},a.getNewTokensImported=function(e){return e.appState.newTokensImported},a.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},a.getNonTestNetworks=Ne,a.getNotifications=ye,a.getNumberOfTokens=F,a.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},a.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},a.getOriginOfCurrentTab=function(e){return e.activeTab.origin},a.getPreferences=ee,a.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},a.getRpcPrefsForCurrentProvider=oe,a.getSelectedAccount=V,a.getSelectedAccountCachedBalance=H,a.getSelectedAddress=D,a.getSelectedIdentity=L,a.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=ee(e);return t},a.getShouldShowFiat=function(e){const t=Z(e),a=Le(e),n=(0,S.getConversionRate)(e),r=Fe(e),{showFiatInTestnets:o}=ee(e);return Boolean((t||a||o)&&r&&n)},a.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:a,dismissSeedBackUpReminder:n}=e.metamask,r=X(e)??0;return!1===a&&(parseInt(r,16)>0||t.length>0)&&!1===n},a.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},a.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*E.DAY},a.getShowProductTour=function(e){return e.metamask.showProductTour},a.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:a}=e.metamask,n=(new Date).getTime(),r=a?90*E.DAY:2*E.DAY;return n-t>=r},a.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(_.TERMS_OF_USE_LAST_UPDATED).getTime()},a.getShowTestNetworks=te,a.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},a.getSnap=void 0,a.getSnaps=Ee,a.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},a.getSnapsList=function(e){const t=Ee(e);return Object.entries(t).map((([t,a])=>{const n=re(e,null==a?void 0:a.id);return{key:t,id:a.id,packageName:(0,g.removeSnapIdPrefix)(a.id),name:(0,g.getSnapName)(a.id,n)}}))},a.getSnapsRouteObjects=void 0,a.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),a=function(e){const t=O(e),a=(null==t?void 0:t.type)===c.KeyringType.ledger,n=window.navigator.hid!==undefined,r=(0,S.getLedgerTransportType)(e)===u.LedgerTransportTypes.live,o=window.navigator.userAgent.includes("Firefox"),s=se(e);return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:n&&a&&r,9:!1,10:!1,11:!1,12:!1,13:!1,14:!1,15:!1,16:!1,17:!1,18:!1,19:!1,20:a&&o,21:s,22:!0,24:!0===e.metamask.hadAdvancedGasFeesSetPriorToMigration92_3,[A.NOTIFICATION_OPEN_BETA_SNAPS]:!0}}(e),n=t.filter((e=>!e.isShown&&a[e.id]));return n.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},a.getSubjectMetadata=ae,a.getSuggestedNfts=function(e){var t;return(null===(t=z(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var a;return t===r.ApprovalType.WatchAsset&&(null==e||null===(a=e.asset)||void 0===a?void 0:a.tokenId)!==undefined})))||[]},a.getSuggestedTokens=function(e){var t;return(null===(t=z(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var a;return e===r.ApprovalType.WatchAsset&&(null==t||null===(a=t.asset)||void 0===a?void 0:a.tokenId)===undefined})))||[]},a.getSwapsDefaultToken=function(e){const t=V(e),{balance:a}=t,n=N(e);return{...m.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[n],balance:(0,b.hexToDecimal)(a),string:(0,b.getValueFromWeiHex)({value:a,numberOfDecimals:4,toDenomination:"ETH"})}},a.getTargetAccount=function(e,t){return x(e)[t]},a.getTargetAccountWithSendEtherInfo=function(e,t){const a=Q(e);return(0,g.getAccountByAddress)(a,t)},a.getTargetSubjectMetadata=re,a.getTestNetworkBackgroundColor=function(e){const t=e.metamask.providerConfig.ticker;switch(!0){case null==t?void 0:t.includes(l.GOERLI_DISPLAY_NAME):return k.BackgroundColor.goerli;case null==t?void 0:t.includes(l.SEPOLIA_DISPLAY_NAME):return k.BackgroundColor.sepolia;default:return undefined}},a.getTestNetworks=Ce,a.getTheme=function(e){return e.metamask.theme},a.getTokenExchangeRates=a.getTokenDetectionSupportNetworkByChainId=void 0,a.getTokenList=Ae,a.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},a.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:r=0,unapprovedTypedMessagesCount:o=0}=e.metamask;return t+a+n+r+o},a.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+a+n},a.getTxData=a.getTransaction=void 0,a.getUSDConversionRate=function(e){return e.metamask.usdConversionRate},a.getUnapprovedConfirmations=z,a.getUnapprovedTemplatedConfirmations=function(e){return z(e).filter((e=>T.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))},a.getUnapprovedTransactions=a.getUnapprovedTransaction=void 0,a.getUnapprovedTxCount=function(e){const{unapprovedTxs:t={}}=e.metamask;return Object.keys(t).length},a.getUnreadNotifications=we,a.getUnreadNotificationsCount=void 0,a.getUseCurrencyRateCheck=Fe,a.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},a.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},a.getUseTokenDetection=ke,a.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},a.hasUnsignedQRHardwareMessage=function(e){const{type:t,msgParams:a}=e.confirmTransaction.txData;if(!t||!a)return!1;const{from:n}=a,{keyrings:r}=e.metamask,o=r.find((e=>e.type===c.KeyringType.qr));if(!o)return!1;switch(t){case d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:case d.MESSAGE_TYPE.ETH_SIGN:case d.MESSAGE_TYPE.PERSONAL_SIGN:return Boolean(o.accounts.find((e=>e.toLowerCase()===n.toLowerCase())));default:return!1}},a.hasUnsignedQRHardwareTransaction=function(e){const{txParams:t}=e.confirmTransaction.txData;if(!t)return!1;const{from:a}=t,{keyrings:n}=e.metamask,r=n.find((e=>e.type===c.KeyringType.qr));if(!r)return!1;return Boolean(r.accounts.find((e=>e.toLowerCase()===a.toLowerCase())))},a.isBalanceCached=function(e){var t;const a=null===(t=q(e)[D(e)])||void 0===t?void 0:t.balance,n=H(e);return Boolean(!a&&n)},a.isCurrentProviderCustom=function(e){const t=(0,S.getProviderConfig)(e);return t.type===l.NETWORK_TYPES.RPC&&!Object.values(l.CHAIN_IDS).includes(t.chainId)},a.isHardwareWallet=P,a.isNetworkLoading=function(e){return e.metamask.networkStatus!==l.NetworkStatus.Available};var n=e("@metamask/subject-metadata-controller"),r=e("@metamask/controller-utils"),o=e("reselect"),s=e("lodash"),i=e("../../app/scripts/lib/util"),l=e("../../shared/constants/network"),u=e("../../shared/constants/hardware-wallets"),c=e("../../shared/constants/keyring"),d=e("../../shared/constants/app"),p=e("../../shared/constants/labels"),m=e("../../shared/constants/swaps"),f=e("../../shared/constants/bridge"),g=e("../helpers/utils/util"),T=e("../pages/confirmation/templates"),h=e("../../shared/constants/tokens"),E=e("../../shared/constants/time"),_=e("../../shared/constants/terms"),S=e("../ducks/metamask/metamask"),v=e("../ducks/app/app"),y=e("../../shared/modules/string-utils"),w=e("../../shared/constants/transaction"),b=e("../../shared/modules/conversion.utils"),k=e("../helpers/constants/design-system"),A=e("../../shared/notifications"),I=e("../helpers/constants/routes"),C=e("./permissions");function N(e){const{chainId:t}=(0,S.getProviderConfig)(e);return t}function O(e){const t=L(e);if(!t)return null;return(0,S.findKeyringForAddress)(e,t.address)}function P(e){var t;const a=O(e);return Boolean(null==a||null===(t=a.type)||void 0===t?void 0:t.includes("Hardware"))}function R(e){if(!e)return"";const{type:t}=e;switch(t){case c.KeyringType.trezor:case c.KeyringType.ledger:case c.KeyringType.lattice:case c.KeyringType.qr:return"hardware";case c.KeyringType.imported:return"imported";default:return"default"}}function M(e){return e.metamask.networkId??"loading"}const x=(0,o.createSelector)(j,q,W,((e,t,a)=>Object.keys(e).reduce(((e,n)=>{let r={};return t[n]&&(r={...r,...t[n]}),null!==r.balance&&r.balance!==undefined||(r={...r,balance:a&&a[n]}),{...e,[n]:r}}),{})));function D(e){return e.metamask.selectedAddress}function L(e){const t=D(e),{identities:a}=e.metamask;return a[t]}function F(e){const{tokens:t}=e.metamask;return t?t.length:0}function B(e){return e.metamask.keyrings}function j(e){return e.metamask.identities}function q(e){return e.metamask.accounts}function W(e){const t=N(e),a=M(e);return e.metamask.cachedBalances[t]??e.metamask.cachedBalances[a]}a.getMetaMaskAccounts=x;const U=(0,o.createSelector)(B,j,x,((e,t,a)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>({...t[e],...a[e]})))));a.getMetaMaskAccountsOrdered=U;const G=(0,o.createSelector)(U,(e=>e.map((({address:e})=>e.toLowerCase()))));function H(e){const t=W(e),a=D(e);return t&&t[a]}function V(e){return x(e)[D(e)]}a.getMetaMaskAccountsConnected=G;function K(e){const t=N(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function $(e,t){return K(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)))}function Q(e){const t=x(e),a=j(e);return Object.entries(a).map((([e,a])=>({...a,...t[e]})))}function Y(e){const t=D(e),a=Q(e);return(0,g.getAccountByAddress)(a,t)}function X(e){var t;return null===(t=Y(e))||void 0===t?void 0:t.balance}function z(e){const{pendingApprovals:t={}}=e.metamask;return Object.values(t)}function Z(e){return N(e)===l.CHAIN_IDS.MAINNET}function J(e){const t=N(e);return l.TEST_CHAINS.includes(t)}function ee({metamask:e}){return e.preferences}function te(e){const{showTestNetworks:t}=ee(e);return Boolean(t)}function ae(e){return e.metamask.subjectMetadata}a.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;const ne=(0,s.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function re(e,t){const a=ae(e)[t];if((null==a?void 0:a.subjectType)===n.SubjectType.Snap){const{svgIcon:e,...t}=a;return{...t,iconUrl:e?ne(e):null}}return a}function oe(e){const{rpcPrefs:t}=(0,S.getProviderConfig)(e);return t||{}}function se(e){const t=N(e);return m.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)}function ie(e){const t=N(e);return f.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)}a.getIsBridgeToken=e=>t=>{const a=N(t);return ie(t)&&f.ALLOWED_BRIDGE_TOKEN_ADDRESSES[a].includes(e.toLowerCase())};const le=(0,o.createSelectorCreator)(o.defaultMemoize,s.isEqual),ue=le(j,(e=>e));a.getMemoizedMetaMaskIdentities=ue;const ce=le(K,(e=>e));a.getMemoizedAddressBook=ce;const de=le(Ae,((e,t)=>t),((e,t)=>{const a=Object.values(e).find((e=>(0,y.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:""}));a.getMemoizedMetadataContractName=de;const pe=e=>e.metamask.unapprovedTxs;a.getUnapprovedTransactions=pe;const me=e=>e.metamask.currentNetworkTxList;a.getCurrentNetworkTransactionList=me;const fe=e=>e.confirmTransaction.txData;a.getTxData=fe;const ge=le(pe,((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{}));a.getUnapprovedTransaction=ge;const Te=le(me,((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{}));a.getTransaction=Te;const he=le(fe,((e,t,a)=>a===w.TransactionStatus.unapproved?ge(e,t):Te(e,t)),((e,t,a,n)=>n),((e,t,a)=>{let n={...e,...t};return t&&t.simulationFails&&(n.simulationFails={...t.simulationFails}),a&&(n={...n,txParams:{...n.txParams,data:a}}),n}));function Ee(e){return e.metamask.snaps}a.getFullTxData=he;const _e=le(Ee,((e,t)=>t),((e,t)=>e[t]));a.getSnap=_e;const Se=le(Ee,C.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var a;return null===(a=t[e])||void 0===a?void 0:a.permissions["endowment:transaction-insight"]}))));a.getInsightSnaps=Se;const ve=(0,o.createSelector)(Ee,(e=>Object.values(e).map((e=>({id:e.id,tabMessage:()=>e.manifest.proposedName,descriptionMessage:()=>e.manifest.description,sectionMessage:()=>e.manifest.description,route:`${I.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e.id)}`,icon:"fa fa-flask"})))));function ye(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function we(e){return ye(e).filter((e=>null===e.readDate))}a.getSnapsRouteObjects=ve;const be=(0,o.createSelector)(we,(e=>e.length));function ke(e){return Boolean(e.metamask.useTokenDetection)}function Ae(e){return De(e)?h.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList}function Ie(e){return e.metamask.networkConfigurations}function Ce(e){const t=Ie(e)||{};return[{chainId:l.CHAIN_IDS.GOERLI,nickname:l.GOERLI_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.GOERLI],providerType:l.NETWORK_TYPES.GOERLI,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.GOERLI],id:l.NETWORK_TYPES.GOERLI},{chainId:l.CHAIN_IDS.SEPOLIA,nickname:l.SEPOLIA_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.SEPOLIA],providerType:l.NETWORK_TYPES.SEPOLIA,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.SEPOLIA],id:l.NETWORK_TYPES.SEPOLIA},{chainId:l.CHAIN_IDS.LINEA_GOERLI,nickname:l.LINEA_GOERLI_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.LINEA_GOERLI],rpcPrefs:{imageUrl:l.LINEA_GOERLI_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.LINEA_GOERLI,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.LINEA_GOERLI],id:l.NETWORK_TYPES.LINEA_GOERLI},...Object.values(t).filter((({chainId:e})=>e===l.CHAIN_IDS.LOCALHOST))]}function Ne(e){const t=Ie(e)||{};return[{chainId:l.CHAIN_IDS.MAINNET,nickname:l.MAINNET_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.MAINNET],rpcPrefs:{imageUrl:l.ETH_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.MAINNET,ticker:l.CURRENCY_SYMBOLS.ETH,id:l.NETWORK_TYPES.MAINNET},{chainId:l.CHAIN_IDS.LINEA_MAINNET,nickname:l.LINEA_MAINNET_DISPLAY_NAME,rpcUrl:l.CHAIN_ID_TO_RPC_URL_MAP[l.CHAIN_IDS.LINEA_MAINNET],rpcPrefs:{imageUrl:l.LINEA_MAINNET_TOKEN_IMAGE_URL},providerType:l.NETWORK_TYPES.LINEA_MAINNET,ticker:l.TEST_NETWORK_TICKER_MAP[l.NETWORK_TYPES.LINEA_MAINNET],id:l.NETWORK_TYPES.LINEA_MAINNET},...Object.values(t).filter((({chainId:e})=>![l.CHAIN_IDS.LOCALHOST].includes(e)))]}function Oe(e){return[...Ne(e),...Ce(e)]}function Pe(e){return N(e)===l.CHAIN_IDS.OPTIMISM||N(e)===l.CHAIN_IDS.OPTIMISM_TESTNET}function Re(e){return N(e)===l.CHAIN_IDS.BASE||N(e)===l.CHAIN_IDS.BASE_TESTNET}function Me(e){return Pe(e)||Re(e)}a.getUnreadNotificationsCount=be;function xe(e){const t=N(e);return[l.CHAIN_IDS.MAINNET,l.CHAIN_IDS.BSC,l.CHAIN_IDS.POLYGON,l.CHAIN_IDS.AVALANCHE,l.CHAIN_IDS.AURORA].includes(t)}function De(e){const t=Z(e);return!ke(e)&&t}function Le(e){const t=N(e);return!l.CHAIN_ID_TO_RPC_URL_MAP[t]}function Fe(e){return Boolean(e.metamask.useCurrencyRateCheck)}a.getTokenDetectionSupportNetworkByChainId=e=>{switch(N(e)){case l.CHAIN_IDS.MAINNET:return l.MAINNET_DISPLAY_NAME;case l.CHAIN_IDS.BSC:return l.BSC_DISPLAY_NAME;case l.CHAIN_IDS.POLYGON:return l.POLYGON_DISPLAY_NAME;case l.CHAIN_IDS.AVALANCHE:return l.AVALANCHE_DISPLAY_NAME;case l.CHAIN_IDS.AURORA:return l.AURORA_DISPLAY_NAME;default:return""}}}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[5453,{"../../shared/constants/transaction":4336,"../../shared/modules/conversion.utils":4350,"../../shared/modules/transaction.utils":4365,"../ducks/metamask/metamask":5044,"../helpers/constants/transactions":5061,"../helpers/utils/tx-helper":5092,"./approvals":5445,"./selectors":5452,"@metamask/controller-utils":1095,reselect:4085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.currentNetworkTxListSelector=void 0,a.hasTransactionPendingApprovals=function(e){return R(e)||M.some((t=>(0,m.hasPendingApprovals)(e,t)))},a.unapprovedTypedMessagesSelector=a.unapprovedPersonalMsgsSelector=a.unapprovedMsgsSelector=a.unapprovedMessagesSelector=a.unapprovedEncryptionPublicKeyMsgsSelector=a.unapprovedDecryptMsgsSelector=a.transactionsSelector=a.transactionSubSelector=a.submittedPendingTransactionsSelector=a.smartTransactionsListSelector=a.selectedAddressTxListSelector=a.nonceSortedTransactionsSelector=a.nonceSortedPendingTransactionsSelector=a.nonceSortedCompletedTransactionsSelector=a.incomingTxListSelector=void 0;var n,r=e("reselect"),o=e("@metamask/controller-utils"),s=e("../helpers/constants/transactions"),i=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},l=e("../../shared/constants/transaction"),u=e("../../shared/modules/transaction.utils"),c=e("../../shared/modules/conversion.utils"),d=e("../ducks/metamask/metamask"),p=e("./selectors"),m=e("./approvals");const f=[l.TransactionType.cancel,l.TransactionType.retry],g=e=>{const{showIncomingTransactions:t}=e.metamask.featureFlags;if(!t)return[];const{networkId:a}=e.metamask,{chainId:n}=(0,d.getProviderConfig)(e),r=(0,p.getSelectedAddress)(e);return Object.values(e.metamask.incomingTransactions).filter((e=>e.txParams.to===r&&(0,u.transactionMatchesNetwork)(e,n,a)))};a.incomingTxListSelector=g;const T=e=>e.metamask.unapprovedMsgs;a.unapprovedMsgsSelector=T;const h=e=>e.metamask.currentNetworkTxList;a.currentNetworkTxListSelector=h;const E=e=>e.metamask.unapprovedPersonalMsgs;a.unapprovedPersonalMsgsSelector=E;const _=e=>e.metamask.unapprovedDecryptMsgs;a.unapprovedDecryptMsgsSelector=_;const S=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;a.unapprovedEncryptionPublicKeyMsgsSelector=S;const v=e=>e.metamask.unapprovedTypedMessages;a.unapprovedTypedMessagesSelector=v;const y=e=>{var t,a,n;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(a=t.smartTransactions)||void 0===a||null===(n=a[(0,p.getCurrentChainId)(e)])||void 0===n?void 0:n.filter((e=>!e.confirmed)).map((e=>{var t;return{...e,transactionType:l.TransactionType.smart,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}))};a.smartTransactionsListSelector=y;const w=(0,r.createSelector)(p.getSelectedAddress,h,y,((e,t=[],a=[])=>t.filter((({txParams:t})=>t.from===e)).concat(a)));a.selectedAddressTxListSelector=w;const b=(0,r.createSelector)(T,E,_,S,v,p.deprecatedGetCurrentNetworkId,p.getCurrentChainId,((e={},t={},a={},n={},r={},o,s)=>(0,i.default)({},e,t,a,n,r,o,s)||[]));a.unapprovedMessagesSelector=b;const k=(0,r.createSelector)(b,g,((e=[],t=[])=>e.concat(t)));a.transactionSubSelector=k;const A=(0,r.createSelector)(k,w,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time))));a.transactionsSelector=A;const I=(e,t)=>{const{primaryTransaction:{time:a}={}}=t;let n=e.length;for(let t=0;t<e.length;t++){const r=e[t],{primaryTransaction:{time:o}={}}=r;if(o>a){n=t;break}}e.splice(n,0,t)},C=(0,r.createSelector)(A,((e=[])=>{const t=[],a=[],n=[],r={};e.forEach((e=>{const{txParams:{nonce:o}={},status:i,type:u,time:d,txReceipt:p}=e;if(void 0===o||u===l.TransactionType.incoming){const n={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===l.TransactionType.incoming?a.push(n):I(t,n)}else if(o in r){var m,g,T;const t=r[o];((e,t)=>{const{time:a}=t;let n=e.length;for(let t=0;t<e.length;t++)if(e[t].time>a){n=t;break}e.splice(n,0,t)})(t.transactions,e);const{primaryTransaction:{time:a=0}={},initialTransaction:{time:n=0}={}}=t,c={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:i===l.TransactionStatus.failed&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:f.includes(u),occurredAfterPrimary:d>a,hasPriorityStatus:i in s.PRIORITY_STATUS_HASH,isConfirmed:i===l.TransactionStatus.confirmed,occurredBeforeInitial:d<n,isValidRetry:u===l.TransactionType.retry&&(i in s.PRIORITY_STATUS_HASH||i===l.TransactionStatus.dropped),isValidCancel:u===l.TransactionType.cancel&&(i in s.PRIORITY_STATUS_HASH||i===l.TransactionStatus.dropped)};c.eligibleForInitial=!c.isRetryOrCancel&&!c.isEphemeral,c.shouldBePrimary=c.isConfirmed||c.isOnChainFailure;const h={isEphemeral:t.primaryTransaction.status===l.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(g=m.txReceipt)||void 0===g?void 0:g.status)},E={isEphemeral:t.initialTransaction.status===l.TransactionStatus.failed&&"0x0"!==(null===(T=t.initialTransaction.txReceipt)||void 0===T?void 0:T.status)};(c.shouldBePrimary||h.isEphemeral||c.occurredAfterPrimary&&c.hasPriorityStatus)&&(t.primaryTransaction=e),(c.occurredBeforeInitial&&c.eligibleForInitial||E.isEphemeral&&c.eligibleForInitial)&&(t.initialTransaction=e),c.isValidRetry&&(t.hasRetried=!0),c.isValidCancel&&(t.hasCancelled=!0)}else r[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===l.TransactionType.retry&&(e.status in s.PRIORITY_STATUS_HASH||e.status===l.TransactionStatus.dropped),hasCancelled:e.type===l.TransactionType.cancel&&(e.status in s.PRIORITY_STATUS_HASH||e.status===l.TransactionStatus.dropped)},((e,t)=>{let a=e.length;for(let n=0;n<e.length;n++){const r=e[n];if(Number((0,c.hexToDecimal)(r))>Number((0,c.hexToDecimal)(t))){a=n;break}}e.splice(a,0,t)})(n,o)}));const o=n.map((e=>r[e]));return((e,t)=>{t.forEach((t=>{I(e,t)}))})(o,a),t.concat(o).map((e=>{var t;if(f.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!f.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))}));a.nonceSortedTransactionsSelector=C;const N=(0,r.createSelector)(C,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in s.PENDING_STATUS_HASH))));a.nonceSortedPendingTransactionsSelector=N;const O=(0,r.createSelector)(C,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in s.PENDING_STATUS_HASH))).reverse()));a.nonceSortedCompletedTransactionsSelector=O;const P=(0,r.createSelector)(A,((e=[])=>e.filter((e=>e.status===l.TransactionStatus.submitted))));a.submittedPendingTransactionsSelector=P;const R=e=>{const{unapprovedTxs:t}=e.metamask,a=(0,m.getApprovalRequestsByType)(e,o.ApprovalType.Transaction),n=(0,p.getCurrentChainId)(e);return a.filter((({id:e})=>t[e]&&(0,u.transactionMatchesNetwork)(t[e],n))).length>0},M=[o.ApprovalType.EthDecrypt,o.ApprovalType.EthGetEncryptionPublicKey,o.ApprovalType.EthSign,o.ApprovalType.EthSignTypedData,o.ApprovalType.PersonalSign]}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[5454,{"../../../shared/constants/metametrics":4323,"../../../shared/modules/mv3.utils":4356,"../actions":5456,pify:3758},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a._setBackgroundConnection=async function(e){l=e,u=(0,r.default)(l),s.isManifestV3&&(f&&console.warn("_setBackgroundConnection called while a queue was processing and not disconnected yet"),async function(){if(f)return;f=!0;try{if(c.length>0){const e={category:o.MetaMetricsEventCategory.ServiceWorkers,event:o.MetaMetricsEventName.ServiceWorkerRestarted,properties:{service_worker_action_queue_methods:c.map((e=>e.request.method))}};(0,i.trackMetaMetricsEvent)(e)}for(;null!==(e=l)&&void 0!==e&&e.connectionStream.readable&&c.length>0;){var e;const t=c.shift();await m({action:t,disconnectSideeffect:()=>c.unshift(t)})}}catch(e){console.error(e)}f=!1}())},a.callBackgroundMethod=void 0,a.dropQueue=function(e){e||c.forEach((({reject:e})=>e(Error("Background operation cancelled while waiting for connection."))));c.length=0},a.generateActionId=void 0,a.submitRequestToBackground=function(e,t,a=d()){var n;if(s.isManifestV3)return new Promise(((n,r)=>{p({actionId:a,request:{method:e,args:t??[]},resolve:n,reject:r})}));return null===(n=u)||void 0===n?void 0:n[e](...t??[])};var n,r=(n=e("pify"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/metametrics"),s=e("../../../shared/modules/mv3.utils"),i=e("../actions");let l=null,u=null;const c=[],d=()=>Date.now()+Math.random();a.generateActionId=d;const p=e=>{var t;c.some((t=>t.actionId===e.actionId))||(null!==(t=l)&&void 0!==t&&t.connectionStream.readable?m({action:e,disconnectSideeffect:()=>c.push(e)}):c.push(e))};async function m({action:e,disconnectSideeffect:t}){const{request:{method:a,args:n},resolve:r,reject:o}=e;try{var s;r(await(null===(s=u)||void 0===s?void 0:s[a](...n)))}catch(a){var i;null!==(i=l)&&void 0!==i&&i.DisconnectError&&a instanceof l.DisconnectError?t(e):o(a)}}a.callBackgroundMethod=(e,t,a,n=d())=>{if(s.isManifestV3){p({actionId:n,request:{method:e,args:t??[]},resolve:e=>a(undefined,e),reject:e=>a(e,undefined)})}else{var r;null===(r=l)||void 0===r||r[e](...t,a)}};let f=!1}}},{package:"$root$",file:"ui/store/action-queue/index.ts"}],[5455,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_TRANSACTION_PARAMS=a.UPDATE_METAMASK_STATE=a.UPDATE_CUSTOM_NONCE=a.UNLOCK_SUCCEEDED=a.UNLOCK_IN_PROGRESS=a.UNLOCK_FAILED=a.TRANSACTION_ERROR=a.TOGGLE_NETWORK_MENU=a.TOGGLE_GAS_LOADING_ANIMATION=a.TOGGLE_CURRENCY_INPUT_SWITCH=a.TOGGLE_ACCOUNT_MENU=a.SHOW_SEND_TOKEN_PAGE=a.SHOW_PRIVATE_KEY=a.SHOW_LOADING=a.SHOW_CONF_TX_PAGE=a.SHOW_ACCOUNTS_PAGE=a.SET_WEBHID_CONNECTED_STATUS=a.SET_SMART_TRANSACTIONS_ERROR=a.SET_SELECTED_NETWORK_CONFIGURATION_ID=a.SET_REQUEST_ACCOUNT_TABS=a.SET_REMOVE_NFT_MESSAGE=a.SET_PENDING_TOKENS=a.SET_PARTICIPATE_IN_METAMETRICS=a.SET_OPEN_METAMASK_TAB_IDS=a.SET_NEXT_NONCE=a.SET_NEW_TOKENS_IMPORTED=a.SET_NEW_NFT_ADDED_MESSAGE=a.SET_NEW_NETWORK_ADDED=a.SET_MOUSE_USER_STATE=a.SET_LEDGER_TRANSPORT_STATUS=a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=a.SET_FIRST_TIME_FLOW_TYPE=a.SET_CUSTOM_TOKEN_AMOUNT=a.SET_CURRENT_LOCALE=a.SET_ACCOUNT_LABEL=a.SET_ACCOUNT_DETAILS_ADDRESS=a.SELECTED_ADDRESS_CHANGED=a.SELECTED_ACCOUNT_CHANGED=a.QR_CODE_DETECTED=a.ONBOARDED_IN_THIS_UI_SESSION=a.NETWORK_DROPDOWN_OPEN=a.NETWORK_DROPDOWN_CLOSE=a.MODAL_OPEN=a.MODAL_CLOSE=a.LOCK_METAMASK=a.LOADING_METHOD_DATA_STARTED=a.LOADING_METHOD_DATA_FINISHED=a.IMPORT_NFTS_MODAL_OPEN=a.IMPORT_NFTS_MODAL_CLOSE=a.HIDE_WHATS_NEW_POPUP=a.HIDE_WARNING=a.HIDE_LOADING=a.GO_HOME=a.GAS_FEE_ESTIMATES_UPDATED=a.DISPLAY_WARNING=a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=a.COMPLETE_ONBOARDING=a.COMPLETED_TX=a.CLOSE_WELCOME_SCREEN=a.CLEAR_PENDING_TOKENS=a.CLEAR_ACCOUNT_DETAILS=a.CHAIN_CHANGED=a.CAPTURE_SINGLE_EXCEPTION=a.ALERT_OPEN=a.ALERT_CLOSE=a.ADDRESS_BOOK_UPDATED=a.ACCOUNT_CHANGED=void 0;a.GO_HOME="GO_HOME";a.MODAL_OPEN="UI_MODAL_OPEN";a.MODAL_CLOSE="UI_MODAL_CLOSE";a.ALERT_OPEN="UI_ALERT_OPEN";a.ALERT_CLOSE="UI_ALERT_CLOSE";a.QR_CODE_DETECTED="UI_QR_CODE_DETECTED";a.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN";a.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE";a.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN";a.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE";a.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE";a.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED";a.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED";a.ACCOUNT_CHANGED="ACCOUNT_CHANGED";a.CHAIN_CHANGED="CHAIN_CHANGED";a.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED";a.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED";a.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN";a.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS";a.UNLOCK_FAILED="UNLOCK_FAILED";a.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED";a.LOCK_METAMASK="LOCK_METAMASK";a.DISPLAY_WARNING="DISPLAY_WARNING";a.HIDE_WARNING="HIDE_WARNING";a.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION";a.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE";a.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE";a.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE";a.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY";a.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL";a.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS";a.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS";a.COMPLETED_TX="COMPLETED_TX";a.TRANSACTION_ERROR="TRANSACTION_ERROR";a.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS";a.SET_NEXT_NONCE="SET_NEXT_NONCE";a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH";a.SHOW_LOADING="SHOW_LOADING_INDICATION";a.HIDE_LOADING="HIDE_LOADING_INDICATION";a.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU";a.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU";a.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE";a.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS";a.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE";a.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING";a.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION";a.SET_MOUSE_USER_STATE="SET_MOUSE_USER_STATE";a.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS";a.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS";a.SET_PENDING_TOKENS="SET_PENDING_TOKENS";a.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS";a.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE";a.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID";a.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED";a.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE";a.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE";a.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED";a.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED";a.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS";a.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS";a.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP";a.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION";a.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR";a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE";a.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH";a.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED";a.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[5456,{"../../app/scripts/lib/util":82,"../../shared/constants/app":4316,"../../shared/constants/common":4318,"../../shared/constants/hardware-wallets":4320,"../../shared/constants/metametrics":4323,"../../shared/lib/switch-direction":4342,"../../shared/modules/conversion.utils":4350,"../../shared/modules/error":4351,"../../shared/modules/hexstring-utils":4354,"../../shared/modules/i18n":4355,"../../shared/modules/string-utils":4363,"../ducks/alerts/unconnected-account":5035,"../ducks/metamask/metamask":5044,"../ducks/send":5046,"../helpers/constants/notifications":5055,"../helpers/utils/transactions.util":5091,"../pages/swaps/swaps.util":5431,"../selectors":5449,"./action-queue":5454,"./actionConstants":5455,"@sentry/browser":1752,buffer:2335,"eth-rpc-errors":2738,lodash:3617,loglevel:3629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){(function(t){(function(){Object.defineProperty(a,"__esModule",{value:!0}),a.addImportedTokens=function(e){return async t=>{try{await(0,A.submitRequestToBackground)("addImportedTokens",[e])}catch(e){(0,b.logErrorWithMessage)(e)}finally{await ae(t)}}},a.addNewAccount=function(){return n.default.debug("background.addNewAccount"),async(e,t)=>{const a=t().metamask.identities;let n;e(X());try{const{identities:e}=await(0,A.submitRequestToBackground)("addNewAccount",[Object.keys(a).length]);n=e}catch(t){throw e(Z(t)),t}finally{e(z())}const r=Object.keys(n).find((e=>!a[e]));return await ae(e),r}},a.addNft=function(e,t,a){return async n=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");a||n(X());try{await(0,A.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,b.logErrorWithMessage)(e),n(Z(e))}finally{await ae(n),n(z())}}},a.addNftVerifyOwnership=function(e,t,a){return async n=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");a||n(X());try{await(0,A.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,b.isErrorWithMessage)(e)&&(e.message.includes("This NFT is not owned by the user")||e.message.includes("Unable to verify ownership")))throw e;(0,b.logErrorWithMessage)(e),n(Z(e))}finally{await ae(n),n(z())}}},a.addPermittedAccount=function(e,t){return async a=>{await new Promise(((a,n)=>{(0,A.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?n(e):a()}))})),await ae(a)}},a.addPollingTokenToAppState=async function(e){return(0,A.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,c.getEnvironmentType)()]])},a.addToAddressBook=function(e,t="",a=""){return n.default.debug("background.addToAddressBook"),async(n,r)=>{const{chainId:o}=(0,f.getProviderConfig)(r());let s;try{s=await(0,A.submitRequestToBackground)("setAddressBook",[(0,g.toChecksumHexAddress)(e),t,o,a])}catch(e){throw(0,b.logErrorWithMessage)(e),n(Z("Address book failed to update")),e}s||n(Z("Address book failed to update"))}},a.addToken=$,a.addTokens=function(e){return t=>Array.isArray(e)?Promise.all(e.map((({address:e,symbol:a,decimals:n})=>t($(e,a,n))))):Promise.all(Object.entries(e).map((([e,{address:a,symbol:n,decimals:r}])=>t($(a,n,r)))))},a.addUnapprovedTransaction=async function(e,t,a,r){n.default.debug("background.addUnapprovedTransaction");const o=(0,A.generateActionId)();return await(0,A.submitRequestToBackground)("addUnapprovedTransaction",[e,t,u.ORIGIN_METAMASK,a,undefined,o,r],o)},a.addUnapprovedTransactionAndRouteToConfirmationPage=function(e,t,a,r){return async o=>{const s=(0,A.generateActionId)();try{n.default.debug("background.addUnapprovedTransaction");const i=await(0,A.submitRequestToBackground)("addUnapprovedTransaction",[e,t,u.ORIGIN_METAMASK,a,r,s],s);return o(K()),i}catch(e){o(z()),o(Z(e))}return null}},a.approvePermissionsRequest=function(e){return t=>{(0,A.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(Z(e)),ae(t)}))}},a.attemptLedgerTransportCreation=async function(){return await(0,A.submitRequestToBackground)("attemptLedgerTransportCreation")},a.backupUserData=async function(){let e;try{e=await(0,A.submitRequestToBackground)("backupUserData")}catch(e){throw(0,b.logErrorWithMessage)(e),e}return e},a.cancelDecryptMsg=function(e){return async t=>{let a;t(X());try{a=await(0,A.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(z())}return t(U(a)),t(L(e.id)),t(Y()),e}},a.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let a;t(X());try{a=await(0,A.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(z())}return t(U(a)),t(L(e.id)),t(Y()),e}},a.cancelQRHardwareSignRequest=function(){return async e=>{e(z()),await(0,A.submitRequestToBackground)("cancelQRHardwareSignRequest")}},a.cancelSmartTransaction=function(e){return async t=>{try{await(0,A.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,b.logErrorWithMessage)(e),(0,b.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const a=(0,E.parseSmartTransactionsError)(e.message);t({type:k.SET_SMART_TRANSACTIONS_ERROR,payload:a})}throw e}}},a.cancelSyncQRHardware=function(){return async e=>{e(z()),await(0,A.submitRequestToBackground)("cancelSyncQRHardware")}},a.cancelTx=function(e,t=!0){return a=>(t&&a(X()),new Promise(((t,a)=>{(0,A.callBackgroundMethod)("rejectPendingApproval",[String(e.id),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?a(e):t()}))})).then((()=>D())).then((e=>a(U(e)))).then((()=>(a((0,p.resetSendState)()),a(L(e.id)),a(z()),a(Y()),e))).catch((e=>{throw a(z()),e})))},a.cancelTxs=function(e){return async t=>{t(X());try{const a=e.map((({id:e})=>e)),n=a.map((e=>new Promise(((t,a)=>{(0,A.callBackgroundMethod)("rejectPendingApproval",[String(e),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?a(e):t()}))}))));await Promise.all(n);const r=await D();t(U(r)),t((0,p.resetSendState)()),a.forEach((e=>{t(L(e))}))}finally{(0,c.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?le():t(z())}}},a.captureSingleException=function(e){return async(t,a)=>{const{singleExceptions:n}=a().appState;e in n||(t({type:k.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,r.captureException)(Error(e)))}},a.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,A.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},a.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,A.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},a.checkHardwareStatus=function(e,t){return n.default.debug("background.checkHardwareStatus",e,t),async a=>{a(X());let n=!1;try{n=await(0,A.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,b.logErrorWithMessage)(e),a(Z(e)),e}finally{a(z())}return await ae(a),n}},a.clearAccountDetails=function(){return{type:k.CLEAR_ACCOUNT_DETAILS}},a.clearPendingTokens=function(){return{type:k.CLEAR_PENDING_TOKENS}},a.clearSmartTransactionFees=function(){(0,A.submitRequestToBackground)("clearSmartTransactionFees")},a.clearSwapsQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("clearSwapsQuotes"),await ae(e)}},a.closeCurrentNotificationWindow=Y,a.closeNotificationPopup=le,a.closeWelcomeScreen=function(){return{type:k.CLOSE_WELCOME_SCREEN}},a.completeOnboarding=te,a.completedTx=L,a.connectHardware=function(e,t,a,r){return n.default.debug("background.connectHardware",e,t,a),async(n,s)=>{const{ledgerTransportType:i}=s().metamask;let l;n(X(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===T.HardwareDeviceNames.ledger&&await(0,A.submitRequestToBackground)("establishLedgerTransportPreference"),e===T.HardwareDeviceNames.ledger&&i===T.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:T.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(T.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}l=await(0,A.submitRequestToBackground)("connectHardware",[e,t,a])}catch(t){throw(0,b.logErrorWithMessage)(t),e===T.HardwareDeviceNames.ledger&&i===T.LedgerTransportTypes.webhid&&(0,b.isErrorWithMessage)(t)&&t.message.match("Failed to open the device")?(n(Z(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(e!==T.HardwareDeviceNames.qr&&n(Z(t)),t)}finally{n(z())}return await ae(n),l}},a.createCancelTransaction=function(e,t,a={}){let r;return n.default.debug("background.cancelTransaction"),n=>{const o=(0,A.generateActionId)();return new Promise(((s,i)=>{(0,A.callBackgroundMethod)("createCancelTransaction",[e,t,{...a,actionId:o}],((e,t)=>{if(e)return n(Z(e)),void i(e);if(t){const{currentNetworkTxList:e}=t,{id:a}=e[e.length-1];r=a,s(t)}}),o)})).then((e=>n(U(e)))).then((()=>r))}},a.createEventFragment=function(e){const t=(0,A.generateActionId)();return(0,A.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},a.createNewVault=P,a.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(X());try{await P(e);return await M()}catch(e){throw t(Z(e)),(0,b.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(z())}}},a.createNewVaultAndRestore=function(e,a){return r=>{r(X()),n.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(a,"utf8").values());let s;return new Promise(((t,a)=>{(0,A.callBackgroundMethod)("createNewVaultAndRestore",[e,o],((e,n)=>{e?a(e):(s=n,t())}))})).then((()=>r(B()))).then((()=>(r(V()),r(z()),s))).catch((e=>(r(Z(e.message)),r(z()),Promise.reject(e))))}},a.createRetryTransaction=function(e,t){let a;return n=>new Promise(((r,o)=>{const s=(0,A.generateActionId)();(0,A.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return n(Z(e)),void o(e);if(t){const{currentNetworkTxList:e}=t;a=e[e.length-1],r(t)}}))})).then((e=>n(U(e)))).then((()=>a))},a.createSpeedUpTransaction=function(e,t,a={}){let r;return n.default.debug("background.createSpeedUpTransaction"),n=>{const o=(0,A.generateActionId)();return new Promise(((s,i)=>{(0,A.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...a,actionId:o}],((e,t)=>{if(e)return n(Z(e)),void i(e);if(t){const{currentNetworkTxList:e}=t;r=e[e.length-1],s(t)}}),o)})).then((e=>n(U(e)))).then((()=>r))}},a.createTransactionEventFragment=function(e,t){const a=(0,A.generateActionId)();return(0,A.submitRequestToBackground)("createTransactionEventFragment",[e,t,a])},a.decryptMsg=function(e){return n.default.debug("action - decryptMsg"),async t=>{let a;t(X()),n.default.debug("actions calling background.decryptMessage");try{a=await(0,A.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,b.logErrorWithMessage)(e),t(Z(e)),e}finally{t(z())}return t(U(a)),t(L(e.metamaskId)),t(Y()),e}},a.decryptMsgInline=function(e){return n.default.debug("action - decryptMsgInline"),async t=>{let a;n.default.debug("actions calling background.decryptMessageInline");try{a=await(0,A.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,b.logErrorWithMessage)(e),t(Z(e)),e}return t(U(a)),a.unapprovedDecryptMsgs[e.metamaskId]}},a.deleteExpiredNotifications=function(){return async(e,t)=>{const a=t(),n=(0,d.getNotifications)(a).filter((e=>{const t=new Date(Date.now()-S.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));n.length&&(await(0,A.submitRequestToBackground)("dismissNotifications",[n]),await ae(e))}},a.detectNewTokens=function(){return async e=>{e(X()),n.default.debug("background.detectNewTokens"),await(0,A.submitRequestToBackground)("detectNewTokens"),e(z()),await ae(e)}},a.detectNfts=function(){return async e=>{e(X()),n.default.debug("background.detectNfts"),await(0,A.submitRequestToBackground)("detectNfts"),e(z()),await ae(e)}},a.disableSnap=function(e){return async t=>{await(0,A.submitRequestToBackground)("disableSnap",[e]),await ae(t)}},a.disconnectGasFeeEstimatePoller=function(e){return(0,A.submitRequestToBackground)("disconnectGasFeeEstimatePoller",[e])},a.dismissNotifications=function(e){return async t=>{await(0,A.submitRequestToBackground)("dismissNotifications",[e]),await ae(t)}},a.dismissSmartTransactionsErrorMessage=function(){return{type:k.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},a.displayWarning=Z,a.editAndSetNetworkConfiguration=function({networkConfigurationId:e,rpcUrl:t,chainId:a,nickname:r,rpcPrefs:o,ticker:s=w.EtherDenomination.ETH},{source:i}){return async l=>{n.default.debug(`background.removeNetworkConfiguration: ${e}`);try{await(0,A.submitRequestToBackground)("removeNetworkConfiguration",[e])}catch(e){return(0,b.logErrorWithMessage)(e),void l(Z("Had a problem removing network!"))}try{await(0,A.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:t,chainId:a,ticker:s,nickname:r||t,rpcPrefs:o},{setActive:!0,referrer:u.ORIGIN_METAMASK,source:i}])}catch(e){(0,b.logErrorWithMessage)(e),l(Z("Had a problem changing networks!"))}}},a.enableSnap=function(e){return async t=>{await(0,A.submitRequestToBackground)("enableSnap",[e]),await ae(t)}},a.encryptionPublicKeyMsg=function(e){return n.default.debug("action - encryptionPublicKeyMsg"),async t=>{let a;t(X()),n.default.debug("actions calling background.encryptionPublicKey");try{a=await(0,A.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,b.logErrorWithMessage)(e),t(Z(e)),e}finally{t(z())}return t(U(a)),t(L(e.metamaskId)),t(Y()),e}},a.estimateGas=function(e){return(0,A.submitRequestToBackground)("estimateGas",[e])},a.exportAccount=function(e,t){return function(a){return a(X()),n.default.debug("background.verifyPassword"),new Promise(((r,o)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return n.default.error("Error in verifying password."),a(z()),a(Z("Incorrect Password.")),void o(s);n.default.debug("background.exportAccount"),(0,A.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(a(z()),e)return(0,b.logErrorWithMessage)(e),a(Z("Had a problem exporting the account.")),void o(e);a(J(t)),r(t)}))}))}))}},a.exportAccounts=function(e,t){return function(a){return n.default.debug("background.verifyPassword"),new Promise(((r,o)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return n.default.error("Error in submitting password."),void o(s);n.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((n,r)=>(0,A.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,b.logErrorWithMessage)(e),a(Z("Had a problem exporting the account.")),void r(e);n(t)}))))));r(Promise.all(i))}))}))}},a.fetchAndSetQuotes=function(e,t){return async a=>{const[n,r]=await(0,A.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ae(a),[n,r]}},a.fetchSmartTransactionFees=function(e,t){return async a=>{t&&(t.value="0x0");try{const n=await await(0,A.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return a({type:k.SET_SMART_TRANSACTIONS_ERROR,payload:null}),n}catch(e){if((0,b.logErrorWithMessage)(e),(0,b.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);a({type:k.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},a.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,A.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,b.logErrorWithMessage)(e)}}},a.finalizeEventFragment=function(e,t){return(0,A.submitRequestToBackground)("finalizeEventFragment",[e,t])},a.forceUpdateMetamaskState=ae,a.forgetDevice=function(e){return n.default.debug("background.forgetDevice",e),async t=>{t(X());try{await(0,A.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,b.logErrorWithMessage)(e),t(Z(e)),e}finally{t(z())}await ae(t)}},a.getBalancesInSingleCall=async function(e){return await(0,A.submitRequestToBackground)("getBalancesInSingleCall",[e])},a.getContractMethodData=function(e=""){return async(t,a)=>{const r=(0,c.addHexPrefix)(e).slice(0,10);if(r.length<10)return{};const{knownMethodData:o}=a().metamask;if(null!=o&&o[r]&&0!==Object.keys(o[r]).length)return o[r];n.default.debug("loadingMethodData");const{name:s,params:l}=await(0,i.getMethodDataAsync)(r);return(0,A.callBackgroundMethod)("addKnownMethodData",[r,{name:s,params:l}],(e=>{e&&t(Z(e))})),{name:s,params:l}}},a.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,A.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},a.getGasFeeEstimatesAndStartPolling=function(){return(0,A.submitRequestToBackground)("getGasFeeEstimatesAndStartPolling")},a.getGasFeeTimeEstimate=function(e,t){return(0,A.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},a.getNextNonce=function(){return async(e,t)=>{const a=t().metamask.selectedAddress;let n;try{n=await(0,A.submitRequestToBackground)("getNextNonce",[a])}catch(t){throw e(Z(t)),t}return e(oe(n)),n}},a.getOpenMetamaskTabsIds=function(){return async e=>{e(ie(await(0,A.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},a.getRequestAccountTabIds=function(){return async e=>{e(se(await(0,A.submitRequestToBackground)("getRequestAccountTabIds")))}},a.getRpcMethodPreferences=function(){return async e=>{e(X()),await(0,A.submitRequestToBackground)("getRpcMethodPreferences",[]),e(z())}},a.getTokenStandardAndDetails=async function(e,t,a){return await(0,A.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,a])},a.getTransactions=async function(e={}){return await(0,A.submitRequestToBackground)("getTransactions",[e])},a.goHome=N,a.handleSnapRequest=async function(e){return(0,A.submitRequestToBackground)("handleSnapRequest",[e])},a.hideAlert=function(){return{type:k.ALERT_CLOSE}},a.hideBetaHeader=function(){return(0,A.submitRequestToBackground)("setShowBetaHeader",[!1])},a.hideImportNftsModal=function(){return{type:k.IMPORT_NFTS_MODAL_CLOSE}},a.hideLoadingIndication=z,a.hideModal=function(){return{type:k.MODAL_CLOSE}},a.hideNetworkDropdown=function(){return{type:k.NETWORK_DROPDOWN_CLOSE}},a.hideProductTour=function(){return(0,A.submitRequestToBackground)("setShowProductTour",[!1])},a.hideTestNetMessage=function(){return(0,A.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},a.hideWarning=function(){return{type:k.HIDE_WARNING}},a.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const a=Array.isArray(e)?e:[e];return async e=>{t||e(X());try{await(0,A.submitRequestToBackground)("ignoreTokens",[a])}catch(t){(0,b.logErrorWithMessage)(t),e(Z(t))}finally{await ae(e),e(z())}}},a.importNewAccount=function(e,t,a){return async r=>{let o;r(X(a));try{n.default.debug("background.importAccountWithStrategy"),await(0,A.submitRequestToBackground)("importAccountWithStrategy",[e,t]),n.default.debug("background.getState"),o=await(0,A.submitRequestToBackground)("getState")}finally{r(z())}return r(U(o)),o}},a.isNftOwner=async function(e,t,a){return await(0,A.submitRequestToBackground)("isNftOwner",[e,t,a])},a.lockMetamask=function(){return n.default.debug("background.setLocked"),e=>(e(X()),G().then((()=>D())).catch((t=>(e(Z(t.message)),Promise.reject(t)))).then((t=>{e(U(t)),e(z()),e({type:k.LOCK_METAMASK})})).catch((()=>{e(z()),e({type:k.LOCK_METAMASK})})))},a.markNotificationsAsRead=function(e){return async t=>{await(0,A.submitRequestToBackground)("markNotificationsAsRead",[e]),await ae(t)}},a.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,A.callBackgroundMethod)("markPasswordForgotten",[],(a=>{a?t(a):e()}))}))}finally{e(z()),await ae(e)}}},a.qrCodeDetected=function(e){return async t=>{await t({type:k.QR_CODE_DETECTED,value:e}),t((0,p.computeEstimatedGasLimit)())}},a.rejectAllMessages=function(e){return async t=>{const a=(0,s.serializeError)(s.ethErrors.provider.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,A.submitRequestToBackground)("rejectPendingApproval",[e,a]))));const{pendingApprovals:n}=await ae(t);0===Object.values(n).length&&t(Y())}},a.rejectPendingApproval=function(e,t){return async a=>{await(0,A.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:n}=await ae(a);0===Object.values(n).length&&a(Y())}},a.rejectPermissionsRequest=function(e){return t=>new Promise(((a,n)=>{(0,A.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(Z(e)),void n(e);ae(t).then(a).catch(n)}))}))},a.removeAccount=function(e){return async t=>{t(X());try{await new Promise(((t,a)=>{(0,A.callBackgroundMethod)("removeAccount",[e],((e,n)=>{e?a(e):t(n)}))})),await ae(t)}catch(e){throw t(Z(e)),e}finally{t(z())}n.default.info(`Account removed: ${e}`),t(V())}},a.removeAndIgnoreNft=function(e,t,a){return async n=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");a||n(X());try{await(0,A.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){(0,b.logErrorWithMessage)(e),n(Z(e))}finally{await ae(n),n(z())}}},a.removeFromAddressBook=function(e,t){return n.default.debug("background.removeFromAddressBook"),async()=>{await(0,A.submitRequestToBackground)("removeFromAddressBook",[e,(0,g.toChecksumHexAddress)(t)])}},a.removeNetworkConfiguration=function(e){return t=>(n.default.debug(`background.removeNetworkConfiguration: ${e}`),new Promise(((a,n)=>{(0,A.callBackgroundMethod)("removeNetworkConfiguration",[e],(e=>{if(e)return(0,b.logErrorWithMessage)(e),t(Z("Had a problem removing network!")),void n(e);a()}))})))},a.removeNft=function(e,t,a){return async n=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");a||n(X());try{await(0,A.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,b.logErrorWithMessage)(e),n(Z(e))}finally{await ae(n),n(z())}}},a.removePermissionsFor=function(e){return t=>{(0,A.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(Z(e))}))}},a.removePermittedAccount=function(e,t){return async a=>{await new Promise(((a,n)=>{(0,A.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?n(e):a()}))})),await ae(a)}},a.removePollingTokenFromAppState=async function(e){return(0,A.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,c.getEnvironmentType)()]])},a.removeSnap=function(e){return async t=>{t(X());try{await(0,A.submitRequestToBackground)("removeSnap",[e]),await ae(t)}catch(e){throw t(Z(e)),e}finally{t(z())}}},a.removeSnapError=async function(e){return(0,A.submitRequestToBackground)("removeSnapError",[e])},a.requestAccountsPermissionWithId=function(e){return async t=>{const a=await(0,A.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await ae(t),a}},a.requestRevealSeedWords=function(e){return async t=>{t(X()),n.default.debug("background.verifyPassword");try{await R(e);return await M()}finally{t(z())}}},a.requestUserApproval=function({origin:e,type:t,requestData:a}){return async n=>{try{await(0,A.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:a}])}catch(e){(0,b.logErrorWithMessage)(e),n(Z("Had trouble requesting user approval"))}}},a.resetAccount=function(){return e=>(e(X()),new Promise(((t,a)=>{(0,A.callBackgroundMethod)("resetAccount",[],((r,o)=>{if(e(z()),r)return(0,b.isErrorWithMessage)(r)&&e(Z(r.message)),void a(r);n.default.info(`Transaction history reset for ${o}`),e(V()),t(o)}))})))},a.resetBackgroundSwapsState=function(){return async e=>{await(0,A.submitRequestToBackground)("resetSwapsState"),await ae(e)}},a.resetSwapsPostFetchState=function(){return async e=>{await(0,A.submitRequestToBackground)("resetPostFetchState"),await ae(e)}},a.resolvePendingApproval=function(e,t){return async a=>{await(0,A.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:n}=await ae(a);0===Object.values(n).length&&a(Y())}},a.restoreUserData=async function(e){try{await(0,A.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,b.logErrorWithMessage)(e),e}return!0},a.revokeDynamicSnapPermissions=function(e,t){return async a=>{await(0,A.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await ae(a)}},a.rollbackToPreviousProvider=function(){return async e=>{try{await(0,A.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,b.logErrorWithMessage)(t),e(Z("Had a problem changing networks!"))}}},a.safeRefetchQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("safeRefetchQuotes"),await ae(e)}},a.setAccountDetailsAddress=function(e){return{type:k.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},a.setAccountLabel=function(e,t){return a=>(a(X()),n.default.debug("background.setAccountLabel"),new Promise(((n,r)=>{(0,A.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(a(z()),o)return a(Z(o)),void r(o);a({type:k.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),n(e)}))})))},a.setActiveNetwork=function(e){return async t=>{n.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,A.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,b.logErrorWithMessage)(e),t(Z("Had a problem changing networks!"))}}},a.setAdvancedGasFee=function(e){return t=>{t(X()),n.default.debug("background.setAdvancedGasFee"),(0,A.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setAlertEnabledness=async function(e,t){await(0,A.submitRequestToBackground)("setAlertEnabledness",[e,t])},a.setAutoLockTimeLimit=function(e){return ee("autoLockTimeLimit",e)},a.setBackgroundSwapRouteState=function(e){return async t=>{await(0,A.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ae(t)}},a.setCompletedOnboarding=function(){return async e=>{e(X());try{await(0,A.submitRequestToBackground)("completeOnboarding"),e(te())}catch(t){throw e(Z(t)),t}finally{e(z())}}},a.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,A.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,b.isErrorWithMessage)(e))throw new Error(e.message)}))}},a.setCurrentCurrency=function(e){return async t=>{t(X()),n.default.debug("background.setCurrentCurrency");try{await(0,A.submitRequestToBackground)("setCurrentCurrency",[e]),await ae(t)}catch(e){return(0,b.logErrorWithMessage)(e),void t(Z(e))}finally{t(z())}}},a.setCurrentLocale=re,a.setCustomApproveTxData=function(e){return async t=>{await(0,A.submitRequestToBackground)("setCustomApproveTxData",[e]),await ae(t)}},a.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,A.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ae(t)}},a.setDisabledRpcMethodPreference=function(e,t){return async a=>{a(X()),await(0,A.submitRequestToBackground)("setDisabledRpcMethodPreference",[e,t]),a(z())}},a.setDismissSeedBackUpReminder=function(e){return async t=>{t(X()),await(0,A.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(z())}},a.setFeatureFlag=function(e,t,a){return n=>(n(X()),new Promise(((r,o)=>{(0,A.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(n(z()),e)return n(Z(e)),void o(e);a&&n(Q({name:a})),r(t)}))})))},a.setFirstTimeFlowType=function(e){return t=>{n.default.debug("background.setFirstTimeFlowType"),(0,A.callBackgroundMethod)("setFirstTimeFlowType",[e],(e=>{e&&t(Z(e))})),t({type:k.SET_FIRST_TIME_FLOW_TYPE,value:e})}},a.setFirstTimeUsedNetwork=function(e){return(0,A.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},a.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:k.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},a.setHideZeroBalanceTokens=function(e){return ee("hideZeroBalanceTokens",e)},a.setInitialGasEstimate=function(e){return async t=>{await(0,A.submitRequestToBackground)("setInitialGasEstimate",[e]),await ae(t)}},a.setIpfsGateway=function(e){return t=>{n.default.debug("background.setIpfsGateway"),(0,A.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(Z(e))}))}},a.setLastActiveTime=function(){return e=>{(0,A.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(Z(t))}))}},a.setLedgerTransportPreference=function(e){return async t=>{t(X()),await(0,A.submitRequestToBackground)("setLedgerTransportPreference",[e]),t(z())}},a.setMouseUserState=function(e){return{type:k.SET_MOUSE_USER_STATE,payload:e}},a.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:k.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},a.setNewNftAddedMessage=function(e){return{type:k.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},a.setNewTokensImported=function(e){return{type:k.SET_NEW_TOKENS_IMPORTED,payload:e}},a.setNextNonce=oe,a.setOpenMetamaskTabsIDs=ie,a.setOpenSeaEnabled=function(e){return t=>{t(X()),n.default.debug("background.setOpenSeaEnabled"),(0,A.callBackgroundMethod)("setOpenSeaEnabled",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,A.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},a.setParticipateInMetaMetrics=function(e){return t=>(n.default.debug("background.setParticipateInMetaMetrics"),new Promise(((a,r)=>{(0,A.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(n.default.debug(o),o)return t(Z(o)),void r(o);t({type:k.SET_PARTICIPATE_IN_METAMETRICS,value:e}),a([e,s])}))})))},a.setPendingTokens=function(e){const{customToken:t,selectedTokens:a={},tokenAddressList:n=[]}=e,r=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...a,[t.address]:{...t,isCustom:!0}}:a;return Object.keys(r).forEach((e=>{r[e].unlisted=!n.find((t=>(0,_.isEqualCaseInsensitive)(t,e)))})),{type:k.SET_PENDING_TOKENS,payload:r}},a.setPreference=ee,a.setProviderType=function(e){return async t=>{n.default.debug("background.setProviderType",e);try{await(0,A.submitRequestToBackground)("setProviderType",[e])}catch(e){(0,b.logErrorWithMessage)(e),t(Z("Had a problem changing networks!"))}}},a.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,A.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,b.isErrorWithMessage)(e))throw new Error(e.message)}))}},a.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,A.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,b.isErrorWithMessage)(e))throw new Error(e.message)}))}},a.setRemoveNftMessage=function(e){return{type:k.SET_REMOVE_NFT_MESSAGE,payload:e}},a.setRequestAccountTabIds=se,a.setSeedPhraseBackedUp=function(e){return t=>(n.default.debug("background.setSeedPhraseBackedUp"),new Promise(((a,n)=>{(0,A.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(Z(e)),void n(e);ae(t).then(a).catch(n)}))})))},a.setSelectedAccount=function(e){return async(t,a)=>{t(X()),n.default.debug("background.setSelectedAddress");const r=a(),o=(0,f.getUnconnectedAccountAlertEnabledness)(r),s=r.activeTab.origin,i=(0,d.getSelectedAddress)(r),l=(0,d.getPermittedAccountsForCurrentTab)(r),u=Boolean(s)&&l.includes(i),c=Boolean(s)&&l.includes(e),p=u&&!c;try{await H(e),await ae(t)}catch(e){return void t(Z(e))}finally{t(z())}o&&p&&(t((0,m.switchedToUnconnectedAccount)()),await ce(s))}},a.setSelectedAddress=function(e){return async t=>{t(X()),n.default.debug("background.setSelectedAddress");try{await H(e)}catch(e){return void t(Z(e))}finally{t(z())}}},a.setSelectedNetworkConfigurationId=function(e){return{type:k.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},a.setSelectedQuoteAggId=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ae(t)}},a.setShowFiatConversionOnTestnetsPreference=function(e){return ee("showFiatInTestnets",e)},a.setShowTestNetworks=function(e){return ee("showTestNetworks",e)},a.setSmartTransactionsOptInStatus=async function(e,t){ue({actionId:(0,A.generateActionId)(),event:"STX OptIn",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:e,stx_prev_user_opt_in:t}}),await(0,A.submitRequestToBackground)("setSmartTransactionsOptInStatus",[e])},a.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,A.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,b.logErrorWithMessage)(e)}}},a.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,A.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},a.setSwapsErrorKey=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsErrorKey",[e]),await ae(t)}},a.setSwapsFeatureFlags=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ae(t)}},a.setSwapsLiveness=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsLiveness",[e]),await ae(t)}},a.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ae(t)}},a.setSwapsTokens=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTokens",[e]),await ae(t)}},a.setSwapsTxGasLimit=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ae(t)}},a.setSwapsTxGasPrice=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ae(t)}},a.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,A.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},a.setTheme=function(e){return async t=>{t(X()),n.default.debug("background.setTheme");try{await(0,A.submitRequestToBackground)("setTheme",[e])}finally{t(z())}}},a.setTransactionSecurityCheckEnabled=function(e){return async()=>{try{await(0,A.submitRequestToBackground)("setTransactionSecurityCheckEnabled",[e])}catch(e){(0,b.logErrorWithMessage)(e)}}},a.setUnconnectedAccountAlertShown=ce,a.setUseBlockie=function(e){return t=>{t(X()),n.default.debug("background.setUseBlockie"),(0,A.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setUseCurrencyRateCheck=function(e){return t=>{t(X()),n.default.debug("background.setUseCurrencyRateCheck"),(0,A.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setUseMultiAccountBalanceChecker=function(e){return t=>{t(X()),n.default.debug("background.setUseMultiAccountBalanceChecker"),(0,A.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return ee("useNativeCurrencyAsPrimaryCurrency",e)},a.setUseNftDetection=function(e){return t=>{t(X()),n.default.debug("background.setUseNftDetection"),(0,A.callBackgroundMethod)("setUseNftDetection",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setUseNonceField=function(e){return async t=>{t(X()),n.default.debug("background.setUseNonceField");try{await(0,A.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(Z(e))}t(z())}},a.setUsePhishDetect=function(e){return t=>{t(X()),n.default.debug("background.setUsePhishDetect"),(0,A.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setUseTokenDetection=function(e){return t=>{t(X()),n.default.debug("background.setUseTokenDetection"),(0,A.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(z()),e&&t(Z(e))}))}},a.setWeb3ShimUsageAlertDismissed=async function(e){await(0,A.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},a.showAccountsPage=V,a.showAlert=function(e){return{type:k.ALERT_OPEN,payload:e}},a.showConfTxPage=K,a.showImportNftsModal=function(){return{type:k.IMPORT_NFTS_MODAL_OPEN}},a.showLoadingIndication=X,a.showModal=Q,a.showNetworkDropdown=function(){return{type:k.NETWORK_DROPDOWN_OPEN}},a.showPrivateKey=J,a.showQrScanner=function(){return e=>{e(Q({name:"QR_SCANNER"}))}},a.showSendTokenPage=function(){return{type:k.SHOW_SEND_TOKEN_PAGE}},a.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async a=>{const n=await de(e,t.fees),r=await de(e,t.cancelFees,!0);try{return(await(0,A.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:n,signedCanceledTransactions:r,txParams:e}])).uuid}catch(e){if((0,b.logErrorWithMessage)(e),(0,b.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);a({type:k.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},a.stopPollingForQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("stopPollingForQuotes"),await ae(e)}},a.submitPassword=O,a.submitQRHardwareCryptoAccount=async function(e){await(0,A.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},a.submitQRHardwareCryptoHDKey=async function(e){await(0,A.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},a.submitQRHardwareSignature=async function(e,t){await(0,A.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},a.throwTestBackgroundError=async function(e){await(0,A.submitRequestToBackground)("throwTestError",[e])},a.toggleAccountMenu=function(){return{type:k.TOGGLE_ACCOUNT_MENU}},a.toggleNetworkMenu=function(){return{type:k.TOGGLE_NETWORK_MENU}},a.trackMetaMetricsEvent=ue,a.trackMetaMetricsPage=function(e,t){return(0,A.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,A.generateActionId)()},t])},a.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,A.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,b.logErrorWithMessage)(e),t()}))}))},a.tryUnlockMetamask=function(e){return t=>(t(X()),t(j()),n.default.debug("background.submitPassword"),new Promise(((t,a)=>{(0,A.callBackgroundMethod)("submitPassword",[e],(e=>{e?a(e):t()}))})).then((()=>(t(W()),ae(t)))).then((()=>{t(z())})).catch((e=>(t(q(e.message)),t(z()),Promise.reject(e)))))},a.unMarkPasswordForgotten=B,a.unlockAndGetSeedPhrase=function(e){return async t=>{t(X());try{await O(e);const a=await M();return await ae(t),a}catch(e){throw t(Z(e)),(0,b.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(z())}}},a.unlockFailed=q,a.unlockHardwareWalletAccounts=function(e,t,a,r){return n.default.debug("background.unlockHardwareWalletAccount",e,t,a,r),async n=>{n(X());for(const o of e)try{await(0,A.submitRequestToBackground)("unlockHardwareWalletAccount",[o,t,a,r])}catch(e){throw(0,b.logErrorWithMessage)(e),n(Z(e)),n(z()),e}return n(z()),undefined}},a.unlockInProgress=j,a.unlockSucceeded=W,a.updateAndApproveTx=function(e,t){return a=>(!t&&a(X()),new Promise(((t,n)=>{const r=(0,A.generateActionId)();(0,A.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:r},{waitForResult:!0}],(r=>{if(a(F(e.id,e.txParams)),a((0,p.resetSendState)()),r)return a(N()),(0,b.logErrorWithMessage)(r),void n(r);t(e)}))})).then((()=>D())).then((e=>a(U(e)))).then((()=>(a((0,p.resetSendState)()),a(L(e.id)),a(z()),a(x("")),a(Y()),e))).catch((e=>(a(z()),Promise.reject(e)))))},a.updateCaveat=function(e,t,a,n){return r=>{(0,A.callBackgroundMethod)("updateCaveat",[e,t,a,n],(e=>{e&&r(Z(e))}))}},a.updateCurrentLocale=ne,a.updateCustomNonce=x,a.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:a}){return async n=>{await Promise.all([(0,A.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,A.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,A.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[a])]),await ae(n)}},a.updateEditableParams=function(e,t){return async a=>{let n;try{n=await(0,A.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,b.logErrorWithMessage)(e),e}return await ae(a),n}},a.updateEventFragment=function(e,t){return(0,A.submitRequestToBackground)("updateEventFragment",[e,t])},a.updateMetamaskState=U,a.updateNftDropDownState=function(e){return async t=>{await(0,A.submitRequestToBackground)("updateNftDropDownState",[e]),await ae(t)}},a.updatePreviousGasParams=function(e,t){return async()=>{let a;try{a=await(0,A.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,b.logErrorWithMessage)(e),e}return a}},a.updateSmartTransaction=function(e,t){return async a=>{try{await(0,A.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,b.logErrorWithMessage)(e),(0,b.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,E.parseSmartTransactionsError)(e.message);a({type:k.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},a.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ae(t)}},a.updateTokenType=async function(e){try{return await(0,A.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,b.logErrorWithMessage)(e)}return undefined},a.updateTransaction=function(e,t){return async a=>{!t&&a(X());try{await(0,A.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw a(F(e.id,e.txParams)),a(z()),a(N()),(0,b.logErrorWithMessage)(t),t}try{a(F(e.id,e.txParams));return a(U(await D())),a(K({id:e.id})),e}finally{a(z())}}},a.updateTransactionGasFees=function(e,t){return async()=>{let a;try{a=await(0,A.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,b.logErrorWithMessage)(e),e}return a}},a.updateTransactionParams=F,a.updateTransactionSendFlowHistory=function(e,t,a){return async()=>{let n;try{n=await(0,A.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,a])}catch(e){throw(0,b.logErrorWithMessage)(e),e}return n}},a.updateViewedNotifications=function(e){return(0,A.submitRequestToBackground)("updateViewedNotifications",[e])},a.upsertNetworkConfiguration=function({rpcUrl:e,chainId:t,nickname:a,rpcPrefs:r,ticker:o=w.EtherDenomination.ETH},{setActive:s,source:i}){return async l=>{let c;n.default.debug(`background.upsertNetworkConfiguration: ${e} ${t} ${o} ${a}`);try{c=await(0,A.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:e,chainId:t,ticker:o,nickname:a||e,rpcPrefs:r},{setActive:s,source:i,referrer:u.ORIGIN_METAMASK}])}catch(e){n.default.error(e),l(Z("Had a problem adding network!"))}return c}},a.verifyPassword=R,a.verifySeedPhrase=M;var n=C(e("loglevel")),r=e("@sentry/browser"),o=e("lodash"),s=e("eth-rpc-errors"),i=e("../helpers/utils/transactions.util"),l=C(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),c=e("../../app/scripts/lib/util"),d=e("../selectors"),p=e("../ducks/send"),m=e("../ducks/alerts/unconnected-account"),f=e("../ducks/metamask/metamask"),g=e("../../shared/modules/hexstring-utils"),T=e("../../shared/constants/hardware-wallets"),h=e("../../shared/constants/metametrics"),E=e("../pages/swaps/swaps.util"),_=e("../../shared/modules/string-utils"),S=e("../helpers/constants/notifications"),v=e("../../shared/modules/i18n"),y=e("../../shared/modules/conversion.utils"),w=e("../../shared/constants/common"),b=e("../../shared/modules/error"),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(e("./actionConstants")),A=e("./action-queue");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(I=function(e){return e?a:t})(e)}function C(e){return e&&e.__esModule?e:{default:e}}function N(){return{type:k.GO_HOME}}function O(e){return new Promise(((t,a)=>{(0,A.callBackgroundMethod)("submitPassword",[e],(e=>{e?a(e):t()}))}))}function P(e){return new Promise(((t,a)=>{(0,A.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?a(e):t(!0)}))}))}function R(e){return new Promise(((t,a)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(e=>{e?a(e):t(!0)}))}))}async function M(){const e=await(0,A.submitRequestToBackground)("verifySeedPhrase");return t.from(e).toString("utf8")}function x(e){return{type:k.UPDATE_CUSTOM_NONCE,value:e}}const D=()=>(n.default.debug("background.getState"),new Promise(((e,t)=>{(0,A.callBackgroundMethod)("getState",[],((a,n)=>{a?t(a):e(n)}))})));function L(e){return t=>{t({type:k.COMPLETED_TX,value:{id:e}})}}function F(e,t){return{type:k.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function B(){return e=>new Promise((e=>{(0,A.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>ae(e)))}function j(){return{type:k.UNLOCK_IN_PROGRESS}}function q(e){return{type:k.UNLOCK_FAILED,value:e}}function W(e){return{type:k.UNLOCK_SUCCEEDED,value:e}}function U(e){return(t,a)=>{var n,r;const s=a(),i=(0,f.getProviderConfig)(s),{metamask:l}=s,{currentLocale:u,selectedAddress:c}=l,{currentLocale:m,selectedAddress:g,providerConfig:T}=e;u&&m&&u!==m&&t(ne(m)),c!==g&&t({type:k.SELECTED_ADDRESS_CHANGED});const h=(null===(n=e.addressBook)||void 0===n?void 0:n[null==T?void 0:T.chainId])??{},E=(null===(r=l.addressBook)||void 0===r?void 0:r[null==i?void 0:i.chainId])??{},_=(0,d.getMetaMaskAccounts)({metamask:e}),S=(0,d.getMetaMaskAccounts)({metamask:l}),v=_[g],y=_[c];Object.entries(S).forEach((([e,a])=>{(0,o.isEqual)(a,_[e])||t({type:k.ACCOUNT_CHANGED,payload:{account:_[e]}})})),!1===(0,o.isEqual)(y,v)&&t({type:k.SELECTED_ACCOUNT_CHANGED,payload:{account:v}}),!1===(0,o.isEqual)(E,h)&&t({type:k.ADDRESS_BOOK_UPDATED,payload:{addressBook:h}}),!1===(0,o.isEqual)(l.gasFeeEstimates,e.gasFeeEstimates)&&t({type:k.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),t({type:k.UPDATE_METAMASK_STATE,value:e}),i.chainId!==T.chainId&&(t({type:k.CHAIN_CHANGED,payload:T.chainId}),t((0,p.initializeSendState)({chainHasChanged:!0})))}}const G=()=>new Promise(((e,t)=>{(0,A.callBackgroundMethod)("setLocked",[],(a=>{a?t(a):e()}))}));async function H(e){n.default.debug("background.setSelectedAddress"),await(0,A.submitRequestToBackground)("setSelectedAddress",[e])}function V(){return{type:k.SHOW_ACCOUNTS_PAGE}}function K({id:e}={}){return{type:k.SHOW_CONF_TX_PAGE,id:e}}function $(e,t,a,n,r){return async o=>{if(!e)throw new Error("MetaMask - Cannot add token without address");r||o(X());try{await(0,A.submitRequestToBackground)("addToken",[e,t,a,n])}catch(e){(0,b.logErrorWithMessage)(e),o(Z(e))}finally{await ae(o),o(z())}}}function Q(e){return{type:k.MODAL_OPEN,payload:e}}function Y(){return(e,t)=>{const a=t(),n=(0,d.getApprovalFlows)(a);(0,c.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,d.hasTransactionPendingApprovals)(a)||0!==n.length||le()}}function X(e){return{type:k.SHOW_LOADING,payload:e}}function z(){return{type:k.HIDE_LOADING}}function Z(e){return(0,b.isErrorWithMessage)(e)?{type:k.DISPLAY_WARNING,payload:e.message}:"string"==typeof e?{type:k.DISPLAY_WARNING,payload:e}:{type:k.DISPLAY_WARNING,payload:`${e}`}}function J(e){return{type:k.SHOW_PRIVATE_KEY,payload:e}}function ee(e,t){return a=>(a(X()),new Promise(((n,r)=>{(0,A.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(a(z()),e)return a(Z(e)),void r(e);n(t)}))})))}function te(){return{type:k.COMPLETE_ONBOARDING}}async function ae(e){let t;n.default.debug("background.getState");try{t=await(0,A.submitRequestToBackground)("getState")}catch(t){throw e(Z(t)),t}return e(U(t)),t}function ne(e){return async t=>{t(X());try{await(0,v.loadRelativeTimeFormatLocaleData)(e);const a=await(0,v.fetchLocale)(e),n=await(0,A.submitRequestToBackground)("setCurrentLocale",[e]);await(0,l.default)(n),t(re(e,a))}catch(e){return void t(Z(e))}finally{t(z())}}}function re(e,t){return{type:k.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function oe(e){return{type:k.SET_NEXT_NONCE,payload:e}}function se(e){return{type:k.SET_REQUEST_ACCOUNT_TABS,payload:e}}function ie(e){return{type:k.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function le(){await(0,A.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function ue(e,t){return(0,A.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,A.generateActionId)()},t])}async function ce(e){await(0,A.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const de=async(e,t,a)=>{const n=t.map((t=>{const n={...e,maxFeePerGas:(0,y.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,y.decimalToHex)(t.maxPriorityFeePerGas),gas:a?(0,y.decimalToHex)(21e3):e.gas,value:e.value};return a&&(n.to=n.from,n.data="0x"),n}));return await(0,A.submitRequestToBackground)("approveTransactionsWithSameNonce",[n])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[5457,{"../ducks":5042,"@reduxjs/toolkit":1714,"remote-redux-devtools":2330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){const t=Boolean(!1)&&!0,a=[];t&&a.push((0,r.default)({name:"MetaMask",hostname:"localhost",port:8e3,realtime:!0}));return(0,n.configureStore)({reducer:o.default,middleware:e=>e({serializableCheck:!1,immutableCheck:!!t&&{warnAfter:100}}),devTools:!1,enhancers:a,preloadedState:e})};var n=e("@reduxjs/toolkit"),r=s(e("remote-redux-devtools")),o=s(e("../ducks"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/store/store.ts"}],[553,{"@formatjs/intl-utils":557},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0});var r=e("@formatjs/intl-utils");var o=/^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;function s(e){return e+""}function i(e,t,a,o){if(r.invariant("number"==typeof a,"value must be number, instead got "+typeof a,TypeError),r.invariant("string"==typeof o,"unit must be number, instead got "+typeof a,TypeError),isNaN(a)||a===Infinity||a===-Infinity)throw new RangeError("Invalid value "+a);var i=function(e){if(r.invariant("string"==typeof e,"unit must be a string, instead got "+typeof e,TypeError),"seconds"===e)return"second";if("minutes"===e)return"minute";if("hours"===e)return"hour";if("days"===e)return"day";if("weeks"===e)return"week";if("months"===e)return"month";if("quarters"===e)return"quarter";if("years"===e)return"year";if("second"!==e&&"minute"!==e&&"hour"!==e&&"day"!==e&&"week"!==e&&"month"!==e&&"quarter"!==e&&"year"!==e)throw new RangeError("Invalid unit "+e);return e}(o),l=r.getInternalSlot(e,t,"fields"),u=r.getInternalSlot(e,t,"style"),c=i;"short"===u?c=o+"-short":"narrow"===u&&(c=o+"-narrow"),c in l||(c=o);var d=l[c];if("auto"===r.getInternalSlot(e,t,"numeric")&&s(a)in d)return[{type:"literal",value:d[s(a)]}];var p,m,f="future";p=a,m=-0,((Object.is?Object.is(p,m):p===m?0!==p||1/p==1/m:p!=p&&m!=m)||a<0)&&(f="past");var g=d[f],T=r.getInternalSlot(e,t,"pluralRules"),h=r.getInternalSlot(e,t,"numberFormat"),E="function"==typeof h.formatToParts?h.formatToParts(Math.abs(a)):[{type:"literal",value:h.format(Math.abs(a)),unit:o}];return function(e,t,a){var o,s,i,l,u=r.partitionPattern(e),c=[];try{for(var d=n(u),p=d.next();!p.done;p=d.next()){var m=p.value;if(r.isLiteralPart(m))c.push({type:"literal",value:m.value});else{r.invariant("0"===m.type,"Malformed pattern "+e);try{for(var f=(i=void 0,n(a)),g=f.next();!g.done;g=f.next()){var T=g.value;c.push({type:T.type,value:T.value,unit:t})}}catch(e){i={error:e}}finally{try{g&&!g.done&&(l=f.return)&&l.call(f)}finally{if(i)throw i.error}}}}}catch(e){o={error:e}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}return c}(g[T.select(a)],i,E)}var l=function(){function e(t,a){if(!(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Intl.RelativeTimeFormat must be called with 'new'");r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat",!0);var n=Intl.getCanonicalLocales(t),s=Object.create(null),i=a===undefined?Object.create(null):r.toObject(a),l=r.getOption(i,"localeMatcher","string",["best fit","lookup"],"best fit");s.localeMatcher=l;var u=r.getOption(i,"numberingSystem","string",undefined,undefined);if(u!==undefined&&!o.test(u))throw new RangeError("Invalid numbering system "+u);s.nu=u;var c=r.createResolveLocale(e.getDefaultLocale)(e.availableLocales,n,s,e.relevantExtensionKeys,e.localeData),d=c.locale,p=c.nu;r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"locale",d),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"style",r.getOption(i,"style","string",["long","narrow","short"],"long")),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numeric",r.getOption(i,"numeric","string",["always","auto"],"always")),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"fields",e.localeData[d]),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberFormat",new Intl.NumberFormat(t)),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"pluralRules",new Intl.PluralRules(t)),r.setInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberingSystem",p)}return e.prototype.format=function(t,a){if("object"!=typeof this)throw new TypeError("format was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("format was called on a invalid context");return i(e.__INTERNAL_SLOT_MAP__,this,Number(t),s(a)).map((function(e){return e.value})).join("")},e.prototype.formatToParts=function(t,a){if("object"!=typeof this)throw new TypeError("formatToParts was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("formatToParts was called on a invalid context");return i(e.__INTERNAL_SLOT_MAP__,this,Number(t),s(a))},e.prototype.resolvedOptions=function(){if("object"!=typeof this)throw new TypeError("resolvedOptions was called on a non-object");if(!r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"initializedRelativeTimeFormat"))throw new TypeError("resolvedOptions was called on a invalid context");return{locale:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"locale"),style:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"style"),numeric:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numeric"),numberingSystem:r.getInternalSlot(e.__INTERNAL_SLOT_MAP__,this,"numberingSystem")}},e.supportedLocalesOf=function(t,a){return r.supportedLocales(e.availableLocales,Intl.getCanonicalLocales(t),a)},e.__addLocaleData=function(){for(var t,a,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var i=function(t){t.availableLocales.forEach((function(a){try{e.localeData[a]=r.unpackData(a,t)}catch(e){if(r.isMissingLocaleDataError(e))return;throw e}}))};try{for(var l=n(o),u=l.next();!u.done;u=l.next()){i(u.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(t)throw t.error}}e.availableLocales=Object.keys(e.localeData),e.__defaultLocale||(e.__defaultLocale=e.availableLocales[0])},e.getDefaultLocale=function(){return e.__defaultLocale},e.localeData={},e.availableLocales=[],e.__defaultLocale="en",e.relevantExtensionKeys=["nu"],e.polyfilled=!0,e.__INTERNAL_SLOT_MAP__=new WeakMap,e}();a.default=l;try{"undefined"!=typeof Symbol&&Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Intl.RelativeTimeFormat",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype.constructor,"length",{value:0,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.supportedLocalesOf,"length",{value:1,writable:!1,enumerable:!1,configurable:!0})}catch(e){}}}},{package:"@formatjs/intl-relativetimeformat",file:"node_modules/@formatjs/intl-relativetimeformat/dist/core.js"}],[554,{"./core":553},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./core");"RelativeTimeFormat"in Intl||Object.defineProperty(Intl,"RelativeTimeFormat",{value:n.default,writable:!0,enumerable:!1,configurable:!0})}}},{package:"@formatjs/intl-relativetimeformat",file:"node_modules/@formatjs/intl-relativetimeformat/dist/polyfill.js"}],[555,{"./dist/polyfill":554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){e("./dist/polyfill")}}},{package:"@formatjs/intl-relativetimeformat",file:"node_modules/@formatjs/intl-relativetimeformat/polyfill.js"}],[556,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0});a.selectUnit=function(e,t,r){void 0===t&&(t=Date.now()),void 0===r&&(r={});var o=n(n({},a.DEFAULT_THRESHOLDS),r||{}),s=(+e-+t)/1e3;if(Math.abs(s)<o.second)return{value:Math.round(s),unit:"second"};var i=s/60;if(Math.abs(i)<o.minute)return{value:Math.round(i),unit:"minute"};var l=s/3600;if(Math.abs(l)<o.hour)return{value:Math.round(l),unit:"hour"};var u=s/86400;if(Math.abs(u)<o.day)return{value:Math.round(u),unit:"day"};var c=new Date(e),d=new Date(t),p=c.getFullYear()-d.getFullYear();if(Math.round(Math.abs(p))>0)return{value:Math.round(p),unit:"year"};var m=12*p+c.getMonth()-d.getMonth();if(Math.round(Math.abs(m))>0)return{value:Math.round(m),unit:"month"};var f=s/604800;return{value:Math.round(f),unit:"week"}},a.DEFAULT_THRESHOLDS={second:45,minute:45,hour:22,day:5}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/diff.js"}],[557,{"./diff":556,"./invariant":558,"./polyfill-utils":559,"./resolve-locale":560,"./units":561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./diff");a.selectUnit=n.selectUnit;var r=e("./polyfill-utils");a.defaultNumberOption=r.defaultNumberOption,a.getInternalSlot=r.getInternalSlot,a.getMultiInternalSlots=r.getMultiInternalSlots,a.getNumberOption=r.getNumberOption,a.getOption=r.getOption,a.isLiteralPart=r.isLiteralPart,a.partitionPattern=r.partitionPattern,a.setInternalSlot=r.setInternalSlot,a.setMultiInternalSlots=r.setMultiInternalSlots,a.setNumberFormatDigitOptions=r.setNumberFormatDigitOptions,a.toObject=r.toObject,a.objectIs=r.objectIs,a.isWellFormedCurrencyCode=r.isWellFormedCurrencyCode,a.toString=r.toString,a.formatNumericToString=r.formatNumericToString,a.toRawFixed=r.toRawFixed,a.toRawPrecision=r.toRawPrecision,a.getMagnitude=r.getMagnitude,a.repeat=r.repeat,Object.defineProperty(a,"hasOwnProperty",{value:r.hasOwnProperty}),a.isWellFormedUnitIdentifier=r.isWellFormedUnitIdentifier,a.defineProperty=r.defineProperty;var o=e("./resolve-locale");a.createResolveLocale=o.createResolveLocale,a.getLocaleHierarchy=o.getLocaleHierarchy,a.supportedLocales=o.supportedLocales,a.unpackData=o.unpackData,a.isMissingLocaleDataError=o.isMissingLocaleDataError,function(e){for(var t in e)a.hasOwnProperty(t)||(a[t]=e[t])}(e("./units"));var s=e("./units");a.removeUnitNamespace=s.removeUnitNamespace;var i=e("./invariant");a.invariant=i.invariant}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/index.js"}],[558,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.invariant=function(e,t,a){if(void 0===a&&(a=Error),!e)throw new a(t)}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/invariant.js"}],[559,{"./invariant":558,"./units":561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./invariant"),r=e("./units");function o(e){if("symbol"==typeof e)throw TypeError("Cannot convert a Symbol value to a string");return String(e)}function s(e,t,a,n){if(e!==undefined){if(e=Number(e),isNaN(e)||e<t||e>a)throw new RangeError(e+" is outside of range ["+t+", "+a+"]");return Math.floor(e)}return n}function i(e,t,a,n,r){return s(e[t],a,n,r)}function l(e,t,a,n){e.get(t)||e.set(t,Object.create(null)),e.get(t)[a]=n}function u(e,t){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];var r=e.get(t);if(!r)throw new TypeError(t+" InternalSlot has not been initialized");return a.reduce((function(e,t){return e[t]=r[t],e}),Object.create(null))}function c(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t}Object.defineProperty(a,"hasOwnProperty",{value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}),a.toObject=function(e){if(null==e)throw new TypeError("undefined/null cannot be converted to object");return Object(e)},a.toString=o,a.getOption=function(e,t,a,n,r){var s=e[t];if(s!==undefined){if("boolean"!==a&&"string"!==a)throw new TypeError("invalid type");if("boolean"===a&&(s=Boolean(s)),"string"===a&&(s=o(s)),n!==undefined&&!n.filter((function(e){return e==s})).length)throw new RangeError(s+" is not within "+n.join(", "));return s}return r},a.defaultNumberOption=s,a.getNumberOption=i,a.setInternalSlot=l,a.setMultiInternalSlots=function(e,t,a){for(var n=0,r=Object.keys(a);n<r.length;n++){var o=r[n];l(e,t,o,a[o])}},a.getInternalSlot=function(e,t,a){return u(e,t,a)[a]},a.getMultiInternalSlots=u,a.isLiteralPart=function(e){return"literal"===e.type},a.partitionPattern=function(e){for(var t=[],a=e.indexOf("{"),r=0,o=0,s=e.length;a<e.length&&a>-1;)r=e.indexOf("}",a),n.invariant(r>a,"Invalid pattern "+e),a>o&&t.push({type:"literal",value:e.substring(o,a)}),t.push({type:e.substring(a+1,r),value:undefined}),o=r+1,a=e.indexOf("{",o);return o<s&&t.push({type:"literal",value:e.substring(o,s)}),t},a.setNumberFormatDigitOptions=function(e,t,a,n,r){var o=i(t,"minimumIntegerDigits",1,21,1),l=t.minimumFractionDigits,u=t.maximumFractionDigits,c=t.minimumSignificantDigits,d=t.maximumSignificantDigits;if(e.minimumIntegerDigits=o,c!==undefined||d!==undefined)e.roundingType="significantDigits",c=s(c,1,21,1),d=s(d,c,21,21),e.minimumSignificantDigits=c,e.maximumSignificantDigits=d;else if(l!==undefined||u!==undefined){e.roundingType="fractionDigits",l=s(l,0,20,a),u=s(u,l,20,Math.max(l,n)),e.minimumFractionDigits=l,e.maximumFractionDigits=u}else"compact"===r?e.roundingType="compactRounding":(e.roundingType="fractionDigits",e.minimumFractionDigits=a,e.maximumFractionDigits=n)},a.objectIs=c;var d=/[^A-Z]/;function p(e,t,a){var n,r,o=a,s=Math.round(e*Math.pow(10,o)),i=s/Math.pow(10,o);if(s<1e21)n=s.toString();else{var l=(n=s.toString()).split("e"),u=l[0],c=l[1];n=u.replace(".",""),n+=f("0",Math.max(+c-n.length+1,0))}if(0!==o){var d=n.length;if(d<=o)n=f("0",o+1-d)+n,d=o+1;var p=n.slice(0,d-o),m=n.slice(d-o);n=p+"."+m,r=p.length}else r=n.length;for(var g=a-t;g>0&&"0"===n[n.length-1];)n=n.slice(0,-1),g--;return"."===n[n.length-1]&&(n=n.slice(0,-1)),{formattedString:n,roundedNumber:i,integerDigitsCount:r}}function m(e,t,a){var n,r,o,s,i=a;if(0===e)n=f("0",i),r=0,o=0;else{var l=e.toString(),u=l.indexOf("e"),c=l.split("e"),d=c[0],p=c[1],m=d.replace(".","");if(u>=0&&m.length<=i)r=+p,n=m+f("0",i-m.length),o=e;else{var T=(r=g(e))-i+1,h=Math.round(_(e,T));_(h,i-1)>=10&&(r+=1,h=Math.floor(h/10)),n=h.toString(),o=_(h,i-1-r)}}if(r>=i-1?(n+=f("0",r-i+1),s=r+1):r>=0?(n=n.slice(0,r+1)+"."+n.slice(r+1),s=r+1):(n="0."+f("0",-r-1)+n,s=1),n.indexOf(".")>=0&&a>t){for(var E=a-t;E>0&&"0"===n[n.length-1];)n=n.slice(0,-1),E--;"."===n[n.length-1]&&(n=n.slice(0,-1))}return{formattedString:n,roundedNumber:o,integerDigitsCount:s};function _(e,t){return t<0?e*Math.pow(10,-t):e/Math.pow(10,t)}}function f(e,t){if("function"==typeof e.repeat)return e.repeat(t);for(var a=new Array(t),n=0;n<a.length;n++)a[n]=e;return a.join("")}function g(e){return Math.floor(Math.log(e)*Math.LOG10E)}a.isWellFormedCurrencyCode=function(e){return 3===(e=e.replace(/([a-z])/g,(function(e,t){return t.toUpperCase()}))).length&&!d.test(e)},a.formatNumericToString=function(e,t){var a,n=t<0||c(t,-0);switch(n&&(t=-t),e.roundingType){case"significantDigits":a=m(t,e.minimumSignificantDigits,e.maximumSignificantDigits);break;case"fractionDigits":a=p(t,e.minimumFractionDigits,e.maximumFractionDigits);break;default:(a=m(t,1,2)).integerDigitsCount>1&&(a=p(t,0,0))}t=a.roundedNumber;var r=a.formattedString,o=a.integerDigitsCount,s=e.minimumIntegerDigits;return o<s&&(r=f("0",s-o)+r),n&&(t=-t),{roundedNumber:t,formattedString:r}},a.toRawFixed=p,a.toRawPrecision=m,a.repeat=f,a.getMagnitude=g;var T=r.SANCTIONED_UNITS.map((function(e){return e.replace(/^(.*?)-/,"")}));a.isWellFormedUnitIdentifier=function(e){if(e=e.replace(/([A-Z])/g,(function(e,t){return t.toLowerCase()})),T.indexOf(e)>-1)return!0;var t=e.split("-per-");return 2===t.length&&!(T.indexOf(t[0])<0||T.indexOf(t[1])<0)},a.defineProperty=function(e,t,a){var n=a.value;Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/polyfill-utils.js"}],[560,{"./invariant":558,"./polyfill-utils":559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},n(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./invariant"),i=e("./polyfill-utils");function l(e,t){s.invariant(2===t.length,"key must have 2 elements");var a=e.length,n="-"+t+"-",r=e.indexOf(n);if(-1!==r){for(var o=r+4,i=o,l=o,u=!1;!u;){var c=e.indexOf("-",l);2===(-1===c?a-l:c-l)?u=!0:-1===c?(i=a,u=!0):(i=c,l=c+1)}return e.slice(o,i)}return n="-"+t,-1!==(r=e.indexOf(n))&&r+3===a?"":undefined}a.createResolveLocale=function(e){var t=function(e){return function(t,a){for(var n={locale:""},r=0,o=a;r<o.length;r++){var s=o[r],i=s.replace(u,""),l=c(t,i);if(l)return n.locale=l,s!==i&&(n.extension=s.slice(i.length+1,s.length)),n}return n.locale=e(),n}}(e),a=function(e){return function(t,a){for(var n={locale:""},r=0,o=a;r<o.length;r++){var s=o[r],i=s.replace(u,""),l=c(t,i);if(l)return n.locale=l,s!==i&&(n.extension=s.slice(i.length+1,s.length)),n}return n.locale=e(),n}}(e);return function(e,n,r,o,i){for(var u,c=(u="lookup"===r.localeMatcher?t(e,n):a(e,n)).locale,d={locale:"",dataLocale:c},p="-u",m=0,f=o;m<f.length;m++){var g=f[m],T=i[c];s.invariant("object"==typeof T&&null!==T,"locale data "+g+" must be an object");var h=T[g];s.invariant(Array.isArray(h),"keyLocaleData for "+g+" must be an array");var E=h[0];s.invariant("string"==typeof E||null===E,"value must be string or null");var _="";if(u.extension){var S=l(u.extension,g);S!==undefined&&(""!==S?~h.indexOf(S)&&(_="-"+g+"-"+(E=S)):~S.indexOf("true")&&(E="true",_="-"+g))}if(g in r){var v=r[g];s.invariant("string"==typeof v||null==v,"optionsValue must be String, Undefined or Null"),~h.indexOf(v)&&v!==E&&(E=v,_="")}d[g]=E,p+=_}if(p.length>2){var y=c.indexOf("-x-");if(-1===y)c+=p;else{var w=c.slice(0,y),b=c.slice(y,c.length);c=w+p+b}c=Intl.getCanonicalLocales(c)[0]}return d.locale=c,d}};var u=/-u(?:-[0-9a-z]{2,8})+/gi;function c(e,t){for(var a=t;;){if(~e.indexOf(a))return a;var n=a.lastIndexOf("-");if(!~n)return undefined;n>=2&&"-"===a[n-2]&&(n-=2),a=a.slice(0,n)}}function d(e){for(var t=[e],a=e.split("-"),n=a.length;n>1;n--)t.push(a.slice(0,n-1).join("-"));return t}function p(e,t){for(var a=[],n=0,r=t;n<r.length;n++){var o=c(e,r[n].replace(u,""));o&&a.push(o)}return a}a.getLocaleHierarchy=d,a.supportedLocales=function(e,t,a){return a!==undefined&&(a=i.toObject(a),i.getOption(a,"localeMatcher","string",["lookup","best fit"],"best fit")),p(e,t)};var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="MISSING_LOCALE_DATA",t}return r(t,e),t}(Error);a.isMissingLocaleDataError=function(e){return"MISSING_LOCALE_DATA"===e.type},a.unpackData=function(e,t,a){void 0===a&&(a=function(e,t){return o(o({},e),t)});var n=d(e),r=n.map((function(e){return t.data[e]})).filter(Boolean);if(!r.length)throw new m('Missing locale data for "'+e+'", lookup hierarchy: '+n.join(", "));return r.reverse(),r.reduce(a,{})}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/resolve-locale.js"}],[561,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.SANCTIONED_UNITS=["angle-degree","area-acre","area-hectare","concentr-percent","digital-bit","digital-byte","digital-gigabit","digital-gigabyte","digital-kilobit","digital-kilobyte","digital-megabit","digital-megabyte","digital-petabyte","digital-terabit","digital-terabyte","duration-day","duration-hour","duration-millisecond","duration-minute","duration-month","duration-second","duration-week","duration-year","length-centimeter","length-foot","length-inch","length-kilometer","length-meter","length-mile-scandinavian","length-mile","length-millimeter","length-yard","mass-gram","mass-kilogram","mass-ounce","mass-pound","mass-stone","temperature-celsius","temperature-fahrenheit","volume-fluid-ounce","volume-gallon","volume-liter","volume-milliliter"],a.removeUnitNamespace=function(e){return e.replace(/^(.*?)-/,"")}}}},{package:"@formatjs/intl-relativetimeformat>@formatjs/intl-utils",file:"node_modules/@formatjs/intl-utils/dist/units.js"}]],[],{});